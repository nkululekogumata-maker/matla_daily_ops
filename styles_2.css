@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap");

:root {
    --ink: #0A1324;
    --ink-2: #1B2743;
    --muted: #5F6E86;
    --bg: #F3F6FB;
    --surface: #FFFFFF;
    --surface-2: #EFF3F8;
    --brand: #0B2E52;
    --brand-2: #103B6B;
    --accent: #F26A21;
    --accent-2: #FFB27D;
    --ring: rgba(242, 106, 33, 0.32);
    --line: rgba(10, 19, 36, 0.08);
    --shadow-1: 0 18px 44px rgba(10, 19, 36, 0.18);
    --shadow-2: 0 8px 20px rgba(10, 19, 36, 0.12);
    --shadow-soft: 0 4px 12px rgba(10, 19, 36, 0.08);
    --surface-dark: #0E1626;
    --text-darkmode: #E6ECF3;
    --muted-darkmode: #9AA7B8;
    --line-darkmode: rgba(255, 255, 255, 0.08);
    --mx: 50vw;
    --my: 30vh;
    --ease-out: cubic-bezier(0.22, 1, 0.36, 1);
    --ease-smooth: cubic-bezier(0.25, 0.8, 0.25, 1);
    --dur-fast: 180ms;
    --dur-mid: 280ms;
    --dur-page: 320ms;
}

@media (max-width: 720px) {
  body {
    font-size: 15px;
  }

  .sidebar {
    width: min(90vw, 360px);
  }

  .menu-page-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .menu-header-actions {
    width: 100%;
    justify-content: flex-start;
    gap: 10px;
  }

  .menu-header-actions .action-btn {
    width: auto;
  }

  .menu-page-actions {
    flex-wrap: wrap;
    gap: 10px;
  }

  .menu-page-actions .action-btn,
  .menu-page-actions .submit-btn,
  .menu-page-actions .back-btn {
    width: 100%;
  }

  .insight-card,
  .glass-card,
  .modal-card {
    padding: 16px;
  }

  .mini-table {
    overflow-x: auto;
  }

  .mini-table table {
    min-width: 680px;
  }

  .auth-gate-card {
    width: min(92vw, 420px);
  }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: "IBM Plex Sans", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: var(--ink);
    background: radial-gradient(900px 600px at 12% 0%, rgba(16, 59, 107, 0.08), rgba(255, 255, 255, 0)),
                radial-gradient(900px 600px at 88% 5%, rgba(23, 162, 164, 0.08), rgba(255, 255, 255, 0)),
                var(--bg);
    line-height: 1.6;
    overflow-x: hidden;
    transition: background 0.5s ease, color 0.5s ease;
}

body.app-locked {
    overflow: hidden;
}

body.theme-transition,
body.theme-transition * {
    transition: background-color 0.45s ease, color 0.45s ease, border-color 0.45s ease, box-shadow 0.45s ease, transform 0.45s ease;
}

html {
    scroll-behavior: smooth;
    scrollbar-color: rgba(10, 19, 36, 0.35) transparent;
}

*::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

*::-webkit-scrollbar-track {
    background: transparent;
}

*::-webkit-scrollbar-thumb {
    background: rgba(10, 19, 36, 0.25);
    border-radius: 999px;
    border: 2px solid transparent;
    background-clip: padding-box;
}

body.dark *::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
}

.skip-link {
    position: absolute;
    left: -999px;
    top: 10px;
    background: #FFFFFF;
    color: var(--ink-2);
    padding: 8px 12px;
    border-radius: 10px;
    box-shadow: var(--shadow-soft);
    z-index: 2000;
}

.skip-link:focus {
    left: 12px;
}

.auth-gate {
    position: fixed;
    inset: 0;
    z-index: 3000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background:
        radial-gradient(520px 300px at 15% 22%, rgba(242, 106, 33, 0.22), transparent 70%),
        radial-gradient(620px 340px at 82% 18%, rgba(23, 162, 164, 0.2), transparent 72%),
        linear-gradient(135deg, rgba(8, 14, 28, 0.94), rgba(10, 19, 36, 0.9));
    backdrop-filter: blur(8px);
    overflow-y: auto;
}

.auth-gate.is-open {
    display: flex;
}

.auth-gate-card {
    width: min(520px, 96vw);
    background: rgba(255, 255, 255, 0.94);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 22px;
    padding: 22px;
    box-shadow: 0 24px 50px rgba(0, 0, 0, 0.35);
    max-height: calc(100vh - 48px);
    overflow-y: auto;
}

.auth-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
}

.auth-brand .menu-logo {
    position: static;
    width: 60px;
    height: 60px;
    max-width: none;
    max-height: none;
    margin: 0;
}

.auth-brand p {
    color: var(--muted);
}

.password-strength {
    margin-top: 8px;
    font-size: 12px;
    color: var(--muted);
}

.password-strength-track {
    width: 100%;
    height: 6px;
    border-radius: 999px;
    background: rgba(11, 46, 82, 0.12);
    overflow: hidden;
    margin-bottom: 6px;
}

.password-strength-fill {
    height: 100%;
    width: 0%;
    border-radius: inherit;
    transition: width 0.2s ease, background-color 0.2s ease;
}

.password-strength-fill.weak {
    background: #dc2626;
}

.password-strength-fill.fair {
    background: #f59e0b;
}

.password-strength-fill.good {
    background: #0ea5e9;
}

.password-strength-fill.strong {
    background: #16a34a;
}

.lead-draft-notice {
    margin: 12px 0 14px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(11, 46, 82, 0.16);
    background: rgba(11, 46, 82, 0.05);
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
}

.lead-draft-notice-text {
    color: var(--ink-2);
    font-size: 13px;
}

.auth-remember-row {
    margin-top: -4px;
}

.auth-remember-label {
    width: 100%;
    justify-content: flex-start;
    gap: 10px;
    font-size: 14px;
}

.auth-remember-label input[type="checkbox"] {
    margin-right: 4px;
}

.lead-draft-notice-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

body.dark .password-strength-track {
    background: rgba(255, 255, 255, 0.18);
}

body.dark .lead-draft-notice {
    border-color: rgba(255, 255, 255, 0.24);
    background: rgba(255, 255, 255, 0.08);
}

body.dark .lead-draft-notice-text {
    color: #f3f4f6;
}

.link-btn {
    background: none;
    border: none;
    color: #0B2E52;
    text-decoration: underline;
    cursor: pointer;
    padding: 0;
    font-weight: 700;
}

body.dark .link-btn {
    color: #FFD6BC;
}

.learning-body a,
.learning-panel a {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(242, 106, 33, 0.12);
    color: #9a3e0f;
    text-decoration: none;
    font-weight: 700;
    margin: 8px 0;
}

.payments-tabs .action-btn {
    min-width: 120px;
}

.payments-tabs .action-btn.is-active {
    border-color: rgba(242, 106, 33, 0.8);
    box-shadow: 0 10px 24px rgba(242, 106, 33, 0.18);
}

.payments-list {
    margin-top: 14px;
    display: grid;
    gap: 12px;
}

.payment-card {
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.04);
    border-radius: 16px;
    padding: 14px;
}

.payment-card h4 {
    margin: 0 0 6px;
    font-size: 16px;
}

.payment-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    color: var(--muted);
    font-size: 13px;
}

.payment-meta span {
    background: rgba(242, 106, 33, 0.14);
    color: #a64b1a;
    padding: 4px 10px;
    border-radius: 999px;
    font-weight: 700;
}

.copy-btn {
    border: 1px solid rgba(242, 106, 33, 0.4);
    background: rgba(242, 106, 33, 0.12);
    color: #a64b1a;
    padding: 4px 10px;
    border-radius: 999px;
    font-weight: 700;
    cursor: pointer;
}

.onboarding-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 14px 18px;
    margin: 0 0 18px;
    border-radius: 16px;
    background: rgba(242, 106, 33, 0.12);
    border: 1px solid rgba(242, 106, 33, 0.25);
}

.onboarding-banner h4 {
    margin: 0 0 6px;
}

.onboarding-banner p {
    margin: 0;
    color: var(--muted);
}

body.dark .onboarding-banner {
    background: rgba(242, 106, 33, 0.18);
    border-color: rgba(242, 106, 33, 0.35);
}

@media (max-width: 720px) {
    .onboarding-banner {
        flex-direction: column;
        align-items: flex-start;
    }
    .onboarding-banner .action-btn {
        width: 100%;
    }
}

body.dark .copy-btn {
    color: #FFD6BC;
    border-color: rgba(242, 106, 33, 0.5);
}

.mini-input-stack {
    display: grid;
    gap: 6px;
}

.mini-input-stack input {
    width: 100%;
    padding: 6px 10px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    background: rgba(255, 255, 255, 0.08);
    color: inherit;
}

body.dark .mini-input-stack input {
    border-color: rgba(255, 255, 255, 0.08);
    background: rgba(17, 17, 17, 0.5);
}

body.dark .payment-card {
    background: rgba(19, 19, 19, 0.4);
    border-color: rgba(255, 255, 255, 0.06);
}

.learning-body a:hover,
.learning-panel a:hover {
    background: rgba(242, 106, 33, 0.22);
}

body.dark .learning-body a,
body.dark .learning-panel a {
    color: #FFD6BC;
    background: rgba(242, 106, 33, 0.18);
}

.auth-mode-switch {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 8px;
    margin-bottom: 12px;
    width: 100%;
}

.auth-mode-switch .action-btn {
    min-width: 0;
    width: 100%;
    white-space: nowrap;
    justify-content: center;
    padding: 10px 12px;
}

#authAdminBtn {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
}

@media (max-width: 560px) {
    .auth-mode-switch {
        grid-template-columns: 1fr;
    }
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: "Space Grotesk", "IBM Plex Sans", sans-serif;
    letter-spacing: -0.02em;
}

:where(button, a, input, select, textarea, [tabindex]):focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.55);
    outline-offset: 2px;
}

body.dark {
    color: var(--text-darkmode);
    background: radial-gradient(900px 600px at 12% 0%, rgba(20, 69, 118, 0.16), rgba(0, 0, 0, 0)),
                radial-gradient(900px 600px at 88% 5%, rgba(23, 162, 164, 0.16), rgba(0, 0, 0, 0)),
                #0C1321;
}

body.dark .action-btn,
body.dark .sidebar-toggle,
body.dark .sidebar-settings-btn,
body.dark .sidebar-signout-btn,
body.dark .insight-card,
body.dark .modal-card,
body.dark .learning-panel,
body.dark .payment-card,
body.dark .admin-jfa-card,
body.dark .hero-jfa-card,
body.dark .team-card,
body.dark .facility-card,
body.dark .summary-card,
body.dark .target-card,
body.dark .archives-panel,
body.dark .menu-page-header {
    transition: transform 180ms cubic-bezier(0.2, 0.8, 0.2, 1),
                box-shadow 200ms cubic-bezier(0.2, 0.8, 0.2, 1),
                border-color 200ms ease,
                background 200ms ease;
}

body.dark .insight-card:hover,
body.dark .learning-panel:hover,
body.dark .payment-card:hover,
body.dark .admin-jfa-card:hover,
body.dark .hero-jfa-card:hover,
body.dark .team-card:hover,
body.dark .facility-card:hover,
body.dark .summary-card:hover,
body.dark .target-card:hover,
body.dark .archives-panel:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.45), 0 0 0 1px rgba(242, 106, 33, 0.2);
}

body.dark .action-btn:hover,
body.dark .sidebar-toggle:hover,
body.dark .sidebar-settings-btn:hover,
body.dark .sidebar-signout-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(242, 106, 33, 0.25);
}

body.dark .menu-page.is-open {
    animation-timing-function: cubic-bezier(0.2, 0.8, 0.2, 1);
}

body.dark .hero-orb,
body.dark .hero-particles {
    filter: drop-shadow(0 0 16px rgba(242, 106, 33, 0.25));
}

body.dark .navbar,
body.dark .flow-stepper,
body.dark .about-card,
body.dark .service-item,
body.dark .registration-form-container,
body.dark .dbd-form-container,
body.dark .stats-section,
body.dark .summary-card,
body.dark .target-card,
body.dark .archives-panel,
body.dark .auto-assign-card,
body.dark .toast,
body.dark .modal-card {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

.navbar,
.flow-stepper,
.about-card,
.service-item,
.registration-form-container,
.dbd-form-container,
.stats-section,
.summary-card,
.target-card,
.archives-panel,
.auto-assign-card,
.toast,
.modal-card,
.action-btn,
.submit-btn,
.back-btn,
.hero-glass,
.trust-item,
.hero-mini-item,
.hero-top-item,
.hero-stat,
.coverage-chip,
.alert-item,
.forecast-item,
.heatmap-cell {
    transition: background 0.5s ease, color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
}

body.dark h1,
body.dark h2,
body.dark h3,
body.dark h4,
body.dark h5,
body.dark h6,
body.dark p,
body.dark label,
body.dark strong,
body.dark .detail-label,
body.dark .detail-value,
body.dark .summary-title,
body.dark .summary-value,
body.dark .target-title,
body.dark .target-value,
body.dark .leaderboard-title,
body.dark .top-team-badge,
body.dark .status-pill,
body.dark .badge,
body.dark .assignment-badge,
body.dark .hero-tagline {
    color: var(--text-darkmode);
}

body.dark .nav-info,
body.dark .page-subtitle,
body.dark .summary-label,
body.dark .target-sub,
body.dark .filter-count,
body.dark .tooltip,
body.dark .target-hint,
body.dark .date-display,
body.dark .auto-assign-card small {
    color: var(--muted-darkmode);
}

body.dark .stats-section::after {
    border-color: rgba(255, 255, 255, 0.1);
}

body.dark .icon {
    color: var(--accent-2);
}

body.dark .radio-option,
body.dark .team-card,
body.dark .facility-card,
body.dark .summary-item {
    background: rgba(20, 30, 48, 0.8);
    border-color: var(--line-darkmode);
}

body.dark .form-group input,
body.dark .form-group select,
body.dark .form-group textarea,
body.dark .archives-controls select,
body.dark #facilityFilter,
body.dark .reset-time-control input {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .facility-edit-input {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .facility-edit-input:disabled {
    color: var(--muted-darkmode);
    opacity: 0.85;
}

body.dark .action-btn.secondary {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.35);
}

body.dark .rankings-table th,
body.dark .mini-table th {
    background: rgba(13, 31, 56, 0.9);
    color: var(--text-darkmode);
}

body.dark .rankings-table td,
body.dark .mini-table td {
    color: var(--text-darkmode);
}

body.dark .rankings-table table tbody tr:nth-child(even),
body.dark .mini-table tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.03);
}

body.dark .mini-table table,
body.dark .rankings-table table {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .mini-table tr,
body.dark .rankings-table tr {
    border-color: var(--line-darkmode);
}

body.dark .mini-table td strong,
body.dark .rankings-table td strong {
    color: var(--text-darkmode);
}

body.dark .target-badge.met {
    color: #7DE7D7;
    background: rgba(26, 167, 161, 0.2);
}

body.dark .target-badge.missed {
    color: #FFB4A6;
    background: rgba(231, 76, 60, 0.2);
}

body.dark .status-pill {
    background: rgba(26, 167, 161, 0.2);
    border-color: rgba(26, 167, 161, 0.35);
}

body.dark .status-chip {
    border-color: rgba(255, 255, 255, 0.18);
    color: #F4F7FF;
}

body.dark .chip-ok {
    color: #9AEBDD;
    background: rgba(26, 167, 161, 0.24);
}

body.dark .chip-warn {
    color: #FFD589;
    background: rgba(246, 193, 78, 0.26);
}

body.dark .chip-danger {
    color: #FFC0B4;
    background: rgba(231, 76, 60, 0.24);
}

body.dark .highlight-band {
    background: linear-gradient(135deg, rgba(23, 162, 164, 0.22), rgba(11, 46, 82, 0.2));
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark .sticky-summary {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .sticky-value {
    color: var(--text-darkmode);
}

body.dark .trust-item {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .site-footer {
    color: var(--muted-darkmode);
}

.theme-toggle {
    white-space: nowrap;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    background-image: linear-gradient(rgba(10, 19, 36, 0.03) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(10, 19, 36, 0.03) 1px, transparent 1px);
    background-size: 52px 52px;
    pointer-events: none;
    z-index: -1;
}

body::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    background:
        radial-gradient(260px 260px at var(--mx) var(--my), rgba(242, 106, 33, 0.12), rgba(242, 106, 33, 0)),
        radial-gradient(340px 340px at calc(var(--mx) * 0.6) calc(var(--my) * 1.2), rgba(23, 162, 164, 0.09), rgba(23, 162, 164, 0));
    transition: background 0.18s linear;
}

@keyframes heroDrift {
    0% { transform: translate3d(0, 0, 0); }
    50% { transform: translate3d(10px, -6px, 0); }
    100% { transform: translate3d(0, 0, 0); }
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
}

/* Navigation */
.navbar {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.72);
    backdrop-filter: blur(16px) saturate(140%);
    border-bottom: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: 0 10px 30px rgba(10, 19, 36, 0.08);
}

.navbar::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 4px;
    background: linear-gradient(90deg, rgba(242, 106, 33, 0.9), rgba(11, 46, 82, 0.3));
}

.nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 14px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}

.nav-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 10px;
    flex-wrap: wrap;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.65);
    border: 1px solid rgba(10, 19, 36, 0.08);
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.08);
}

.nav-actions .status-pill {
    margin-right: 2px;
}

body.dark .nav-actions {
    background: rgba(12, 18, 32, 0.75);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 10px 18px rgba(0, 0, 0, 0.35);
}

.logo-button {
    border: none;
    background: transparent;
    padding: 0;
    cursor: pointer;
    appearance: none;
    min-height: auto;
    overflow: visible;
    border-radius: 999px;
    line-height: 0;
}

.logo-button-oval {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 6px 14px 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.22);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(244, 248, 255, 0.85));
    box-shadow: 0 6px 14px rgba(10, 19, 36, 0.12);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}

.logo-button-oval.compact {
    padding: 4px 12px 4px 8px;
    gap: 10px;
}

.logo-button-oval:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 22px rgba(10, 19, 36, 0.16), 0 0 0 2px rgba(242, 106, 33, 0.12);
    border-color: rgba(242, 106, 33, 0.55);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 248, 240, 0.9));
}

.logo-button-oval:active {
    transform: translateY(0);
    box-shadow: 0 6px 12px rgba(10, 19, 36, 0.14);
}

.logo-button:focus-visible .logo-button-oval {
    outline: 2px solid rgba(242, 106, 33, 0.55);
    outline-offset: 3px;
}

.logo-button:focus-visible {
    outline: none;
}

.menu-icon {
    width: 36px;
    height: 28px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 6px;
}

.menu-icon span {
    display: block;
    height: 3px;
    border-radius: 999px;
    background: #132845;
    box-shadow: 0 2px 4px rgba(19, 40, 69, 0.2);
}

.logo-button-oval.compact .menu-icon {
    width: 28px;
    height: 22px;
    gap: 5px;
}

.logo-button-oval.compact .menu-icon span {
    height: 2px;
}

.menu-icon span:nth-child(2) {
    width: 70%;
}

.sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(10, 19, 36, 0.4);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1100;
}

.sidebar-overlay.is-open {
    opacity: 1;
    pointer-events: all;
}

.sidebar {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: min(360px, 90vw);
    background: rgba(255, 255, 255, 0.96);
    border-right: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: 0 16px 34px rgba(10, 19, 36, 0.2);
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    z-index: 1200;
    padding: 18px 16px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.sidebar.is-open {
    transform: translateX(0);
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
}

.sidebar-section {
    margin-bottom: 16px;
}

.sidebar-toggle {
    width: 100%;
    text-align: left;
    background: rgba(10, 19, 36, 0.06);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 10px 12px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.sidebar-toggle:hover {
    transform: translateY(-1px);
    border-color: rgba(242, 106, 33, 0.35);
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.12);
}

.sidebar-toggle.is-active {
    background: linear-gradient(135deg, rgba(242, 106, 33, 0.16), rgba(242, 106, 33, 0.08));
    border-color: rgba(242, 106, 33, 0.42);
    box-shadow: 0 10px 20px rgba(242, 106, 33, 0.2);
}

.sidebar-toggle.is-active .shortcut-pill {
    background: rgba(242, 106, 33, 0.18);
    border-color: rgba(242, 106, 33, 0.38);
    color: #A84A11;
}

.shortcut-pill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--ink-2);
    background: rgba(10, 19, 36, 0.08);
    border: 1px solid rgba(10, 19, 36, 0.12);
    white-space: nowrap;
}

body.dark .shortcut-pill {
    color: var(--text-darkmode);
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark .auth-gate-card {
    background: rgba(14, 22, 38, 0.96);
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark .auth-brand p {
    color: var(--muted-darkmode);
}

.sidebar-content {
    display: none;
    padding: 10px 6px;
    gap: 8px;
}

.sidebar-content.is-open {
    display: grid;
}

.sidebar-sub-btn {
    width: 100%;
    text-align: left;
    background: rgba(10, 19, 36, 0.04);
    border: 1px solid rgba(10, 19, 36, 0.1);
    border-radius: 10px;
    padding: 8px 10px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.sidebar-sub-btn:hover {
    transform: translateY(-1px);
    border-color: rgba(242, 106, 33, 0.28);
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.12);
}

body.dark .sidebar-sub-btn {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--line-darkmode);
    color: var(--text-darkmode);
}

.sidebar-note {
    color: var(--muted);
    font-size: 0.85rem;
    margin-bottom: 6px;
}

.sidebar-footer {
    margin-top: auto;
    padding-top: 10px;
}

#adminHomeBtn {
    margin-bottom: 18px;
}

#sidebarSettingsBtn {
    margin-top: 8px;
}

.sidebar-settings-btn {
    width: 100%;
    border: 1px solid rgba(10, 19, 36, 0.14);
    background: linear-gradient(135deg, rgba(10, 19, 36, 0.08), rgba(10, 19, 36, 0.03));
    color: var(--ink-2);
    border-radius: 12px;
    padding: 10px 12px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: transform var(--dur-fast) var(--ease-smooth), box-shadow var(--dur-fast) var(--ease-smooth), border-color var(--dur-fast) var(--ease-smooth);
}

.sidebar-settings-btn:hover {
    transform: translateY(-1px);
    border-color: rgba(242, 106, 33, 0.4);
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.12);
}

.sidebar-settings-btn.is-active {
    border-color: rgba(242, 106, 33, 0.5);
    box-shadow: 0 10px 18px rgba(242, 106, 33, 0.2);
    background: linear-gradient(135deg, rgba(242, 106, 33, 0.2), rgba(242, 106, 33, 0.1));
}

.sidebar-signout-btn {
    width: 100%;
    margin-top: 8px;
    border: 1px solid rgba(190, 32, 32, 0.28);
    background: linear-gradient(135deg, rgba(190, 32, 32, 0.12), rgba(190, 32, 32, 0.04));
    color: #8b1d1d;
    border-radius: 12px;
    padding: 10px 12px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: transform var(--dur-fast) var(--ease-smooth), box-shadow var(--dur-fast) var(--ease-smooth), border-color var(--dur-fast) var(--ease-smooth);
}

.sidebar-signout-btn:hover {
    transform: translateY(-1px);
    border-color: rgba(190, 32, 32, 0.5);
    box-shadow: 0 10px 18px rgba(120, 16, 16, 0.16);
}

.gear-icon {
    font-size: 1.05rem;
    line-height: 1;
}

.learning-body {
    background: rgba(10, 19, 36, 0.04);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 10px 12px;
    font-size: 0.9rem;
    line-height: 1.5;
    max-height: 360px;
    overflow-y: auto;
}

.learning-pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-top: 12px;
}

.learning-page-indicator {
    font-size: 0.9rem;
    color: var(--muted);
}

body.dark .learning-page-indicator {
    color: var(--muted-darkmode);
}

body.dark .sidebar {
    background: rgba(14, 22, 38, 0.98);
    border-color: var(--line-darkmode);
}

body.dark .sidebar-toggle,
body.dark .learning-body {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--line-darkmode);
    color: var(--text-darkmode);
}

body.dark .sidebar-settings-btn {
    background: rgba(255, 255, 255, 0.06);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .sidebar-settings-btn.is-active {
    background: linear-gradient(135deg, rgba(242, 106, 33, 0.3), rgba(242, 106, 33, 0.14));
    border-color: rgba(242, 106, 33, 0.58);
}

body.dark .sidebar-signout-btn {
    color: #ffb8b8;
    border-color: rgba(255, 130, 130, 0.35);
    background: linear-gradient(135deg, rgba(153, 32, 32, 0.35), rgba(153, 32, 32, 0.15));
}

body.dark .sidebar-toggle.is-active {
    background: linear-gradient(135deg, rgba(242, 106, 33, 0.26), rgba(242, 106, 33, 0.12));
    border-color: rgba(242, 106, 33, 0.52);
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
}

body.dark .sidebar-toggle.is-active .shortcut-pill {
    color: #FFD6BC;
    background: rgba(242, 106, 33, 0.25);
    border-color: rgba(242, 106, 33, 0.42);
}

body.dark .logo-button-oval {
    background: linear-gradient(135deg, rgba(12, 18, 32, 0.95), rgba(16, 24, 40, 0.9));
    border-color: rgba(255, 255, 255, 0.14);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.35);
}

body.dark .menu-icon span {
    background: #E6ECF3;
    box-shadow: 0 2px 6px rgba(230, 236, 243, 0.2);
}

.nav-logo {
    height: 48px;
    filter: drop-shadow(0 6px 14px rgba(10, 19, 36, 0.15));
}

.logo-button-oval.compact .nav-logo {
    height: 36px;
}

.nav-info {
    display: flex;
    gap: 24px;
    color: var(--muted);
    font-size: 0.95rem;
    font-weight: 500;
}

/* Flow Stepper */
.flow-stepper {
    margin: 74px auto 12px;
    padding: 10px 20px;
    max-width: 1100px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    position: sticky;
    top: 64px;
    z-index: 900;
    background: rgba(243, 246, 251, 0.68);
    backdrop-filter: blur(14px) saturate(140%);
    border-bottom: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: 0 12px 26px rgba(10, 19, 36, 0.08);
    --step-progress: 0%;
    border-radius: 18px;
}

.sticky-summary {
    position: sticky;
    top: 114px;
    z-index: 850;
    margin: 10px auto 0;
    max-width: 1100px;
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    padding: 8px 14px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid rgba(10, 19, 36, 0.12);
    backdrop-filter: blur(12px) saturate(140%);
    font-weight: 600;
}

.sticky-label {
    text-transform: uppercase;
    font-size: 0.7rem;
    letter-spacing: 0.5px;
    color: var(--muted);
}

.sticky-value {
    color: var(--ink-2);
}

.sticky-divider {
    width: 1px;
    height: 16px;
    background: rgba(10, 19, 36, 0.12);
}

.flow-stepper::before {
    content: "";
    position: absolute;
    left: 8%;
    right: 8%;
    bottom: 6px;
    height: 3px;
    background: rgba(10, 19, 36, 0.1);
    border-radius: 999px;
}

.flow-stepper::after {
    content: "";
    position: absolute;
    left: 8%;
    width: var(--step-progress);
    bottom: 6px;
    height: 2px;
    background: linear-gradient(90deg, rgba(23, 162, 164, 0.3), rgba(23, 162, 164, 0.75));
    border-radius: 999px;
    opacity: 0.85;
    transition: width 0.4s ease;
}

.flow-step {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 8px 14px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.14);
    color: var(--muted);
    font-weight: 600;
    background: rgba(255, 255, 255, 0.7);
    position: relative;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.flow-step::after {
    content: "";
    position: absolute;
    right: -18px;
    width: 12px;
    height: 2px;
    background: rgba(10, 19, 36, 0.18);
}

.flow-step:last-child::after {
    display: none;
}

.step-index {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: var(--surface-2);
    color: var(--ink-2);
    font-size: 0.8rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

.flow-step.is-active,
body:has(#landing-page.page.active) .flow-step[data-step="1"],
body:has(#registration-page.page.active) .flow-step[data-step="2"],
body:has(#assignment-page.page.active) .flow-step[data-step="3"],
body:has(#dbd-page.page.active) .flow-step[data-step="4"],
body:has(#stats-page.page.active) .flow-step[data-step="5"] {
    color: var(--brand);
    border-color: rgba(11, 46, 82, 0.35);
    box-shadow: 0 10px 22px rgba(11, 46, 82, 0.18);
    transform: translateY(-1px);
}

.flow-step.is-active {
    animation: stepPulse 1.6s ease-in-out infinite;
}

@keyframes stepPulse {
    0%, 100% { box-shadow: 0 8px 18px rgba(11, 46, 82, 0.18); }
    50% { box-shadow: 0 12px 26px rgba(11, 46, 82, 0.28); }
}

.flow-step.is-complete {
    color: #0D7F7A;
    border-color: rgba(23, 162, 164, 0.5);
    background: rgba(23, 162, 164, 0.08);
}

.flow-step.is-active .step-index,
body:has(#landing-page.page.active) .flow-step[data-step="1"] .step-index,
body:has(#registration-page.page.active) .flow-step[data-step="2"] .step-index,
body:has(#assignment-page.page.active) .flow-step[data-step="3"] .step-index,
body:has(#dbd-page.page.active) .flow-step[data-step="4"] .step-index,
body:has(#stats-page.page.active) .flow-step[data-step="5"] .step-index {
    background: var(--accent);
    color: #FFFFFF;
}

.flow-step.is-complete .step-index {
    background: #0D7F7A;
    color: #FFFFFF;
}

/* Page System */
.page {
    display: none;
    min-height: 100vh;
    padding-top: 120px;
    opacity: 0;
    transform: translateY(12px) scale(0.985);
    filter: blur(3px);
    transition: opacity 0.5s ease, transform 0.5s ease, filter 0.5s ease;
}

.page.active {
    display: block;
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
    animation: pageReveal 0.65s cubic-bezier(0.22, 1, 0.36, 1);
}

@keyframes pageReveal {
    0% { opacity: 0; transform: translateY(18px) scale(0.98); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

.page.zoom-enter {
    animation: zoomIn 0.55s cubic-bezier(0.22, 1, 0.36, 1);
}

.page.zoom-exit {
    animation: zoomOut 0.35s ease;
}

@keyframes zoomIn {
    0% { opacity: 0; transform: translateY(10px) scale(0.97); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes zoomOut {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(8px) scale(0.985); }
}

/* Hero */
.hero-section {
    position: relative;
    min-height: 70vh;
    display: grid;
    place-items: center;
    text-align: center;
    background: linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 55%, #091427 100%);
    color: #FFFFFF;
    overflow: hidden;
    box-shadow: inset 0 -120px 140px rgba(10, 19, 36, 0.35);
    animation: heroGlow 12s ease-in-out infinite;
}

/* Reduce unnecessary gap between sticky summary and hero content on landing page */
#landing-page {
    padding-top: 10px;
}

#landing-page .hero-section {
    min-height: 62vh;
    place-items: start center;
    padding-top: 10px;
}

.nav-notification-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: 1px solid rgba(10, 19, 36, 0.22);
    background: rgba(10, 19, 36, 0.06);
    color: var(--ink-2);
    box-shadow: 0 8px 18px rgba(10, 19, 36, 0.12);
    cursor: pointer;
    position: relative;
    transition: transform 180ms var(--ease-out), box-shadow 180ms var(--ease-out), background 180ms var(--ease-out), border-color 180ms var(--ease-out);
}

.notification-dropdown {
    position: fixed;
    width: min(420px, 92vw);
    z-index: 1400;
    display: none;
}

.notification-dropdown.is-open {
    display: block;
}

.notification-dropdown::before {
    content: "";
    position: absolute;
    top: -8px;
    right: 24px;
    width: 16px;
    height: 16px;
    background: rgba(255, 255, 255, 0.96);
    border-left: 1px solid rgba(10, 19, 36, 0.12);
    border-top: 1px solid rgba(10, 19, 36, 0.12);
    transform: rotate(45deg);
    z-index: 1;
}

body.dark .notification-dropdown::before {
    background: rgba(14, 22, 38, 0.96);
    border-left-color: rgba(255, 255, 255, 0.1);
    border-top-color: rgba(255, 255, 255, 0.1);
}

.notification-dropdown-card {
    background: rgba(255, 255, 255, 0.96);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 24px 44px rgba(10, 19, 36, 0.22);
    backdrop-filter: blur(14px) saturate(150%);
    animation: dropdownIn 220ms var(--ease-out);
    max-height: min(70vh, 520px);
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    display: grid;
    gap: 8px;
}

.notification-dropdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    position: sticky;
    top: 0;
    background: inherit;
    padding-bottom: 6px;
    z-index: 1;
}

.notification-dropdown-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.notification-dropdown-card .notification-list {
    max-height: none;
    overflow: visible;
    padding-right: 0;
}

body.dark .notification-dropdown-card {
    background: rgba(14, 22, 38, 0.96);
    border-color: var(--line-darkmode);
}

@keyframes dropdownIn {
    from { opacity: 0; transform: translateY(-8px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

.nav-notification-btn:hover {
    transform: translateY(-1px);
    background: rgba(242, 106, 33, 0.14);
    border-color: rgba(242, 106, 33, 0.4);
    box-shadow: 0 12px 22px rgba(10, 19, 36, 0.16);
}

body.dark .nav-notification-btn {
    background: rgba(14, 22, 38, 0.7);
    border-color: rgba(255, 255, 255, 0.12);
    color: var(--text-darkmode);
}

body.dark .nav-notification-btn:hover {
    background: rgba(242, 106, 33, 0.18);
    border-color: rgba(242, 106, 33, 0.45);
}

.nav-notification-btn.has-unread {
    animation: notifPulse 1.8s ease-in-out infinite;
}

.nav-notification-btn.has-unread .hero-notification-icon {
    animation: notifWiggle 1.2s ease-in-out infinite;
}

.nav-notification-btn.has-unread:hover {
    animation-play-state: paused;
}

.nav-notification-btn:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.6);
    outline-offset: 3px;
}

.hero-notification-icon {
    font-size: 1.1rem;
}

.hero-notification-badge {
    position: absolute;
    top: 6px;
    right: 6px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    border-radius: 999px;
    background: #F26A21;
    color: #FFFFFF;
    font-size: 0.65rem;
    font-weight: 800;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 6px 12px rgba(242, 106, 33, 0.35);
}

.nav-notification-btn.has-unread .hero-notification-badge {
    display: inline-flex;
}

.notification-list {
    display: grid;
    gap: 12px;
    margin: 12px 0 8px;
    max-height: min(44vh, 340px);
    overflow-y: auto;
    padding-right: 4px;
}

.notification-filter-bar {
    display: flex;
    gap: 8px;
    margin: 10px 0 6px;
}

.notification-filter-btn {
    min-width: 92px;
}

.notification-filter-btn.is-active {
    border-color: rgba(242, 106, 33, 0.55);
    box-shadow: 0 8px 18px rgba(242, 106, 33, 0.2);
}

.notification-search-row {
    margin: 8px 0 10px;
}

.notification-search-row input {
    width: 100%;
    min-height: 40px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.14);
    background: rgba(255, 255, 255, 0.88);
    color: var(--ink);
    padding: 8px 12px;
}

body.dark .notification-search-row input {
    border-color: rgba(126, 173, 220, 0.28);
    background: rgba(8, 16, 32, 0.82);
    color: var(--text-darkmode);
}

.notification-pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin-top: 8px;
}

.notification-card {
    width: 100%;
    display: block;
    text-align: left;
    font: inherit;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.92);
    border-radius: 14px;
    padding: 12px 14px;
    box-shadow: var(--shadow-soft);
    transition: transform 160ms var(--ease-out), box-shadow 160ms var(--ease-out), border-color 160ms var(--ease-out);
    cursor: pointer;
}

.notification-card:hover {
    transform: translateY(-1px);
    border-color: rgba(242, 106, 33, 0.3);
    box-shadow: 0 12px 22px rgba(10, 19, 36, 0.16);
}

.notification-card.is-unread {
    border-color: rgba(242, 106, 33, 0.35);
    box-shadow: 0 10px 20px rgba(242, 106, 33, 0.18);
}

.notification-card h4 {
    margin: 0 0 6px;
}

.notification-card p {
    margin: 0 0 8px;
    color: var(--muted);
}

@keyframes notifPulse {
    0% { box-shadow: 0 0 0 0 rgba(242, 106, 33, 0.28); }
    70% { box-shadow: 0 0 0 10px rgba(242, 106, 33, 0); }
    100% { box-shadow: 0 0 0 0 rgba(242, 106, 33, 0); }
}

@keyframes notifWiggle {
    0%, 100% { transform: rotate(0deg); }
    20% { transform: rotate(-8deg); }
    40% { transform: rotate(8deg); }
    60% { transform: rotate(-6deg); }
    80% { transform: rotate(6deg); }
}

.notification-meta {
    font-size: 0.75rem;
    color: var(--muted);
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.notification-new {
    background: rgba(242, 106, 33, 0.16);
    color: #9a3e0f;
    border: 1px solid rgba(242, 106, 33, 0.35);
    padding: 2px 8px;
    border-radius: 999px;
    font-weight: 700;
}

body.dark .notification-card {
    background: rgba(14, 22, 38, 0.92);
    border-color: var(--line-darkmode);
}

body.dark .notification-card p,
body.dark .notification-meta {
    color: var(--muted-darkmode);
}

#notificationDetailBody p {
    margin: 0;
    white-space: pre-wrap;
}

body.dark .hero-section {
    background: radial-gradient(circle at top, rgba(28, 45, 76, 0.85), rgba(8, 12, 22, 0.98));
}

body.dark::after {
    background:
        radial-gradient(260px 260px at var(--mx) var(--my), rgba(242, 106, 33, 0.16), rgba(242, 106, 33, 0)),
        radial-gradient(340px 340px at calc(var(--mx) * 0.6) calc(var(--my) * 1.2), rgba(23, 162, 164, 0.13), rgba(23, 162, 164, 0));
}

body.dark .hero-overlay {
    background: linear-gradient(120deg, rgba(5, 12, 24, 0.75), rgba(9, 18, 34, 0.65));
}

body.dark .hero-glass {
    background: rgba(8, 14, 26, 0.72);
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark .hero-orb {
    opacity: 0.35;
}

body.dark .hero-particles {
    opacity: 0.35;
}

.menu-page-overlay {
    position: fixed;
    inset: 0;
    background: rgba(6, 12, 22, 0.55);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1300;
}

.menu-page-overlay.is-open {
    opacity: 1;
    pointer-events: all;
}

.menu-page {
    position: fixed;
    inset: 0;
    display: none;
    z-index: 1400;
    padding: 24px;
    overflow-y: auto;
    background: rgba(246, 248, 252, 0.98);
    animation: menuFadeIn 0.25s ease;
}

.menu-page.is-open {
    display: block;
}

.menu-page-inner {
    max-width: 1000px;
    margin: 40px auto;
    background: rgba(255, 255, 255, 0.92);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 24px;
    padding: 28px;
    box-shadow: 0 18px 40px rgba(10, 19, 36, 0.18);
    animation: menuCardIn 0.35s cubic-bezier(0.22, 1, 0.36, 1);
    position: relative;
    overflow: hidden;
}

.menu-page-inner::before {
    content: "";
    position: absolute;
    top: 0;
    left: 12%;
    right: 12%;
    height: 4px;
    background: linear-gradient(90deg, rgba(242, 106, 33, 0.85), rgba(23, 162, 164, 0.35));
    border-radius: 999px;
    opacity: 0.75;
}

.menu-illustration {
    width: 100%;
    height: 180px;
    border-radius: 18px;
    margin-bottom: 16px;
    background-size: cover;
    background-position: center;
    border: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: inset 0 0 40px rgba(10, 19, 36, 0.18);
    position: relative;
    overflow: hidden;
}

.menu-illustration::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.18), transparent 45%);
    opacity: 0.6;
    z-index: 1;
}

.menu-logo {
    position: absolute;
    inset: 0;
    margin: auto;
    max-width: 220px;
    max-height: 120px;
    width: auto;
    height: auto;
    filter: drop-shadow(0 12px 26px rgba(0, 0, 0, 0.35));
    z-index: 1;
    opacity: 0.95;
}

.menu-logo {
    position: absolute;
    inset: 0;
    margin: auto;
    max-width: 220px;
    max-height: 120px;
    width: auto;
    height: auto;
    filter: drop-shadow(0 12px 26px rgba(0, 0, 0, 0.35));
    z-index: 1;
    opacity: 0.95;
}

.menu-illustration-text {
    position: absolute;
    bottom: 12px;
    left: 16px;
    right: 16px;
    padding: 10px 12px;
    border-radius: 12px;
    background: rgba(10, 19, 36, 0.6);
    color: #FFFFFF;
    font-weight: 600;
    font-size: 0.95rem;
    font-family: "The Magic Castle", "Space Grotesk", "IBM Plex Sans", cursive;
    text-align: center;
    backdrop-filter: blur(6px);
    z-index: 2;
}

body.dark .menu-illustration-text {
    background: rgba(8, 14, 26, 0.7);
}

body.dark .menu-illustration::after {
    opacity: 0.95;
}

body.dark .menu-page-header {
    background: rgba(14, 22, 38, 0.9);
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark .menu-scope-chip {
    background: rgba(242, 106, 33, 0.18);
    border-color: rgba(242, 106, 33, 0.4);
    color: #FFBD8D;
}

.admin-illustration {
    background-image:
        radial-gradient(circle at 20% 30%, rgba(242, 106, 33, 0.55), transparent 45%),
        radial-gradient(circle at 70% 40%, rgba(23, 162, 164, 0.45), transparent 50%),
        linear-gradient(120deg, rgba(12, 28, 52, 0.95), rgba(8, 14, 26, 0.9)),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='900' height='400' viewBox='0 0 900 400'><rect width='900' height='400' fill='none'/><circle cx='140' cy='200' r='64' fill='rgba(255,255,255,0.08)'/><rect x='250' y='120' width='520' height='42' rx='20' fill='rgba(255,255,255,0.08)'/><rect x='250' y='190' width='420' height='36' rx='18' fill='rgba(255,255,255,0.08)'/><rect x='250' y='250' width='300' height='32' rx='16' fill='rgba(255,255,255,0.08)'/></svg>");
}

.learning-illustration {
    background-image:
        radial-gradient(circle at 30% 40%, rgba(242, 106, 33, 0.5), transparent 55%),
        radial-gradient(circle at 70% 20%, rgba(255, 255, 255, 0.2), transparent 60%),
        linear-gradient(120deg, rgba(9, 20, 40, 0.98), rgba(12, 24, 48, 0.92)),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='900' height='400' viewBox='0 0 900 400'><rect width='900' height='400' fill='none'/><path d='M120 280 Q180 180 260 240 T400 230 T540 190 T720 220' stroke='rgba(255,255,255,0.18)' stroke-width='10' fill='none'/><circle cx='180' cy='180' r='34' fill='rgba(255,255,255,0.12)'/><circle cx='310' cy='220' r='26' fill='rgba(255,255,255,0.12)'/><circle cx='510' cy='200' r='22' fill='rgba(255,255,255,0.12)'/></svg>");
}

.forms-illustration {
    background-image:
        radial-gradient(circle at 35% 30%, rgba(23, 162, 164, 0.45), transparent 55%),
        radial-gradient(circle at 80% 40%, rgba(242, 106, 33, 0.4), transparent 50%),
        linear-gradient(120deg, rgba(10, 19, 36, 0.96), rgba(9, 18, 34, 0.9)),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='900' height='400' viewBox='0 0 900 400'><rect width='900' height='400' fill='none'/><rect x='160' y='90' width='200' height='220' rx='16' fill='rgba(255,255,255,0.08)'/><rect x='220' y='120' width='400' height='36' rx='18' fill='rgba(255,255,255,0.1)'/><rect x='220' y='180' width='340' height='30' rx='15' fill='rgba(255,255,255,0.1)'/><rect x='220' y='230' width='260' height='26' rx='13' fill='rgba(255,255,255,0.1)'/></svg>");
}

body.dark .menu-illustration {
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 0 50px rgba(5, 10, 20, 0.6);
}

.menu-page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    margin: 0 -8px 18px;
    padding: 12px 8px;
    border-bottom: 1px solid rgba(10, 19, 36, 0.1);
    position: sticky;
    top: 0;
    z-index: 2;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px) saturate(150%);
}

.menu-page.is-scrolled .menu-page-header {
    border-bottom-color: rgba(242, 106, 33, 0.24);
    box-shadow: 0 10px 20px rgba(10, 19, 36, 0.08);
}

body.dark .menu-page.is-scrolled .menu-page-header {
    border-bottom-color: rgba(242, 106, 33, 0.34);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.28);
}

.menu-header-actions {
    display: inline-flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: flex-end;
}

.menu-scope-chip {
    margin-left: auto;
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(242, 106, 33, 0.12);
    border: 1px solid rgba(242, 106, 33, 0.28);
    color: #C85A12;
    font-size: 0.85rem;
    font-weight: 600;
}

.menu-page-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 18px;
}

.menu-page-actions .action-btn,
.menu-page-actions .submit-btn,
.menu-page-actions .back-btn {
    transition: transform var(--dur-fast) var(--ease-out), box-shadow var(--dur-fast) var(--ease-out), border-color var(--dur-fast) var(--ease-smooth);
}

.menu-page-actions .action-btn:hover,
.menu-page-actions .submit-btn:hover,
.menu-page-actions .back-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.12);
}

.menu-page-actions .action-btn {
    min-width: 160px;
}

.menu-page-actions .action-btn.is-active {
    background: linear-gradient(135deg, var(--accent), #D85A19);
    color: #FFFFFF;
    border-color: transparent;
    box-shadow: 0 10px 22px rgba(242, 106, 33, 0.24);
}

.menu-page-note {
    background: rgba(255, 255, 255, 0.78);
    border: 1px solid rgba(10, 19, 36, 0.1);
    border-radius: 12px;
    padding: 10px 12px;
}

.menu-page.menu-page-enter .menu-page-note,
.menu-page.menu-page-enter .menu-page-scope,
.menu-page.menu-page-enter .menu-page-actions,
.menu-page.menu-page-enter .menu-page-subsection,
.menu-page.menu-page-enter .lead-panel,
.menu-page.menu-page-enter .admin-detail-section,
.menu-page.menu-page-enter .admin-jfa-list,
.menu-page.menu-page-enter .learning-body {
    opacity: 0;
    transform: translateY(8px);
    animation: menuSectionIn 320ms var(--ease-out) forwards;
}

.menu-page.menu-page-enter .menu-page-note { animation-delay: 20ms; }
.menu-page.menu-page-enter .menu-page-scope { animation-delay: 40ms; }
.menu-page.menu-page-enter .menu-page-actions { animation-delay: 60ms; }
.menu-page.menu-page-enter .menu-page-subsection { animation-delay: 90ms; }
.menu-page.menu-page-enter .lead-panel { animation-delay: 100ms; }
.menu-page.menu-page-enter .admin-detail-section { animation-delay: 120ms; }
.menu-page.menu-page-enter .admin-jfa-list { animation-delay: 140ms; }
.menu-page.menu-page-enter .learning-body { animation-delay: 160ms; }

@keyframes menuSectionIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.learning-search {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 16px;
}

.learning-search input {
    flex: 1 1 240px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.18);
    background: rgba(255, 255, 255, 0.9);
}

.learning-search input:focus {
    outline: none;
    border-color: rgba(242, 106, 33, 0.55);
    box-shadow: 0 0 0 3px rgba(242, 106, 33, 0.15);
}

.learning-search-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 12px;
    padding: 8px 10px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.7);
}

.learning-filter-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.learning-search-filters label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: var(--ink-2);
}

.learning-search-filters input {
    accent-color: var(--accent);
}

.learning-mark {
    background: rgba(242, 106, 33, 0.35);
    padding: 0 2px;
    border-radius: 4px;
}

.learning-search-results {
    margin-bottom: 18px;
    display: grid;
    gap: 10px;
}

.learning-search-item {
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.85);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.learning-search-item:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 20px rgba(10, 19, 36, 0.12);
}

.learning-search-item:active {
    transform: translateY(0);
}

.learning-search-item strong {
    display: block;
    margin-bottom: 4px;
}

.learning-search-item span {
    color: var(--muted);
    font-size: 0.88rem;
}

body.dark .learning-search-item {
    background: rgba(10, 18, 34, 0.86);
    border-color: var(--line-darkmode);
}

body.dark .learning-search-item span {
    color: var(--muted-darkmode);
}

body.dark .learning-search input {
    background: rgba(10, 18, 34, 0.9);
    border-color: rgba(255, 255, 255, 0.16);
    color: var(--text-darkmode);
}

body.dark .learning-search-filters {
    background: rgba(10, 18, 34, 0.9);
    border-color: rgba(255, 255, 255, 0.16);
}

body.dark .learning-search-filters label {
    color: var(--text-darkmode);
}

.menu-page-note,
.menu-page-scope {
    color: var(--muted);
    font-size: 0.95rem;
    margin-bottom: 12px;
}

.menu-page-body {
    margin-bottom: 20px;
}

.menu-fab {
    position: fixed;
    right: 24px;
    bottom: 24px;
    padding: 10px 16px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.2);
    background: rgba(255, 255, 255, 0.92);
    box-shadow: 0 12px 24px rgba(10, 19, 36, 0.16);
    font-weight: 600;
    display: none;
    z-index: 1500;
    cursor: pointer;
}

.menu-fab.is-visible {
    display: inline-flex;
}

body.dark .menu-fab {
    background: rgba(10, 18, 34, 0.9);
    border-color: rgba(255, 255, 255, 0.16);
    color: var(--text-darkmode);
}

.reduce-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
}
.menu-page-subsection h3 {
    margin: 10px 0 12px;
}

.form-list {
    display: grid;
    gap: 14px;
}

.form-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 16px;
    border-radius: 18px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.08);
}

.lead-panel {
    background: rgba(255, 255, 255, 0.86);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.08);
    transition: transform 0.22s ease, box-shadow 0.22s ease, border-color 0.22s ease;
}

.lead-panel + .lead-panel {
    margin-top: 14px;
}

.lead-panel-head {
    margin-bottom: 12px;
}

.lead-authority-code {
    display: inline-flex;
    align-items: center;
    margin-top: 8px;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.14);
    background: rgba(242, 106, 33, 0.1);
    color: #0A1324;
    font-size: 0.84rem;
    font-weight: 700;
    letter-spacing: 0.01em;
}

.lead-form-grid {
    display: grid;
    gap: 10px;
}

.lead-consent-check {
    margin-top: 4px;
}

.lead-section {
    border: 1px solid rgba(10, 19, 36, 0.1);
    border-radius: 16px;
    padding: 14px;
    background: rgba(255, 255, 255, 0.75);
    box-shadow: var(--shadow-soft);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.lead-panel:hover,
.lead-panel:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 14px 24px rgba(10, 19, 36, 0.12);
}

.lead-section:hover,
.lead-section:focus-within {
    transform: translateY(-1px);
    border-color: rgba(23, 162, 164, 0.36);
    box-shadow: 0 10px 20px rgba(10, 19, 36, 0.12);
}

.lead-section + .lead-section {
    margin-top: 12px;
}

.lead-section-title {
    font-weight: 700;
    color: var(--ink-2);
    margin-bottom: 10px;
}

.lead-tc-box {
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    padding: 12px;
    background: rgba(10, 19, 36, 0.04);
    max-height: 220px;
    overflow: auto;
    font-size: 0.9rem;
}

.lead-tc-box ul {
    padding-left: 18px;
    margin: 8px 0;
}

.lead-checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
    gap: 8px;
    margin-bottom: 10px;
    font-size: 0.9rem;
}

.lead-policy-table {
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.7);
}

.lead-policy-row {
    display: grid;
    grid-template-columns: repeat(4, minmax(140px, 1fr));
    border-top: 1px solid rgba(10, 19, 36, 0.08);
}

.lead-policy-row:first-child {
    border-top: none;
}

.lead-policy-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-right: 1px solid rgba(10, 19, 36, 0.08);
    font-size: 0.9rem;
}

.lead-policy-item:last-child {
    border-right: none;
}

body.dark .lead-policy-table {
    background: rgba(14, 22, 38, 0.85);
    border-color: var(--line-darkmode);
}

body.dark .lead-policy-row {
    border-top-color: var(--line-darkmode);
}

body.dark .lead-policy-item {
    border-right-color: var(--line-darkmode);
}

@media (max-width: 720px) {
    .lead-policy-row {
        grid-template-columns: repeat(2, minmax(140px, 1fr));
    }
}

.lead-signature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
}

.lead-signature-pad-wrap {
    width: 100%;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.18);
    background: #FFFFFF;
    overflow: hidden;
}

.lead-signature-pad {
    display: block;
    width: 100%;
    height: 180px;
    cursor: crosshair;
}

.lead-signature-preview-wrap {
    width: 100%;
    border: 1px solid rgba(10, 19, 36, 0.16);
    border-radius: 12px;
    background: #FFFFFF;
    padding: 8px;
}

.lead-signature-preview-image {
    width: 100%;
    height: auto;
    max-height: 260px;
    object-fit: contain;
    display: block;
}

body.dark .lead-panel {
    background: rgba(10, 18, 34, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .lead-section {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .lead-authority-code {
    background: rgba(242, 106, 33, 0.2);
    border-color: var(--line-darkmode);
    color: #F8FBFF;
}

body.dark .lead-tc-box {
    background: rgba(255, 255, 255, 0.04);
    border-color: var(--line-darkmode);
    color: var(--text-darkmode);
}

body.dark .lead-signature-pad-wrap {
    border-color: var(--line-darkmode);
    background: rgba(255, 255, 255, 0.96);
}

body.dark .lead-signature-preview-wrap {
    border-color: var(--line-darkmode);
    background: rgba(255, 255, 255, 0.96);
}

body.dark .form-card {
    background: rgba(10, 18, 34, 0.9);
    border-color: var(--line-darkmode);
}

.learning-detail-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.learning-detail-bar {
    flex: 1;
    height: 10px;
    border-radius: 999px;
    background: rgba(10, 19, 36, 0.1);
    overflow: hidden;
}

.learning-detail-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--accent), rgba(242, 106, 33, 0.5));
    transition: width 0.3s ease;
}

.learning-detail-body {
    display: grid;
    gap: 16px;
}

.learning-panel {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.08);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.learning-panel:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 24px rgba(10, 19, 36, 0.14);
    border-color: rgba(242, 106, 33, 0.35);
}

.learning-panel h4 {
    margin: 0 0 10px;
}

.learning-topic-logo {
    display: flex;
    align-items: center;
    gap: 14px;
    margin: 0 0 14px;
    padding: 10px 12px;
    border-radius: 14px;
    border: 1px solid rgba(10, 19, 36, 0.1);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.96), rgba(248, 251, 255, 0.92));
}

.learning-topic-logo.compact {
    margin-top: 4px;
}

.learning-topic-logo img {
    width: 56px;
    height: 56px;
    object-fit: contain;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.12);
    border: 1px solid rgba(10, 19, 36, 0.08);
}

.learning-topic-logo-copy {
    display: grid;
    gap: 2px;
}

.learning-topic-logo-copy strong {
    font-size: 0.95rem;
    line-height: 1.2;
}

.learning-topic-logo-copy span {
    font-size: 0.8rem;
    opacity: 0.82;
}

.learning-checklist label {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.learning-quiz {
    display: grid;
    gap: 10px;
}

.learning-quiz button {
    justify-content: flex-start;
}

.learning-reflection textarea {
    width: 100%;
    min-height: 120px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.16);
    background: rgba(255, 255, 255, 0.95);
}

body.dark .learning-panel {
    background: rgba(10, 18, 34, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .learning-topic-logo {
    background: linear-gradient(135deg, rgba(9, 16, 30, 0.96), rgba(14, 24, 44, 0.92));
    border-color: var(--line-darkmode);
}

body.dark .learning-topic-logo img {
    background: rgba(255, 255, 255, 0.96);
}

body.dark .learning-detail-bar {
    background: rgba(255, 255, 255, 0.1);
}

body.dark .learning-reflection textarea {
    background: rgba(10, 18, 34, 0.9);
    border-color: var(--line-darkmode);
    color: var(--text-darkmode);
}

.admin-insights {
    margin-top: 18px;
    display: grid;
    gap: 14px;
}

.admin-detail-section {
    display: grid;
    gap: 14px;
    margin-top: 8px;
}

.admin-jfa-list {
    margin-top: 14px;
    display: grid;
    gap: 10px;
}

.admin-jfa-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.9);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.admin-jfa-card:active {
    transform: scale(0.99);
}

.admin-jfa-card .restore-btn {
    margin-left: auto;
}

.admin-jfa-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 18px rgba(10, 19, 36, 0.12);
}

.admin-jfa-card.is-selected {
    border-color: rgba(242, 106, 33, 0.55);
    box-shadow: 0 0 0 2px rgba(242, 106, 33, 0.2), 0 10px 18px rgba(10, 19, 36, 0.12);
}

.admin-jfa-card:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.55);
    outline-offset: 2px;
}

.admin-jfa-status {
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 0.85rem;
    font-weight: 600;
}

.admin-jfa-status.under {
    background: rgba(231, 76, 60, 0.18);
    color: #C0392B;
}

.admin-jfa-status.on {
    background: rgba(11, 46, 82, 0.18);
    color: #0B2E52;
}

.admin-jfa-status.over {
    background: rgba(39, 174, 96, 0.18);
    color: #1E8449;
}

.admin-graph {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
    align-items: end;
    height: 120px;
    margin-top: 10px;
}

.admin-graph-bar {
    background: rgba(23, 162, 164, 0.2);
    border-radius: 8px;
    position: relative;
}

.admin-graph-bar span {
    position: absolute;
    bottom: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.75rem;
    color: var(--muted);
}

body.dark .admin-jfa-card {
    background: rgba(10, 18, 34, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .admin-graph-bar span {
    color: var(--muted-darkmode);
}

.insight-card {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 16px;
    padding: 14px 16px;
    box-shadow: 0 10px 22px rgba(10, 19, 36, 0.08);
    transition: transform var(--dur-mid) var(--ease-out), box-shadow var(--dur-mid) var(--ease-out), border-color var(--dur-mid) var(--ease-out);
}

.insight-card h4 {
    margin: 0 0 8px;
}

.insight-card:hover,
.insight-card:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 14px 26px rgba(10, 19, 36, 0.12);
    border-color: rgba(242, 106, 33, 0.22);
}

.insight-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.insight-chip {
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(10, 19, 36, 0.08);
    font-size: 0.85rem;
}

.insight-chip.danger {
    background: rgba(231, 76, 60, 0.18);
    color: #C0392B;
}

body.dark .insight-card {
    background: rgba(10, 18, 34, 0.86);
    border-color: var(--line-darkmode);
}

body.dark .insight-chip {
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-darkmode);
}

body.dark .insight-chip.danger {
    background: rgba(231, 76, 60, 0.22);
    color: #F2B4AE;
}

body.dark .menu-page {
    background: rgba(6, 10, 20, 0.98);
}

body.dark .menu-page-inner {
    background: rgba(10, 18, 34, 0.92);
    border-color: var(--line-darkmode);
}

body.dark .menu-page-note,
body.dark .menu-page-scope {
    color: var(--muted-darkmode);
}

@keyframes menuFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes menuCardIn {
    0% { opacity: 0; transform: translateY(12px) scale(0.98); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

.hero-orb {
    position: absolute;
    width: 320px;
    height: 320px;
    border-radius: 50%;
    opacity: 0.55;
    background: radial-gradient(circle at 30% 30%, rgba(23, 162, 164, 0.9), rgba(11, 46, 82, 0.2));
    animation: orbFloat 12s ease-in-out infinite;
    z-index: 0;
}

.hero-orb.orb-one {
    top: -80px;
    left: -60px;
}

.hero-orb.orb-two {
    bottom: -120px;
    right: -40px;
    width: 260px;
    height: 260px;
    animation-delay: -4s;
}

@keyframes orbFloat {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(18px) scale(1.05); }
}

.hero-particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
}

.hero-particles span {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: rgba(23, 162, 164, 0.55);
    animation: particleDrift 10s ease-in-out infinite;
}

.hero-particles span:nth-child(1) { top: 20%; left: 15%; animation-delay: -1s; }
.hero-particles span:nth-child(2) { top: 35%; left: 80%; animation-delay: -3s; }
.hero-particles span:nth-child(3) { top: 70%; left: 25%; animation-delay: -5s; }
.hero-particles span:nth-child(4) { top: 60%; left: 70%; animation-delay: -2s; }
.hero-particles span:nth-child(5) { top: 15%; left: 55%; animation-delay: -6s; }
.hero-particles span:nth-child(6) { top: 80%; left: 55%; animation-delay: -4s; }

@keyframes particleDrift {
    0%, 100% { transform: translateY(0); opacity: 0.4; }
    50% { transform: translateY(-16px); opacity: 0.8; }
}

.hero-spotlight {
    position: absolute;
    inset: -10%;
    pointer-events: none;
    z-index: 0;
    background: radial-gradient(420px 300px at var(--spot-x, 50%) var(--spot-y, 35%), rgba(255, 255, 255, 0.22), transparent 65%);
    mix-blend-mode: screen;
    transition: background 0.12s ease;
}

.hero-section::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' seed='2'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
    opacity: 0.5;
    mix-blend-mode: soft-light;
    pointer-events: none;
    z-index: 0;
}

.hero-section::after {
    content: "";
    position: absolute;
    left: 10%;
    right: 10%;
    bottom: -20%;
    height: 50%;
    background: radial-gradient(closest-side, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0));
    filter: blur(8px);
    opacity: 0.7;
    z-index: 0;
    pointer-events: none;
}

.hero-overlay {
    position: absolute;
    inset: 0;
    background: radial-gradient(700px 420px at 18% 20%, rgba(242, 106, 33, 0.2), transparent 60%),
                radial-gradient(600px 420px at 80% 10%, rgba(11, 46, 82, 0.35), transparent 65%);
    opacity: 1;
    animation: heroDrift 14s ease-in-out infinite;
}

.hero-content {
    position: relative;
    z-index: 1;
    animation: floatIn 1.1s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: floatIn 1.1s ease, heroFloat 10s ease-in-out infinite;
}

.hero-stage {
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 420ms var(--ease-smooth), transform 420ms var(--ease-smooth);
    transition-delay: var(--stage-delay, 0ms);
}

.hero-content.is-revealed .hero-stage {
    opacity: 1;
    transform: translateY(0);
}

.hero-headline {
    font-size: clamp(0.85rem, 1.6vw, 1.05rem);
    font-weight: 700;
    margin-bottom: 8px;
    color: rgba(255, 255, 255, 0.88);
    text-transform: uppercase;
    letter-spacing: 0.6px;
    display: inline-block;
    transform: translateY(38px);
    animation: taglineReveal 1s ease forwards;
    background: linear-gradient(90deg, #ffffff 0%, #ffd2b8 28%, #ffffff 50%, #ffe0cf 72%, #ffffff 100%);
    background-size: 240% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: taglineReveal 1s ease forwards, headlineSheen 8s ease-in-out infinite;
}

.hero-subheadline {
    font-size: 0.78rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: inline-block;
    transform: translateY(38px);
    animation: taglineReveal 1s ease 0.15s forwards;
    text-shadow: 0 0 18px rgba(242, 106, 33, 0.2);
}

@keyframes headlineSheen {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.hero-logo {
    width: clamp(180px, 28vw, 360px);
    height: auto;
    display: block;
    margin: 0 auto 12px;
    filter: drop-shadow(0 10px 24px rgba(10, 19, 36, 0.25));
    transition: transform 0.3s ease, filter 0.3s ease;
    transform-style: preserve-3d;
    animation: heroLogoPulse 5s ease-in-out infinite;
}

.hero-logo:hover {
    transform: translateY(-2px) scale(1.02);
    filter: drop-shadow(0 14px 28px rgba(242, 106, 33, 0.35));
}

.hero-tagline {
    font-size: clamp(1.1rem, 2vw, 1.5rem);
    color: rgba(255, 255, 255, 0.9);
    font-family: "The Magic Castle", "Space Grotesk", "IBM Plex Sans", cursive;
    margin-bottom: 10px;
}

.hero-status-ribbon {
    width: 100%;
    text-align: center;
    font-size: 0.74rem;
    letter-spacing: 0.35px;
    text-transform: uppercase;
    border-radius: 999px;
    padding: 6px 12px;
    background: rgba(23, 162, 164, 0.16);
    border: 1px solid rgba(23, 162, 164, 0.35);
    color: rgba(255, 255, 255, 0.92);
}

.hero-status-strip {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.hero-status-strip .status-chip {
    margin-top: 0;
    background: rgba(255, 255, 255, 0.82);
    border-color: rgba(10, 19, 36, 0.18);
    color: #0A1324;
    font-size: 0.7rem;
}

.hero-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

.hero-primary-cta {
    animation-duration: 7s;
}

.hero-secondary-cta {
    min-width: 148px;
    position: relative;
    overflow: hidden;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
    border-radius: 14px !important;
    font-weight: 700;
    letter-spacing: 0.2px;
    padding: 11px 18px;
    transition: transform 0.18s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}

body:not(.dark) .hero-secondary-cta {
    color: #08233f !important;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(229, 243, 255, 0.92)) !important;
    border-color: rgba(11, 46, 82, 0.32) !important;
    box-shadow: 0 10px 20px rgba(8, 35, 63, 0.16), inset 0 1px 0 rgba(255, 255, 255, 0.65);
}

body.dark .hero-secondary-cta {
    color: #f1f7ff !important;
    background: linear-gradient(135deg, rgba(18, 117, 147, 0.52), rgba(19, 155, 154, 0.38), rgba(242, 106, 33, 0.32)) !important;
    border-color: rgba(214, 231, 255, 0.34) !important;
    box-shadow: 0 12px 24px rgba(2, 8, 18, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.hero-secondary-cta::after {
    content: "";
    position: absolute;
    inset: -140% -25%;
    background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.34), transparent);
    transform: translateX(-120%);
    transition: transform 0.55s ease;
    pointer-events: none;
}

.hero-secondary-cta:hover {
    transform: translateY(-1px);
}

.hero-secondary-cta:hover::after {
    transform: translateX(120%);
}

.hero-secondary-cta:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.75);
    outline-offset: 2px;
}

.hero-secondary-cta:active {
    transform: translateY(0);
    box-shadow: 0 6px 14px rgba(8, 35, 63, 0.2);
}

.fa-hero-cta {
    min-width: 182px;
    background: linear-gradient(135deg, #0d7f7a, #0b5f73);
    box-shadow: 0 14px 30px rgba(11, 95, 115, 0.42);
}

.fa-hero-cta:hover {
    box-shadow: 0 18px 36px rgba(11, 95, 115, 0.38);
}

.hero-ribbon {
    width: clamp(120px, 20vw, 180px);
    height: 6px;
    margin: 0 auto 18px;
    border-radius: 999px;
    background: linear-gradient(90deg, rgba(242, 106, 33, 0.95), rgba(11, 46, 82, 0.35));
    box-shadow: 0 12px 20px rgba(242, 106, 33, 0.25);
    animation: ribbonPulse 6s ease-in-out infinite, ribbonShimmer 8s ease-in-out infinite;
}

.hero-glass {
    display: inline-flex;
    flex-direction: column;
    gap: 18px;
    padding: 20px 28px;
    border-radius: 20px;
    background: rgba(12, 19, 33, 0.35);
    border: 1px solid rgba(242, 106, 33, 0.22);
    backdrop-filter: blur(18px) saturate(140%);
    box-shadow: 0 16px 32px rgba(0, 0, 0, 0.25);
    position: relative;
    overflow: hidden;
}

.hero-glass::after {
    content: "";
    position: absolute;
    inset: -40% -60%;
    background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.12), transparent);
    transform: translateX(-60%);
    animation: glassShimmer 0.6s ease forwards, glassShimmerRepeat 12s ease-in-out infinite;
}

@keyframes glassShimmer {
    0% { transform: translateX(-60%); }
    100% { transform: translateX(60%); }
}

.hero-badges {
    display: flex;
    gap: 14px;
    justify-content: center;
    flex-wrap: wrap;
}

.badge {
    padding: 9px 20px;
    border-radius: 999px;
    background: rgba(12, 19, 33, 0.35);
    border: 1px solid rgba(242, 106, 33, 0.22);
    font-weight: 600;
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 10px;
}

.hero-mini {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
}

.hero-top3 {
    display: grid;
    gap: 8px;
}

.hero-top-title {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    color: rgba(255, 255, 255, 0.7);
}

.hero-top-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.hero-top-item {
    background: rgba(12, 19, 33, 0.4);
    border: 1px solid rgba(242, 106, 33, 0.22);
    border-radius: 999px;
    padding: 6px 12px;
    font-weight: 600;
    font-size: 0.82rem;
}

.hero-mini-item {
    background: rgba(12, 19, 33, 0.4);
    border: 1px solid rgba(242, 106, 33, 0.22);
    border-radius: 12px;
    padding: 10px 12px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.hero-mini-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 22px rgba(242, 106, 33, 0.25);
    border-color: rgba(242, 106, 33, 0.45);
}

.hero-mini-item:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.6);
    outline-offset: 2px;
}

.hero-mini-value {
    display: block;
    font-size: 1.1rem;
    font-weight: 700;
}

.hero-mini-label {
    font-size: 0.75rem;
    letter-spacing: 0.4px;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.7);
}

.hero-stat {
    background: rgba(12, 19, 33, 0.4);
    border: 1px solid rgba(242, 106, 33, 0.22);
    border-radius: 12px;
    padding: 10px 12px;
}

.hero-stat-value {
    display: block;
    font-size: 1.2rem;
    font-weight: 700;
}

.hero-stat-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: rgba(255, 255, 255, 0.75);
}

.hero-progress {
    display: grid;
    gap: 6px;
}

.hero-progress-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    color: rgba(255, 255, 255, 0.7);
}

.hero-progress-bar {
    height: 6px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.12);
    overflow: hidden;
}

.hero-progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, rgba(242, 106, 33, 0.9), rgba(11, 46, 82, 0.35));
    border-radius: 999px;
    transition: width 0.3s ease;
}

.hero-progress-fill.metric-up,
.hero-mini-value.metric-up {
    animation: metricPulseUp 420ms ease;
}

.hero-progress-fill.metric-down,
.hero-mini-value.metric-down {
    animation: metricPulseDown 420ms ease;
}

.hero-progress-value {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.8);
}

.hero-last {
    font-size: 0.78rem;
    color: rgba(255, 255, 255, 0.7);
}

.hero-assist {
    font-size: 0.76rem;
    color: rgba(255, 255, 255, 0.82);
    border-top: 1px dashed rgba(255, 255, 255, 0.2);
    padding-top: 8px;
}

@keyframes metricPulseUp {
    0% { transform: scale(1); filter: brightness(1); }
    40% { transform: scale(1.08); filter: brightness(1.22); }
    100% { transform: scale(1); filter: brightness(1); }
}

@keyframes metricPulseDown {
    0% { transform: scale(1); filter: brightness(1); }
    40% { transform: scale(0.96); filter: brightness(0.92); }
    100% { transform: scale(1); filter: brightness(1); }
}

.start-here {
    margin-top: 12px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-weight: 600;
    color: var(--accent-2);
}

.start-arrow {
    animation: arrowBounce 1.6s ease-in-out infinite;
}

@keyframes arrowBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(6px); }
}

@keyframes heroFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}

@keyframes taglineReveal {
    0% { opacity: 0; transform: translateY(38px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes ribbonShimmer {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.15); }
}

@keyframes glassShimmerRepeat {
    0%, 90% { transform: translateX(-60%); opacity: 0; }
    95% { opacity: 0.35; }
    100% { transform: translateX(60%); opacity: 0; }
}

@keyframes heroGlow {
    0%, 100% { filter: saturate(100%); }
    50% { filter: saturate(125%); }
}

@keyframes ribbonPulse {
    0%, 100% { transform: scaleX(1); opacity: 0.9; }
    50% { transform: scaleX(1.05); opacity: 1; }
}

@keyframes heroLogoPulse {
    0%, 100% { filter: drop-shadow(0 10px 24px rgba(10, 19, 36, 0.25)); }
    50% { filter: drop-shadow(0 16px 32px rgba(242, 106, 33, 0.35)); }
}

.trust-strip {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 18px;
    padding: 24px 16px 10px;
    color: var(--muted);
    font-weight: 600;
}

.trust-item {
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(10, 19, 36, 0.12);
}

.section-divider + .about-section {
    border-top: 1px solid rgba(23, 162, 164, 0.18);
}

.back-to-top {
    position: fixed;
    right: 18px;
    bottom: 86px;
    border: none;
    border-radius: 999px;
    padding: 10px 14px;
    background: rgba(255, 255, 255, 0.9);
    color: var(--ink-2);
    font-weight: 700;
    box-shadow: var(--shadow-soft);
    cursor: pointer;
    z-index: 1200;
    display: none;
}

.site-footer {
    text-align: center;
    padding: 18px 10px 28px;
    color: var(--muted);
    font-size: 0.85rem;
}

.admin-brand-stack {
    display: grid;
    justify-items: center;
    gap: 8px;
    margin: 6px 0 2px;
}

.admin-brand-title {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--muted);
    letter-spacing: 0.02em;
}

.admin-brand-logo {
    display: block;
    width: min(110px, 38vw);
    height: auto;
    max-height: 88px;
    object-fit: contain;
    margin: 4px auto 2px;
    border: none;
    border-radius: 0;
    background: transparent;
    box-shadow: none;
    filter: drop-shadow(0 4px 10px rgba(10, 19, 36, 0.12));
}

body.dark .admin-brand-title {
    color: #C6D3E5;
}

body.dark .admin-brand-logo {
    filter: drop-shadow(0 8px 18px rgba(0, 0, 0, 0.45));
}

@keyframes floatIn {
    0% { opacity: 0; transform: translateY(24px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Section Divider */
.section-divider {
    position: relative;
    height: 1px;
    background: linear-gradient(90deg, rgba(10, 19, 36, 0), rgba(10, 19, 36, 0.2), rgba(10, 19, 36, 0));
    margin: 36px auto;
    max-width: 860px;
}

.section-divider::after {
    content: attr(data-label);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 4px 12px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(10, 19, 36, 0.14);
    color: var(--muted);
    font-size: 0.78rem;
    letter-spacing: 0.4px;
    text-transform: uppercase;
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.08);
}

/* About */
.about-section {
    padding: 76px 0 46px;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(239, 243, 248, 0.95));
}

body.dark .about-section {
    background:
        radial-gradient(900px 420px at 14% 0%, rgba(242, 106, 33, 0.09), transparent 72%),
        radial-gradient(860px 400px at 86% 8%, rgba(23, 162, 164, 0.08), transparent 74%),
        linear-gradient(180deg, rgba(10, 16, 29, 0.96), rgba(14, 22, 38, 0.98));
}

body.dark .section-divider {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));
}

body.dark .section-divider::after {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
    color: var(--muted-darkmode);
}

.summary-panel {
    margin-bottom: 26px;
}

.summary-card {
    background: rgba(255, 255, 255, 0.82);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 20px 22px;
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(10px) saturate(140%);
    opacity: 0;
    transform: translateY(12px) scale(0.98);
    filter: blur(4px);
    transition: opacity 0.55s ease, transform 0.55s ease, filter 0.55s ease;
    position: relative;
    overflow: hidden;
}

.summary-card::before,
.about-card::before,
.service-item::before,
.registration-form-container::before,
.dbd-form-container::before {
    content: "";
    position: absolute;
    inset: -45% -60%;
    background: linear-gradient(120deg, transparent 25%, rgba(255, 255, 255, 0.24) 48%, transparent 70%);
    transform: translateX(-65%);
    transition: transform 0.7s ease;
    pointer-events: none;
    z-index: 0;
}

.summary-card > *,
.about-card > *,
.service-item > *,
.registration-form-container > *,
.dbd-form-container > * {
    position: relative;
    z-index: 1;
}

.summary-card.is-visible,
.about-card.is-visible,
.service-item.is-visible,
.registration-form-container.is-visible,
.dbd-form-container.is-visible,
.stats-section.is-visible,
.archives-panel.is-visible,
.assignment-card.is-visible,
.lead-panel.is-visible,
.lead-section.is-visible,
.target-card.is-visible,
.insight-card.is-visible {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
}

.summary-card:hover,
.summary-card:focus-within,
.about-card:hover,
.service-item:hover,
.registration-form-container:hover,
.dbd-form-container:hover,
.stats-section:hover,
.archives-panel:hover,
.team-card:hover,
.facility-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-1);
}

.summary-card:hover::before,
.about-card:hover::before,
.service-item:hover::before,
.registration-form-container:hover::before,
.dbd-form-container:hover::before {
    transform: translateX(65%);
}

.highlight-band {
    background: linear-gradient(135deg, rgba(23, 162, 164, 0.12), rgba(11, 46, 82, 0.08));
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 14px;
    padding: 14px 16px;
}

.summary-title {
    font-weight: 700;
    color: var(--ink-2);
    margin-bottom: 12px;
    letter-spacing: 0.2px;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;
}

.summary-item {
    background: rgba(239, 243, 248, 0.7);
    border: 1px solid rgba(10, 19, 36, 0.08);
    border-radius: 14px;
    padding: 12px 14px;
    text-align: center;
    backdrop-filter: blur(8px) saturate(140%);
}

.summary-value {
    display: block;
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--brand);
}

.summary-label {
    color: var(--muted);
    font-size: 0.9rem;
}

.about-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 22px;
    margin-bottom: 24px;
}

.about-card {
    background: rgba(255, 255, 255, 0.78);
    border-radius: 18px;
    padding: 28px;
    box-shadow: var(--shadow-2);
    border: 1px solid rgba(10, 19, 36, 0.1);
    backdrop-filter: blur(10px) saturate(140%);
    transition: transform 0.28s ease, box-shadow 0.28s ease;
    position: relative;
}

.about-card:hover,
.about-card:focus-within {
    transform: translateY(-6px);
    box-shadow: var(--shadow-1);
}

.about-card:hover::after,
.service-item:hover::after,
.target-card:hover::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    border: 1px solid rgba(255, 255, 255, 0.6);
    pointer-events: none;
}

.icon {
    color: var(--accent);
    margin-bottom: 12px;
    width: 40px;
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.icon svg {
    width: 100%;
    height: 100%;
}

.about-card h3 {
    color: var(--brand);
    margin-bottom: 10px;
    font-size: 1.32rem;
}

/* Services */
.services-section {
    margin: 36px 0 46px;
}

.services-section h2 {
    text-align: center;
    font-size: 2.05rem;
    color: var(--ink);
    margin-bottom: 28px;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 18px;
}

.service-item {
    background: rgba(255, 255, 255, 0.78);
    padding: 22px;
    border-radius: 16px;
    border: 1px solid rgba(10, 19, 36, 0.1);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(10px) saturate(140%);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    position: relative;
}

.service-item:hover,
.service-item:focus-within {
    transform: translateY(-4px);
    box-shadow: var(--shadow-1);
}

.service-item h4 {
    color: var(--brand);
    margin-bottom: 8px;
}

.target-card:hover,
.target-card:focus-within {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

/* CTA */
.cta-section {
    text-align: center;
    padding-bottom: 40px;
}

.jfa-register-btn {
    border: none;
    background: linear-gradient(135deg, var(--accent), #0D8F92);
    color: #FFFFFF;
    padding: 16px 46px;
    border-radius: 999px;
    font-size: 1.15rem;
    font-weight: 700;
    box-shadow: 0 14px 30px rgba(23, 162, 164, 0.55);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative;
    overflow: hidden;
    animation: ctaPulse 6s ease-in-out infinite;
}

.jfa-register-btn:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 18px 36px rgba(23, 162, 164, 0.45);
}

.jfa-register-btn::after {
    content: "";
    position: absolute;
    top: 0;
    left: -120%;
    width: 80%;
    height: 100%;
    background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.45), transparent);
    transform: skewX(-20deg);
    transition: left 0.6s ease;
}

.jfa-register-btn:hover::after {
    left: 140%;
}

.jfa-register-btn:hover {
    animation-play-state: paused;
}

@keyframes ctaPulse {
    0%, 100% { box-shadow: 0 14px 30px rgba(23, 162, 164, 0.5); transform: translateY(0); }
    50% { box-shadow: 0 20px 40px rgba(23, 162, 164, 0.75); transform: translateY(-1px); }
}

.jfa-register-btn:active,
.submit-btn:active,
.action-btn:active,
.back-btn:active {
    transform: translateY(1px) scale(0.99);
}

.jfa-register-btn:focus-visible,
.submit-btn:focus-visible,
.action-btn:focus-visible {
    outline: 2px solid var(--accent-2);
    outline-offset: 3px;
}

.btn-icon {
    font-size: 1.5rem;
    transition: transform 0.2s ease;
}

.jfa-register-btn:hover .btn-icon {
    transform: translateX(6px);
}

/* Headers */
.page-header {
    text-align: center;
    margin: 28px 0 26px;
}

.section-heading {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 0.82rem;
    letter-spacing: 0.35px;
    text-transform: uppercase;
    color: var(--muted);
    font-weight: 700;
    position: relative;
    padding-bottom: 8px;
    margin-bottom: 6px;
}

.section-heading::before {
    content: attr(data-icon);
    font-size: 1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: rgba(23, 162, 164, 0.16);
    color: var(--brand);
    animation: iconFloat 3s ease-in-out infinite;
}

.section-heading::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    width: 56px;
    height: 3px;
    border-radius: 999px;
    background: linear-gradient(90deg, rgba(23, 162, 164, 0.75), rgba(11, 46, 82, 0.2));
}

h2.section-heading {
    font-size: 1.35rem;
    text-transform: none;
    color: var(--ink);
    margin-bottom: 14px;
}

body.dark h2.section-heading {
    color: var(--text-darkmode);
}

@keyframes iconFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
}

.page-header h1 {
    font-size: 2.05rem;
    color: var(--ink);
}

.page-subtitle {
    color: var(--muted);
}

.scope-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.15);
    background: rgba(10, 19, 36, 0.06);
    font-size: 0.9rem;
    font-weight: 600;
}

.scope-badge.admin {
    background: rgba(242, 106, 33, 0.12);
    border-color: rgba(242, 106, 33, 0.3);
    color: #C85A12;
}

.scope-badge.team {
    background: rgba(23, 162, 164, 0.12);
    border-color: rgba(23, 162, 164, 0.35);
    color: #0D7F7A;
}

.scope-badge.personal {
    background: rgba(11, 46, 82, 0.12);
    border-color: rgba(11, 46, 82, 0.35);
    color: #0B2E52;
}

body.dark .scope-badge {
    border-color: var(--line-darkmode);
    background: rgba(255, 255, 255, 0.06);
    color: var(--text-darkmode);
}

body.dark .scope-badge.admin {
    background: rgba(242, 106, 33, 0.2);
    border-color: rgba(242, 106, 33, 0.45);
    color: #F4B57F;
}

body.dark .scope-badge.team {
    background: rgba(23, 162, 164, 0.2);
    border-color: rgba(23, 162, 164, 0.45);
    color: #87E4E0;
}

body.dark .scope-badge.personal {
    background: rgba(11, 46, 82, 0.3);
    border-color: rgba(11, 46, 82, 0.5);
    color: #BBD0E8;
}

.reset-time-control {
    margin-top: 12px;
    display: inline-flex;
    gap: 10px;
    align-items: center;
    padding: 8px 12px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(10, 19, 36, 0.12);
}

.reset-time-control label {
    font-weight: 600;
    color: var(--ink-2);
}

.reset-time-control input {
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 8px;
    padding: 6px 8px;
}

.back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.8);
    color: var(--ink-2);
    padding: 8px 14px;
    border-radius: 999px;
    font-weight: 600;
    cursor: pointer;
    margin-bottom: 12px;
    backdrop-filter: blur(8px) saturate(140%);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.back-btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-soft);
    border-color: rgba(10, 19, 36, 0.2);
}

.back-btn:focus-visible {
    outline: 2px solid var(--accent-2);
    outline-offset: 2px;
}

button,
.action-btn,
.submit-btn,
.back-btn {
    min-height: 44px;
    position: relative;
    overflow: hidden;
    isolation: isolate;
}

.logo-button {
    isolation: auto;
}

button:focus-visible,
.action-btn:focus-visible,
.submit-btn:focus-visible,
.back-btn:focus-visible {
    outline: 2px solid var(--accent-2);
    outline-offset: 3px;
}

.status-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: 10px;
    padding: 5px 10px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.4px;
}

.chip-ok {
    background: rgba(23, 162, 164, 0.16);
    color: #0D7F7A;
}

.chip-warn {
    background: rgba(246, 193, 78, 0.2);
    color: #B97300;
}

.chip-danger {
    background: rgba(231, 76, 60, 0.16);
    color: #B44438;
}

/* Forms */
.registration-form-container,
.dbd-form-container {
    max-width: 720px;
    margin: 0 auto 60px;
    background: rgba(255, 255, 255, 0.82);
    padding: 34px;
    border-radius: 18px;
    box-shadow: var(--shadow-1);
    border: 1px solid rgba(10, 19, 36, 0.12);
    backdrop-filter: blur(12px) saturate(140%);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.resume-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 14px;
    padding: 14px 16px;
    box-shadow: var(--shadow-soft);
    margin-bottom: 18px;
    backdrop-filter: blur(10px) saturate(140%);
}

.input-hint {
    display: block;
    margin-top: 6px;
    color: var(--muted);
    font-size: 0.78rem;
}

.facility-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 6px 0 8px;
}

.legend-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    font-size: 0.72rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.35px;
}

.chip-muted {
    background: rgba(10, 19, 36, 0.12);
    color: var(--ink-2);
}

body.dark .chip-muted {
    background: rgba(255, 255, 255, 0.12);
    color: var(--text-darkmode);
}

.registration-form-container:focus-within,
.dbd-form-container:focus-within {
    transform: translateY(-4px);
    box-shadow: 0 18px 34px rgba(10, 19, 36, 0.2);
}

.form-group {
    margin-bottom: 20px;
    transition: transform 0.2s ease;
}

.form-group:focus-within {
    transform: translateY(-2px);
}

.form-group label {
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
}

.field-error {
    margin-top: 6px;
    font-size: 0.88rem;
    color: #C0392B;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 13px 16px;
    border-radius: 12px;
    border: 1.5px solid rgba(10, 19, 36, 0.15);
    font-size: 1rem;
    background: #FFFFFF;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: rgba(10, 19, 36, 0.45);
}

body.dark .form-group input::placeholder,
body.dark .form-group textarea::placeholder {
    color: rgba(230, 236, 243, 0.55);
}

#facilityFilter {
    margin-bottom: 0;
}

.facility-filter-row {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
}

.form-group .facility-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    color: var(--ink-2);
    margin-bottom: 0;
}

.form-group .facility-checkbox input {
    accent-color: var(--accent);
    margin: 0;
    width: auto;
    flex: 0 0 auto;
}

body.dark .facility-checkbox {
    color: var(--text-darkmode);
}

.filter-count {
    font-size: 0.85rem;
    color: var(--muted);
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 999px;
    padding: 4px 10px;
    white-space: nowrap;
}

#showMoreFacilities {
    margin-top: 8px;
}

.auto-assign-card {
    background: rgba(255, 255, 255, 0.82);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 12px 14px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    color: var(--ink-2);
}

.available-today {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.available-today-actions {
    margin-top: 8px;
}

.available-chip {
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 0.8rem;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(23, 162, 164, 0.12);
    color: #0D7F7A;
    cursor: pointer;
}

.available-chip:hover {
    background: rgba(23, 162, 164, 0.2);
}

body.dark .available-chip {
    border-color: rgba(255, 255, 255, 0.16);
    color: #87E4E0;
}

.auto-assign-card small {
    color: var(--muted);
}
#customFacilityFields input {
    margin-bottom: 8px;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 4px var(--ring);
    transform: translateY(-1px);
}

.form-group input:focus-visible,
.form-group select:focus-visible,
.form-group textarea:focus-visible {
    outline: 2px solid var(--accent-2);
    outline-offset: 2px;
}

.radio-group {
    display: grid;
    gap: 12px;
}

.radio-option {
    display: grid;
    grid-template-columns: 24px 1fr;
    gap: 14px;
    align-items: center;
    padding: 14px;
    border-radius: 14px;
    background: rgba(239, 243, 248, 0.7);
    border: 1px solid rgba(10, 19, 36, 0.12);
    cursor: pointer;
    backdrop-filter: blur(8px) saturate(140%);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
}

.radio-option:hover,
.radio-option:focus-within {
    border-color: rgba(23, 162, 164, 0.4);
    box-shadow: 0 10px 20px rgba(10, 19, 36, 0.12);
    transform: translateY(-2px);
}

.radio-option input[type="radio"] {
    width: 20px;
    height: 20px;
    accent-color: var(--accent);
}

.radio-option.inline-check {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.radio-label strong {
    display: block;
}

.radio-label small {
    color: var(--muted);
}

.submit-btn {
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), #0D8F92);
    color: #FFFFFF;
    font-size: 1.05rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.submit-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 22px rgba(11, 46, 82, 0.32);
}

/* Assignment */
.assignment-reveal {
    max-width: 820px;
    margin: 0 auto 60px;
}

.reveal-header {
    text-align: center;
    margin-bottom: 22px;
}

.reveal-header h1 {
    font-size: 2.3rem;
}

.assignment-card {
    background: linear-gradient(135deg, #0B2E52 0%, #103B6B 100%);
    border-radius: 22px;
    padding: 34px;
    color: #FFFFFF;
    box-shadow: var(--shadow-1);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.assignment-card:hover,
.assignment-card:focus-within {
    transform: translateY(-4px);
    box-shadow: 0 18px 38px rgba(11, 46, 82, 0.32);
}

.assignment-badge {
    display: inline-block;
    background: rgba(255, 255, 255, 0.18);
    padding: 8px 16px;
    border-radius: 999px;
    letter-spacing: 1px;
    font-size: 0.78rem;
    margin-bottom: 16px;
}

.facility-reveal-name {
    font-size: 2.05rem;
    margin-bottom: 18px;
}

.facility-details {
    background: rgba(255, 255, 255, 0.12);
    padding: 18px 20px;
    border-radius: 14px;
    margin-bottom: 22px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.18);
}

.detail-item:last-child {
    border-bottom: none;
}

.action-btn {
    border: none;
    border-radius: 999px;
    padding: 12px 32px;
    background: linear-gradient(135deg, var(--accent), #D85A19);
    color: #FFFFFF;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}

.action-btn::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(255, 255, 255, 0.25), transparent 55%);
    opacity: 0;
    transition: opacity 0.2s ease;
    z-index: 0;
}

.action-btn::after {
    content: "";
    margin-left: 8px;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 700;
}

.action-btn.secondary::after {
    color: rgba(10, 19, 36, 0.4);
}

.action-btn:hover {
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 14px 26px rgba(242, 106, 33, 0.35);
    filter: brightness(1.03);
}

.action-btn:hover::before {
    opacity: 1;
}

.btn-press {
    animation: btnPress 0.18s ease;
}

.btn-ripple::before {
    content: "";
    position: absolute;
    left: var(--ripple-x, 50%);
    top: var(--ripple-y, 50%);
    width: 6px;
    height: 6px;
    border-radius: 999px;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.45);
    pointer-events: none;
    z-index: 0;
    animation: btnRipple 0.36s ease-out forwards;
}

/* Subtle click feedback across button controls */
button:active,
.action-btn:active,
.submit-btn:active,
.back-btn:active,
.jfa-register-btn:active,
.sidebar-toggle:active,
.sidebar-settings-btn:active,
.sidebar-signout-btn:active,
.menu-fab:active,
.nav-notification-btn:active,
.copy-btn:active,
.link-btn:active {
    transform: translateY(0.5px) scale(0.996) !important;
    filter: brightness(0.985);
}

.btn-press,
.btn-ripple::before {
    animation: none !important;
}

button > *,
.action-btn > *,
.submit-btn > *,
.back-btn > * {
    position: relative;
    z-index: 1;
}

@keyframes btnPress {
    0% { transform: scale(1); }
    50% { transform: scale(0.96); }
    100% { transform: scale(1); }
}

@keyframes btnRipple {
    0% { opacity: 0.45; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(32); }
}

.action-btn.secondary {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(243, 246, 251, 0.95));
    color: var(--ink-2);
    border: 1px solid rgba(10, 19, 36, 0.14);
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.08);
}

.action-btn.secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 22px rgba(10, 19, 36, 0.12);
    border-color: rgba(242, 106, 33, 0.35);
}

/* DBD */
.current-facility-info {
    background: rgba(11, 46, 82, 0.08);
    padding: 18px;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 20px;
}

.highlight-text {
    color: var(--accent);
    font-weight: 700;
    font-size: 1.15rem;
}

/* Stats */
.stats-dashboard {
    display: grid;
    gap: 22px;
}

.stats-section {
    background: rgba(255, 255, 255, 0.82);
    padding: 24px;
    border-radius: 18px;
    box-shadow: var(--shadow-2);
    border: 1px solid rgba(10, 19, 36, 0.12);
    backdrop-filter: blur(12px) saturate(140%);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.stats-section + .stats-section {
    border-top: 1px solid rgba(242, 106, 33, 0.12);
    padding-top: 28px;
}

.stats-section:hover,
.stats-section:focus-within {
    transform: translateY(-4px);
    box-shadow: var(--shadow-1);
}

.stats-section h2 {
    margin-bottom: 14px;
}

.leaderboard-card {
    background: linear-gradient(135deg, #1AA7A1 0%, #3CCFC7 100%);
    color: #FFFFFF;
    padding: 22px;
    border-radius: 16px;
    text-align: center;
}

.team-stats,
.facility-stats {
    display: grid;
    gap: 12px;
}

.coverage-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.coverage-chip {
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(23, 162, 164, 0.12);
    border: 1px solid rgba(23, 162, 164, 0.22);
    font-weight: 600;
    font-size: 0.82rem;
}

.alert-panel {
    display: grid;
    gap: 10px;
}

.alert-item {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 10px 12px;
}

.alert-item strong {
    color: var(--ink-2);
}

.heatmap-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
}

.heatmap-cell {
    padding: 10px 12px;
    border-radius: 12px;
    background: rgba(10, 19, 36, 0.06);
    border: 1px solid rgba(10, 19, 36, 0.12);
    font-weight: 600;
}

.forecast-list {
    display: grid;
    gap: 10px;
}

.forecast-item {
    padding: 10px 12px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
}

.audit-log {
    display: grid;
    gap: 8px;
}

.audit-item {
    font-size: 0.85rem;
    color: var(--muted);
}

.attendance-panel {
    display: grid;
    gap: 10px;
}

.attendance-table {
    width: 100%;
    border-collapse: collapse;
}

.attendance-table th,
.attendance-table td {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(10, 19, 36, 0.12);
    text-align: left;
}

.attendance-table th {
    background: rgba(10, 19, 36, 0.06);
    color: var(--ink-2);
}

.attendance-badge {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(10, 19, 36, 0.04);
}

.stats-controls {
    display: grid;
    gap: 12px;
    margin-top: 12px;
}

.stats-search input {
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.9);
}

.range-export {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr auto;
    gap: 10px;
    align-items: center;
}

.range-export select,
.range-export input {
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.9);
}

.stats-export {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.toggle-row {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    color: var(--ink-2);
}

.switch {
    position: relative;
    display: inline-block;
    width: 46px;
    height: 26px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: rgba(10, 19, 36, 0.2);
    transition: 0.2s ease;
    border-radius: 999px;
}

.slider::before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    top: 3px;
    background: #FFFFFF;
    transition: 0.2s ease;
    border-radius: 50%;
}

.switch input:checked + .slider {
    background: rgba(23, 162, 164, 0.8);
}

.switch input:checked + .slider::before {
    transform: translateX(20px);
}

.team-trend {
    display: grid;
    gap: 12px;
}

.trend-row {
    display: grid;
    grid-template-columns: 160px 1fr;
    gap: 14px;
    align-items: center;
}

.trend-label {
    font-weight: 600;
    color: var(--ink-2);
}

.trend-bars {
    display: flex;
    gap: 6px;
    align-items: flex-end;
    height: 46px;
}

.trend-bar {
    width: 16px;
    border-radius: 6px 6px 3px 3px;
    background: linear-gradient(180deg, rgba(23, 162, 164, 0.9), rgba(11, 46, 82, 0.6));
    box-shadow: 0 6px 14px rgba(11, 46, 82, 0.18);
}

.trend-axis {
    display: flex;
    gap: 6px;
    margin-left: 174px;
    color: var(--muted);
    font-size: 0.74rem;
}

body.dark .trend-label {
    color: var(--text-darkmode);
}

.team-card,
.facility-card {
    background: rgba(239, 243, 248, 0.65);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
    padding: 16px;
    border-radius: 12px;
    border-left: 4px solid var(--brand);
    backdrop-filter: blur(8px) saturate(140%);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.rankings-table {
    max-height: 420px;
    overflow: auto;
}

.rankings-table table thead th {
    position: sticky;
    top: 0;
    z-index: 1;
}

.rankings-table table tbody tr:nth-child(even) {
    background: rgba(12, 46, 82, 0.035);
}

.rankings-table table tbody tr:nth-child(-n+3) {
    background: rgba(26, 167, 161, 0.08);
}

.rankings-table table tbody tr:nth-child(-n+3) td:first-child {
    font-weight: 700;
}

.skeleton {
    position: relative;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.6);
}

.skeleton::after {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    animation: skeleton 1.2s infinite;
}

@keyframes skeleton {
    100% { transform: translateX(100%); }
}

.page.page-loading .stats-section,
.page.page-loading .about-card,
.page.page-loading .service-item,
.page.page-loading .registration-form-container,
.page.page-loading .dbd-form-container {
    position: relative;
    overflow: hidden;
}

.page.page-loading .stats-section::before,
.page.page-loading .about-card::before,
.page.page-loading .service-item::before,
.page.page-loading .registration-form-container::before,
.page.page-loading .dbd-form-container::before {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    animation: skeleton 1.2s infinite;
    pointer-events: none;
}

.btn-text {
    position: relative;
}

.btn-text::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: -6px;
    height: 2px;
    background: rgba(255, 255, 255, 0.7);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
}

.jfa-register-btn:hover .btn-text::after {
    transform: scaleX(1);
}

.targets-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 14px;
}

.target-card {
    background: rgba(255, 255, 255, 0.82);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 14px;
    padding: 16px;
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(10px) saturate(140%);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative;
}

.target-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.target-title {
    font-weight: 700;
    color: var(--ink-2);
    margin-bottom: 6px;
}

.target-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--brand);
    margin-bottom: 6px;
}

.target-bar {
    height: 8px;
    background: rgba(10, 19, 36, 0.08);
    border-radius: 999px;
    overflow: hidden;
    margin: 6px 0;
}

.target-bar-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #F39C12, #F1C40F);
    transition: width 0.4s ease;
}

.target-bar-fill.is-ontrack {
    background: linear-gradient(90deg, #1ABC9C, #16A085);
}

.target-bar-fill.is-behind {
    background: linear-gradient(90deg, #F39C12, #F1C40F);
}

.target-bar-fill.is-critical {
    background: linear-gradient(90deg, #E67E22, #E74C3C);
}

.target-hint {
    font-size: 0.85rem;
    color: var(--muted);
    margin-bottom: 6px;
}

.target-note {
    font-size: 0.85rem;
    color: #a34b10;
    margin-bottom: 8px;
}

body.dark .target-note {
    color: #f1b27a;
}

.target-tooltips {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 14px;
}

.tooltip {
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid rgba(10, 19, 36, 0.12);
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 0.82rem;
    color: var(--muted);
}

.mini-table table {
    width: 100%;
    border-collapse: collapse;
}

.mini-table {
    border: 1px solid rgba(10, 19, 36, 0.1);
    border-radius: 12px;
    overflow: auto;
    background: rgba(255, 255, 255, 0.84);
}

.mini-table th,
.mini-table td {
    padding: 8px;
    border-bottom: 1px solid rgba(10, 19, 36, 0.08);
    text-align: left;
    font-size: 0.92rem;
}

.mini-table th {
    color: var(--muted);
    font-weight: 600;
    position: sticky;
    top: 0;
    background: rgba(246, 249, 253, 0.96);
    z-index: 1;
}

.mini-table tr:nth-child(even) {
    background: rgba(12, 46, 82, 0.035);
}

.mini-table tr:hover td {
    background: rgba(23, 162, 164, 0.08);
}

body.dark .mini-table tr:hover td {
    background: rgba(23, 162, 164, 0.14);
}

.leaderboard-block {
    margin-top: 14px;
}

.leaderboard-title {
    font-weight: 700;
    color: var(--ink-2);
    margin: 8px 0 10px;
}

.top-team-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(10, 19, 36, 0.12);
    padding: 6px 12px;
    border-radius: 999px;
    font-weight: 600;
    color: var(--ink-2);
    margin-bottom: 12px;
}

.top-badges {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.target-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 3px 8px;
    border-radius: 999px;
    font-size: 0.78rem;
    font-weight: 600;
    margin-left: 6px;
}

.target-badge.met {
    background: rgba(26, 167, 161, 0.18);
    color: #0D7F7A;
}

.target-badge.missed {
    background: rgba(231, 76, 60, 0.12);
    color: #C0392B;
}

.stats-section {
    position: relative;
}

.stats-section::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 18px;
    background-image: radial-gradient(rgba(10, 19, 36, 0.06) 1px, transparent 1px);
    background-size: 22px 22px;
    opacity: 0.25;
    pointer-events: none;
}

.stats-section::after {
    content: "";
    position: absolute;
    inset: 8px;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.5);
    pointer-events: none;
}

.stats-section > * {
    position: relative;
    z-index: 1;
}

.status-pill {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    margin-left: 6px;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    color: #0D7F7A;
    background: rgba(26, 167, 161, 0.15);
    border: 1px solid rgba(26, 167, 161, 0.25);
}

.status-pill[data-last-saved]::after {
    content: " " attr(data-last-saved);
    margin-left: 8px;
    font-size: 0.7rem;
    color: inherit;
    opacity: 0.7;
}

/* Dashboard Theme Pass */
#stats-page .stats-dashboard {
    gap: 18px;
}

#stats-page .stats-section {
    background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(247, 250, 255, 0.86));
    border: 1px solid rgba(10, 19, 36, 0.1);
    box-shadow: 0 14px 28px rgba(10, 19, 36, 0.1);
}

#stats-page .stats-section::before {
    opacity: 0.14;
}

#stats-page .stats-section::after {
    inset: 10px;
    border-color: rgba(255, 255, 255, 0.58);
}

#stats-page .stats-section h2.section-heading {
    margin-bottom: 16px;
}

#stats-page .targets-grid {
    gap: 12px;
}

#stats-page .target-card {
    border-radius: 16px;
    border: 1px solid rgba(10, 19, 36, 0.1);
    box-shadow: 0 10px 20px rgba(10, 19, 36, 0.08);
}

#stats-page .target-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 16px 28px rgba(10, 19, 36, 0.14);
}

#stats-page .target-value {
    font-size: 1.65rem;
    letter-spacing: -0.01em;
}

#stats-page .target-bar {
    height: 9px;
}

#stats-page .target-bar-fill {
    position: relative;
}

#stats-page .target-bar-fill::after {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
        -45deg,
        rgba(255, 255, 255, 0.18) 0,
        rgba(255, 255, 255, 0.18) 8px,
        rgba(255, 255, 255, 0.02) 8px,
        rgba(255, 255, 255, 0.02) 16px
    );
    opacity: 0.6;
}

#stats-page .top-team-badge {
    border-color: rgba(242, 106, 33, 0.24);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.86), rgba(255, 246, 239, 0.86));
}

#stats-page .mini-table,
#stats-page .rankings-table {
    border: 1px solid rgba(10, 19, 36, 0.08);
    border-radius: 12px;
    overflow: auto;
    background: rgba(255, 255, 255, 0.74);
}

#stats-page .mini-table th,
#stats-page .rankings-table th {
    position: sticky;
    top: 0;
    z-index: 2;
    background: linear-gradient(180deg, rgba(237, 243, 252, 0.98), rgba(228, 236, 248, 0.95));
    border-bottom: 1px solid rgba(10, 19, 36, 0.14);
}

#stats-page .mini-table tr:hover td,
#stats-page .rankings-table tr:hover td {
    background: rgba(242, 106, 33, 0.06);
}

#stats-page .team-card,
#stats-page .facility-card,
#stats-page .alert-item,
#stats-page .forecast-item,
#stats-page .heatmap-cell {
    border-radius: 14px;
    border: 1px solid rgba(10, 19, 36, 0.1);
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.06);
}

#stats-page .coverage-chip {
    border-color: rgba(242, 106, 33, 0.24);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 246, 239, 0.84));
}

#stats-page .status-pill {
    background: rgba(242, 106, 33, 0.14);
    border-color: rgba(242, 106, 33, 0.3);
    color: #C85A12;
}

body.dark #stats-page .stats-section {
    background: linear-gradient(180deg, rgba(12, 20, 36, 0.9), rgba(10, 18, 34, 0.9));
    border-color: rgba(255, 255, 255, 0.09);
    box-shadow: 0 16px 28px rgba(0, 0, 0, 0.34);
}

body.dark #stats-page .mini-table,
body.dark #stats-page .rankings-table {
    background: rgba(10, 18, 34, 0.82);
    border-color: rgba(255, 255, 255, 0.1);
}

body.dark #stats-page .mini-table th,
body.dark #stats-page .rankings-table th {
    background: linear-gradient(180deg, rgba(18, 30, 52, 0.95), rgba(12, 22, 40, 0.95));
    border-bottom-color: rgba(255, 255, 255, 0.12);
}

body.dark #stats-page .mini-table tr:hover td,
body.dark #stats-page .rankings-table tr:hover td {
    background: rgba(242, 106, 33, 0.12);
}

body.dark #stats-page .coverage-chip {
    border-color: rgba(242, 106, 33, 0.34);
    background: linear-gradient(135deg, rgba(18, 29, 49, 0.9), rgba(32, 23, 17, 0.86));
}

body.dark #stats-page .status-pill {
    background: rgba(242, 106, 33, 0.2);
    border-color: rgba(242, 106, 33, 0.4);
    color: #FFBD8D;
}

/* Dashboard text safety: keep all labels readable in both themes */
#stats-page,
#stats-page .stats-section,
#stats-page .target-card,
#stats-page .leaderboard-card,
#stats-page .mini-table,
#stats-page .rankings-table {
    color: var(--text-strong-light);
}

#stats-page .page-subtitle,
#stats-page .target-sub,
#stats-page .target-note,
#stats-page .target-hint,
#stats-page .leaderboard-title,
#stats-page .hero-assist {
    color: var(--text-muted-light);
}

#stats-page .mini-table td,
#stats-page .mini-table th,
#stats-page .rankings-table td,
#stats-page .rankings-table th,
#stats-page .mini-table td *,
#stats-page .rankings-table td * {
    color: var(--text-strong-light);
}

body.dark #stats-page,
body.dark #stats-page .stats-section,
body.dark #stats-page .target-card,
body.dark #stats-page .leaderboard-card,
body.dark #stats-page .mini-table,
body.dark #stats-page .rankings-table,
body.dark #stats-page .target-title,
body.dark #stats-page .target-value,
body.dark #stats-page .section-heading,
body.dark #stats-page h1,
body.dark #stats-page h2,
body.dark #stats-page h3,
body.dark #stats-page h4 {
    color: var(--text-strong-dark) !important;
}

body.dark #stats-page .page-subtitle,
body.dark #stats-page .target-sub,
body.dark #stats-page .target-note,
body.dark #stats-page .target-hint,
body.dark #stats-page .leaderboard-title {
    color: var(--text-muted-dark) !important;
}

body.dark #stats-page .mini-table td,
body.dark #stats-page .mini-table th,
body.dark #stats-page .rankings-table td,
body.dark #stats-page .rankings-table th,
body.dark #stats-page .mini-table td *,
body.dark #stats-page .rankings-table td * {
    color: var(--text-strong-dark) !important;
}

.target-sub {
    color: var(--muted);
    font-size: 0.92rem;
}

.team-card:hover,
.facility-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.rankings-table table {
    width: 100%;
    border-collapse: collapse;
}

.rankings-table th,
.rankings-table td {
    padding: 12px;
    border-bottom: 1px solid rgba(10, 19, 36, 0.1);
}

.rankings-table th {
    background: var(--brand);
    color: #FFFFFF;
}

.rankings-table tr:hover {
    background: rgba(11, 46, 82, 0.06);
}

.rank-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.85rem;
}

.rank-1 { background: #B6E8E2; color: #0A1324; }
.rank-2 { background: #DDE5F0; color: #0A1324; }
.rank-3 { background: #A7C7E7; color: #0A1324; }

.no-data {
    text-align: center;
    color: var(--muted);
    padding: 18px;
}

.stats-actions {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
    margin: 24px 0 60px;
}

.complete-day-panel {
    margin: 20px auto 60px;
    padding: 22px;
    border-radius: 18px;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
    box-shadow: var(--shadow-2);
    backdrop-filter: blur(12px) saturate(140%);
}

.complete-summary {
    display: grid;
    gap: 10px;
    margin: 10px 0 16px;
}

.complete-graph {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(12px, 1fr));
    gap: 6px;
    align-items: end;
    height: 120px;
    background: rgba(10, 19, 36, 0.04);
    border-radius: 14px;
    padding: 12px;
    margin-bottom: 18px;
}

.complete-bar {
    width: 100%;
    border-radius: 8px 8px 4px 4px;
    background: linear-gradient(180deg, rgba(23, 162, 164, 0.9), rgba(11, 46, 82, 0.6));
}

.complete-calendar {
    margin-bottom: 18px;
}

.calendar-header {
    font-weight: 700;
    margin-bottom: 8px;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
}

.calendar-day {
    aspect-ratio: 1 / 1;
    border-radius: 10px;
    background: rgba(10, 19, 36, 0.06);
    display: grid;
    place-items: center;
    font-size: 0.8rem;
    font-weight: 600;
}

.calendar-day.present { background: rgba(23, 162, 164, 0.18); }
.calendar-day.content { background: rgba(246, 193, 78, 0.2); }
.calendar-day.not-productive { background: rgba(231, 76, 60, 0.18); }
.calendar-day.most { outline: 2px solid rgba(23, 162, 164, 0.8); }
.calendar-day.least { outline: 2px solid rgba(231, 76, 60, 0.6); }
.calendar-day.absent { background: rgba(10, 19, 36, 0.04); color: var(--muted); }
.calendar-day.weekend { background: rgba(10, 19, 36, 0.08); color: var(--muted); }

.complete-message {
    font-weight: 700;
    color: var(--ink-2);
}

body.dark .complete-day-panel {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .calendar-day {
    background: rgba(255, 255, 255, 0.05);
}

/* Archives */
.archives-panel {
    background: rgba(255, 255, 255, 0.82);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 22px;
    box-shadow: var(--shadow-2);
    backdrop-filter: blur(12px) saturate(140%);
    position: relative;
}

.archives-panel::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 18px;
    background-image: radial-gradient(rgba(10, 19, 36, 0.05) 1px, transparent 1px);
    background-size: 22px 22px;
    opacity: 0.2;
    pointer-events: none;
}

.archives-panel > * {
    position: relative;
    z-index: 1;
}

.archives-controls {
    display: grid;
    gap: 10px;
    grid-template-columns: 1fr auto;
    align-items: end;
    margin-bottom: 16px;
}

.archives-controls label {
    font-weight: 600;
    color: var(--ink-2);
}

.archives-controls select {
    width: 100%;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1.5px solid rgba(10, 19, 36, 0.15);
    background: #FFFFFF;
}

.archives-summary {
    margin-bottom: 18px;
}

/* Toasts */
.toast-container {
    position: fixed;
    right: 20px;
    bottom: 20px;
    display: grid;
    gap: 10px;
    z-index: 1200;
}

.confetti-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 1400;
}

.confetti {
    position: absolute;
    width: 8px;
    height: 12px;
    background: var(--accent);
    opacity: 0.9;
    animation: confettiFall 1.8s ease forwards;
}

.hero-list-body {
    display: grid;
    gap: 10px;
    max-height: 50vh;
    overflow: auto;
    padding-right: 4px;
}

.hero-list-search {
    width: 100%;
    margin: 8px 0 10px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.9);
}

.hero-list-search:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 4px var(--ring);
}

body.dark .hero-list-search {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

.hero-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: rgba(255, 255, 255, 0.85);
}

.hero-list-item strong {
    color: var(--ink-2);
}

.hero-list-item span {
    color: var(--muted);
    font-weight: 600;
}

.hero-jfa-body {
    display: grid;
    gap: 10px;
}

.hero-jfa-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
}

.hero-jfa-card {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 10px 12px;
}

.hero-jfa-card strong {
    display: block;
    color: var(--ink-2);
    font-size: 1rem;
}

.hero-jfa-card span {
    color: var(--muted);
    font-size: 0.8rem;
}

body.dark .hero-jfa-card {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

.hero-mark {
    background: rgba(23, 162, 164, 0.2);
    color: inherit;
    border-radius: 6px;
    padding: 1px 3px;
}

body.dark .hero-list-item {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .hero-jfa-card {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .hero-jfa-card strong,
body.dark .hero-jfa-card span,
body.dark .complete-message,
body.dark .calendar-header {
    color: var(--text-darkmode);
}

body.dark .stats-search input {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .alert-item {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .coverage-chip {
    border-color: rgba(23, 162, 164, 0.4);
}

body.dark .complete-day-panel {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .calendar-day {
    color: var(--text-darkmode);
}

body.dark .calendar-day.absent,
body.dark .calendar-day.weekend {
    color: var(--muted-darkmode);
}

body.dark .toggle-row {
    color: var(--text-darkmode);
}

body.dark .range-export select,
body.dark .range-export input {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .heatmap-cell,
body.dark .forecast-item {
    color: var(--text-darkmode);
}

body.dark .range-export select,
body.dark .range-export input {
    background: rgba(14, 22, 38, 0.9);
    color: var(--text-darkmode);
    border-color: var(--line-darkmode);
}

body.dark .heatmap-cell,
body.dark .forecast-item {
    background: rgba(14, 22, 38, 0.9);
    border-color: var(--line-darkmode);
}

body.dark .audit-item {
    color: var(--muted-darkmode);
}

@keyframes confettiFall {
    0% { transform: translateY(-10vh) rotate(0deg); opacity: 0.9; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

@keyframes quickActionsTogglePulse {
    0% { transform: scale(1); }
    50% { transform: scale(0.96); }
    100% { transform: scale(1); }
}

@keyframes quickActionsMenuIn {
    0% { opacity: 0; transform: translateY(8px) scale(0.96); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

.quick-actions {
    position: fixed;
    right: 16px;
    bottom: 16px;
    z-index: 1300;
    display: none;
    flex-direction: column;
    gap: 10px;
}

.quick-actions-toggle {
    border: none;
    border-radius: 999px;
    padding: 12px 16px;
    background: linear-gradient(135deg, var(--accent), #D85A19);
    color: #FFFFFF;
    font-weight: 700;
    box-shadow: 0 10px 24px rgba(242, 106, 33, 0.3);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.quick-actions-toggle.is-clicked {
    animation: quickActionsTogglePulse 220ms var(--ease-out);
}

.quick-actions-toggle:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 22px rgba(242, 106, 33, 0.25);
}

.quick-actions-menu {
    display: none;
    flex-direction: column;
    gap: 8px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 12px;
    padding: 10px;
    box-shadow: var(--shadow-2);
    backdrop-filter: blur(12px) saturate(140%);
}

.quick-actions-menu.is-open {
    display: flex;
    transform-origin: bottom right;
    animation: quickActionsMenuIn 220ms var(--ease-out);
}

.quick-actions-menu button {
    border: none;
    background: transparent;
    padding: 8px 10px;
    text-align: left;
    font-weight: 600;
    color: var(--ink-2);
    cursor: pointer;
}

.quick-actions-menu button:hover {
    color: var(--brand);
}

.quick-actions-menu button:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.45);
    outline-offset: 2px;
    border-radius: 8px;
}

.toast {
    min-width: 240px;
    max-width: 320px;
    background: rgba(255, 255, 255, 0.92);
    color: var(--ink);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-left: 4px solid var(--accent);
    padding: 12px 14px;
    border-radius: 12px;
    box-shadow: var(--shadow-2);
    backdrop-filter: blur(10px) saturate(140%);
    animation: toastIn 0.35s ease;
}

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(10, 19, 36, 0.35);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    z-index: 1300;
}

.modal-overlay.is-open {
    display: flex;
}

#policy-modal.modal-overlay {
    z-index: 3205;
}

#forgot-password-modal.modal-overlay,
#reset-password-modal.modal-overlay {
    z-index: 3206;
}

#notification-clear-confirm-modal.modal-overlay {
    z-index: 3300;
}

#app-confirm-modal.modal-overlay {
    z-index: 3350;
}

#shortcuts-modal.modal-overlay {
    z-index: 3360;
}

.modal-overlay.is-contextual {
    align-items: flex-start;
    justify-content: flex-start;
}

.modal-card {
    width: min(520px, 90vw);
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(10, 19, 36, 0.12);
    border-radius: 18px;
    padding: 20px 22px;
    box-shadow: var(--shadow-1);
    backdrop-filter: blur(12px) saturate(140%);
    animation: menuCardIn 0.28s cubic-bezier(0.22, 1, 0.36, 1);
}

.page-transition-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1500;
    opacity: 0;
    background:
        radial-gradient(260px 220px at 18% 38%, rgba(242, 106, 33, 0.25), rgba(242, 106, 33, 0)),
        radial-gradient(320px 280px at 78% 30%, rgba(23, 162, 164, 0.22), rgba(23, 162, 164, 0)),
        linear-gradient(120deg, rgba(9, 16, 30, 0.86), rgba(9, 16, 30, 0.68));
    transform: scale(1.03);
}

.page-transition-overlay.is-active {
    animation: cinematicWipe 620ms cubic-bezier(0.22, 1, 0.36, 1);
}

@keyframes cinematicWipe {
    0% {
        opacity: 0;
        transform: scale(1.03);
    }
    30% {
        opacity: 0.92;
        transform: scale(1);
    }
    70% {
        opacity: 0.85;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.995);
    }
}

.modal-card h3 {
    margin-bottom: 10px;
    color: var(--ink);
}

.modal-card p {
    color: var(--muted);
    margin-bottom: 16px;
}

.modal-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

.modal-form-grid {
    display: grid;
    gap: 10px;
}

.modal-error {
    color: #C0392B;
    font-weight: 700;
    font-size: 0.85rem;
}

.admin-auth-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
}

.admin-auth-brand .menu-logo {
    width: 56px;
    height: 56px;
    object-fit: contain;
    position: static;
    inset: auto;
    margin: 0;
    flex-shrink: 0;
}

.admin-all-access-card {
    width: min(440px, 92vw);
}

.admin-inline-auth .modal-card {
    width: min(520px, 100%);
    margin: 0;
}

.master-capture-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    margin-bottom: 12px;
}

.mini-table th[colspan="2"] {
    text-transform: uppercase;
    letter-spacing: 0.04em;
    font-size: 0.74rem;
}

.ui-reveal {
    opacity: 0;
    transform: translateY(12px) scale(0.995);
    filter: saturate(0.94);
}

.ui-reveal.ui-visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: saturate(1);
    transition: opacity 380ms var(--ease-out), transform 380ms var(--ease-out), filter 380ms var(--ease-out);
    transition-delay: var(--ui-delay, 0ms);
}

.is-keyboard-card {
    cursor: pointer;
}

.page .form-group input,
.page .form-group select,
.page .form-group textarea {
    transition: border-color var(--dur-fast) var(--ease-smooth), box-shadow var(--dur-fast) var(--ease-smooth), transform var(--dur-fast) var(--ease-smooth), background-color var(--dur-fast) var(--ease-smooth);
}

.page .form-group input:focus,
.page .form-group select:focus,
.page .form-group textarea:focus {
    transform: translateY(-1px);
}

.toast.toast-error {
    border-left-color: #E74C3C;
}

.toast.toast-success {
    border-left-color: #27AE60;
}

@keyframes toastIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Motion Preferences */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
    }

    .page-transition-overlay {
        display: none !important;
    }
}

/* ---------- Ultra-compact mobile navbar pass ---------- */
@media (max-width: 768px) {
    .navbar {
        min-height: 56px;
    }

    .nav-container {
        flex-wrap: nowrap;
        align-items: center;
        padding: 6px 8px;
        gap: 6px;
    }

    .logo-button-oval.compact {
        padding: 2px 8px 2px 6px;
        gap: 6px;
    }

    .logo-button-oval.compact .nav-logo {
        height: 26px;
    }

    .nav-info {
        display: none;
    }

    .nav-info span {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .nav-actions {
        width: auto;
        margin-left: auto;
        max-width: calc(100vw - 74px);
        padding: 4px 6px;
        gap: 3px;
        border-radius: 999px;
        flex-wrap: nowrap;
        overflow: visible;
    }

    .nav-actions .status-pill {
        font-size: 0.58rem;
        padding: 3px 5px;
        min-width: 0;
        white-space: nowrap;
        line-height: 1;
    }

    .nav-actions .action-btn {
        min-height: 28px;
        height: 28px;
        min-width: 0;
        padding: 0 6px;
        font-size: 0.56rem;
        line-height: 1;
        white-space: nowrap;
    }

    #appUserBadge {
        max-width: 82px;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    #offlineStatus {
        max-width: 46px;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .nav-notification-btn {
        width: 28px;
        height: 28px;
        min-width: 28px;
    }

    .flow-stepper {
        margin-top: 64px;
        top: 52px;
        padding: 7px 8px;
        border-radius: 14px;
    }

    .sticky-summary {
        top: 98px;
    }
}

/* Ben System dark-mode text visibility lock */
body.dark #benSystemPage .menu-page-note,
body.dark #benSystemPage .page-subtitle,
body.dark #benSystemPage .ben-facility-card .menu-page-note,
body.dark #benSystemPage .ben-facility-card h4 {
    color: #EAF3FF !important;
    opacity: 1 !important;
    text-shadow: none !important;
}

body.dark #benSystemPage .ben-system-primary-note,
body.dark #benSystemPage .ben-system-secondary-note,
body.dark #benSystemPage .ben-system-section-title {
    color: #F4F8FF !important;
    background: rgba(13, 27, 45, 0.92) !important;
    border: 1px solid rgba(160, 196, 236, 0.28) !important;
    border-left: 3px solid #19B4B5 !important;
    font-weight: 700 !important;
    opacity: 1 !important;
    text-shadow: none !important;
}

/* Final lock: prevent white-on-white on Ben System note text in dark mode */
body.dark #benSystemPage .menu-page-note.ben-system-primary-note,
body.dark #benSystemPage .menu-page-note.ben-system-secondary-note,
body.dark #benSystemPage .menu-page-note.ben-system-section-title {
    color: #F4F8FF !important;
    background-color: rgba(13, 27, 45, 0.92) !important;
}

/* Admin Master Logger action tabs: enforce white labels */
#admin-standalone-page #adminHeroTabLeads,
#admin-standalone-page #adminHeroTabFacilities,
#admin-standalone-page #adminHeroTabJfas,
#admin-standalone-page #adminHeroTabFas,
#admin-standalone-page #adminHeroTabFasInRegister,
#admin-standalone-page #adminHeroTabTeams,
#admin-standalone-page #adminHeroTabPerformance,
#admin-standalone-page #adminHeroTabClients,
#admin-standalone-page #adminHeroTabLearning,
#admin-standalone-page #adminHeroTabForms {
    color: #FFFFFF !important;
}

#admin-standalone-page #adminHeroTabLeads:hover,
#admin-standalone-page #adminHeroTabFacilities:hover,
#admin-standalone-page #adminHeroTabJfas:hover,
#admin-standalone-page #adminHeroTabFas:hover,
#admin-standalone-page #adminHeroTabFasInRegister:hover,
#admin-standalone-page #adminHeroTabTeams:hover,
#admin-standalone-page #adminHeroTabPerformance:hover,
#admin-standalone-page #adminHeroTabClients:hover,
#admin-standalone-page #adminHeroTabLearning:hover,
#admin-standalone-page #adminHeroTabForms:hover,
#admin-standalone-page #adminHeroTabLeads:focus-visible,
#admin-standalone-page #adminHeroTabFacilities:focus-visible,
#admin-standalone-page #adminHeroTabJfas:focus-visible,
#admin-standalone-page #adminHeroTabFas:focus-visible,
#admin-standalone-page #adminHeroTabFasInRegister:focus-visible,
#admin-standalone-page #adminHeroTabTeams:focus-visible,
#admin-standalone-page #adminHeroTabPerformance:focus-visible,
#admin-standalone-page #adminHeroTabClients:focus-visible,
#admin-standalone-page #adminHeroTabLearning:focus-visible,
#admin-standalone-page #adminHeroTabForms:focus-visible {
    color: #FFFFFF !important;
}

/* Team portal center note readability in dark mode (white card + dark text) */
body.dark #adminPage .team-portal-center-note {
    color: #102743 !important;
    background: #FFFFFF !important;
    border-color: rgba(16, 39, 67, 0.2) !important;
    text-shadow: none !important;
}

/* Team portal mobile fit lock */
@media (max-width: 768px) {
    #teamDetailPage .menu-page-inner {
        padding: 12px !important;
        overflow-x: hidden !important;
    }

    #teamDetailPage .menu-page-header {
        gap: 8px !important;
    }

    #teamDetailPage .menu-page-header h2 {
        font-size: 1rem !important;
        line-height: 1.25 !important;
        word-break: break-word !important;
    }

    #teamDetailPage .menu-header-actions {
        width: 100% !important;
        display: grid !important;
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
        gap: 8px !important;
    }

    #teamDetailPage .menu-header-actions .action-btn {
        min-width: 0 !important;
        width: 100% !important;
        padding: 8px 10px !important;
        font-size: 0.82rem !important;
        white-space: normal !important;
        line-height: 1.25 !important;
    }

    #teamDetailPage .insight-card {
        padding: 10px !important;
        margin-bottom: 10px !important;
        overflow: hidden !important;
    }

    #teamDetailPage .insight-list {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 6px !important;
    }

    #teamDetailPage .insight-chip {
        max-width: 100% !important;
        font-size: 0.74rem !important;
        line-height: 1.2 !important;
        white-space: normal !important;
        word-break: break-word !important;
    }

    #teamDetailPage .menu-page-actions {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 8px !important;
    }

    #teamDetailPage .menu-page-actions .action-btn,
    #teamDetailPage .menu-page-actions .submit-btn,
    #teamDetailPage .menu-page-actions .back-btn,
    #teamDetailPage .menu-page-actions input,
    #teamDetailPage .menu-page-actions select,
    #teamDetailPage .menu-page-actions textarea {
        min-width: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        font-size: 0.84rem !important;
    }

    #teamDetailPage .admin-graph {
        height: 120px !important;
        overflow: hidden !important;
    }

    #teamDetailPage .admin-graph-bar span {
        font-size: 0.68rem !important;
    }

    #teamDetailPage .mini-table {
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    #teamDetailPage .mini-table table {
        min-width: 520px !important;
        width: 100% !important;
    }

    #teamDetailPage .mini-table th,
    #teamDetailPage .mini-table td {
        font-size: 0.76rem !important;
        padding: 6px 7px !important;
        white-space: normal !important;
        word-break: break-word !important;
    }
}

/* Ben System readability hardening */
body:not(.dark) #benSystemPage .menu-page-note,
body:not(.dark) #benSystemPage .page-subtitle,
body:not(.dark) #benSystemPage h4,
body:not(.dark) #benSystemPage .mini-table th,
body:not(.dark) #benSystemPage .mini-table td,
body:not(.dark) #benSystemPage .mini-table td * {
    color: #0d2f52 !important;
}

body:not(.dark) #benSystemPage .menu-page-note {
    color: #123a64 !important;
    opacity: 1 !important;
}

body:not(.dark) #benSystemPage .mini-table thead th {
    color: #0d2f52 !important;
    background: linear-gradient(125deg, #eaf4ff, #f6fbff) !important;
}

body:not(.dark) #benSystemPage .mini-table table {
    background: #ffffff !important;
    border-color: rgba(13, 47, 82, 0.18) !important;
}

body:not(.dark) #benSystemPage .mini-table tr:nth-child(even) td {
    background: rgba(240, 247, 255, 0.78) !important;
}

body.dark #benSystemPage .menu-page-note,
body.dark #benSystemPage .page-subtitle,
body.dark #benSystemPage h4,
body.dark #benSystemPage .mini-table th,
body.dark #benSystemPage .mini-table td,
body.dark #benSystemPage .mini-table td * {
    color: #eaf4ff !important;
}

body.dark #benSystemPage .menu-page-note {
    color: #dbeaff !important;
    opacity: 1 !important;
}

body.dark #benSystemPage .mini-table thead th {
    color: #eaf4ff !important;
    background: linear-gradient(125deg, rgba(18, 40, 66, 0.98), rgba(15, 34, 58, 0.98)) !important;
}

body.dark #benSystemPage .mini-table table {
    background: rgba(10, 22, 38, 0.95) !important;
    border-color: rgba(214, 231, 255, 0.22) !important;
}

body.dark #benSystemPage .mini-table tr:nth-child(even) td {
    background: rgba(14, 31, 52, 0.74) !important;
}

@media (max-width: 430px) {
    .nav-info {
        display: none;
    }

    .nav-actions {
        max-width: calc(100vw - 68px);
        padding: 3px 4px;
        gap: 2px;
    }

    .nav-actions .status-pill,
    .nav-actions .action-btn {
        font-size: 0.5rem;
        padding: 0 4px;
    }

    #appUserBadge {
        max-width: 66px;
    }

    #offlineStatus {
        max-width: 38px;
    }

    .flow-stepper {
        margin-top: 62px;
    }
}

/* ---------- Professional mobile navbar + auth refinement ---------- */
@media (max-width: 768px) {
    .navbar {
        min-height: 86px;
    }

    .nav-container {
        display: grid;
        grid-template-columns: auto minmax(0, 1fr);
        grid-template-areas:
            "logo actions"
            "info info";
        align-items: center;
        gap: 8px 10px;
        padding: 8px 10px;
    }

    .logo-button {
        grid-area: logo;
    }

    .logo-button-oval.compact {
        padding: 3px 10px 3px 7px;
        gap: 7px;
    }

    .logo-button-oval.compact .nav-logo {
        height: 28px;
    }

    .nav-actions {
        grid-area: actions;
        margin-left: 0;
        width: 100%;
        max-width: none;
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        align-items: center;
        gap: 6px;
        padding: 6px;
        border-radius: 12px;
        overflow: hidden;
    }

    .nav-actions .status-pill,
    .nav-actions .action-btn {
        min-width: 0;
        width: 100%;
        height: 34px;
        min-height: 34px;
        padding: 0 8px;
        font-size: 0.72rem;
        line-height: 1.1;
        white-space: nowrap;
        text-align: center;
        justify-content: center;
    }

    .nav-notification-btn {
        width: 34px;
        height: 34px;
        min-width: 34px;
        justify-self: center;
    }

    .nav-info {
        grid-area: info;
        display: inline-flex;
        width: 100%;
        justify-content: flex-start;
        align-items: center;
        gap: 8px;
        padding: 0 2px 1px;
        font-size: 0.72rem;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .nav-info span {
        white-space: nowrap;
    }

    .flow-stepper {
        margin-top: 98px;
        top: 82px;
    }

    .sticky-summary {
        top: 132px;
    }

    .auth-gate {
        padding: 14px;
    }

    .auth-gate-card {
        width: min(96vw, 430px);
        border-radius: 20px;
        padding: 18px;
    }

    .auth-brand h2 {
        font-size: 1.1rem;
    }

    .auth-brand p {
        font-size: 0.85rem;
        line-height: 1.35;
    }

    .auth-mode-switch {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
    }

    .auth-mode-switch .action-btn {
        min-height: 40px;
        font-size: 0.78rem;
        padding: 0 8px;
    }

    .auth-gate-card .form-group label,
    .auth-gate-card .radio-label {
        font-size: 0.86rem;
        line-height: 1.35;
    }
}

@media (max-width: 560px) {
    .nav-actions {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .nav-actions .status-pill,
    .nav-actions .action-btn {
        font-size: 0.74rem;
    }

    .flow-stepper {
        margin-top: 110px;
        top: 92px;
    }

    .sticky-summary {
        top: 144px;
    }

    .auth-mode-switch {
        grid-template-columns: 1fr;
    }

    .auth-mode-switch .action-btn {
        min-height: 42px;
        font-size: 0.84rem;
    }
}

@media (max-width: 430px) {
    .nav-container {
        padding: 8px 8px;
        gap: 7px 8px;
    }

    .nav-actions {
        gap: 5px;
        padding: 5px;
    }

    .nav-actions .status-pill,
    .nav-actions .action-btn {
        font-size: 0.7rem;
        padding: 0 6px;
    }

    .nav-info {
        font-size: 0.68rem;
        gap: 6px;
    }

    .flow-stepper {
        margin-top: 108px;
        top: 90px;
    }
}

/* ---------- Mobile contact info at bottom (hours + phone) ---------- */
@media (max-width: 768px) {
    .nav-container {
        grid-template-areas: "logo actions";
    }

    .nav-info {
        position: fixed;
        left: 8px;
        right: 8px;
        bottom: calc(6px + env(safe-area-inset-bottom));
        z-index: 940;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(10, 19, 36, 0.12);
        box-shadow: 0 8px 20px rgba(10, 19, 36, 0.14);
        font-size: 0.68rem;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    body.dark .nav-info {
        background: rgba(12, 20, 33, 0.9);
        border-color: rgba(255, 255, 255, 0.12);
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.36);
    }

    body {
        padding-bottom: calc(44px + env(safe-area-inset-bottom));
    }

    .quick-actions,
    .back-to-top,
    .menu-fab {
        bottom: calc(56px + env(safe-area-inset-bottom));
    }

    .toast-container {
        bottom: calc(56px + env(safe-area-inset-bottom));
    }
}

@media (max-width: 430px) {
    .nav-info {
        gap: 8px;
        font-size: 0.62rem;
        padding: 5px 8px;
    }
}

/* ---------- Mobile footer contact (non-obstructive) ---------- */
.mobile-contact-footer {
    display: none;
}

@media (max-width: 768px) {
    .navbar .nav-info {
        display: none !important;
    }

    .mobile-contact-footer {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        width: 100%;
        margin: 20px 0 calc(10px + env(safe-area-inset-bottom));
        padding: 8px 10px;
        font-size: 0.72rem;
        line-height: 1.2;
        color: var(--muted);
        border-top: 1px solid rgba(10, 19, 36, 0.08);
        background: transparent;
    }

    body.dark .mobile-contact-footer {
        color: var(--muted-darkmode);
        border-top-color: var(--line-darkmode);
    }

    body {
        padding-bottom: 0;
    }

    .quick-actions,
    .back-to-top,
    .menu-fab,
    .toast-container {
        bottom: calc(16px + env(safe-area-inset-bottom));
    }
}

@media (max-width: 430px) {
    .mobile-contact-footer {
        gap: 8px;
        font-size: 0.66rem;
        padding: 7px 8px;
    }
}

/* ---------- Mobile top-notch polish pass ---------- */
@media (max-width: 768px) {
    :root {
        --mobile-radius: 14px;
        --mobile-gap: 10px;
    }

    html, body {
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
    }

    body {
        background:
            radial-gradient(640px 420px at 10% -10%, rgba(16, 59, 107, 0.09), transparent 72%),
            radial-gradient(760px 460px at 95% 2%, rgba(23, 162, 164, 0.08), transparent 70%),
            var(--bg);
    }

    .navbar {
        border-bottom: 1px solid rgba(10, 19, 36, 0.1);
        box-shadow: 0 8px 18px rgba(10, 19, 36, 0.1);
    }

    .flow-stepper {
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(10, 19, 36, 0.08);
    }

    .page {
        padding-top: 108px;
    }

    #landing-page {
        padding-top: 4px;
    }

    #landing-page .hero-section {
        min-height: 56vh;
        padding-top: 6px;
    }

    .container {
        padding: 0 10px;
    }

    .hero-content {
        gap: var(--mobile-gap);
    }

    .hero-glass,
    .summary-card,
    .about-card,
    .service-item,
    .stats-section,
    .insight-card,
    .target-card,
    .archives-panel,
    .complete-day-panel,
    .assignment-card,
    .lead-panel,
    .lead-section,
    .modal-card,
    .auth-gate-card {
        border-radius: var(--mobile-radius);
    }

    .stats-section,
    .insight-card,
    .lead-panel,
    .lead-section {
        box-shadow: 0 8px 18px rgba(10, 19, 36, 0.1);
    }

    .menu-page {
        align-items: flex-end;
        padding: 0;
    }

    .menu-page-inner {
        width: 100%;
        margin: 0;
        min-height: min(88vh, calc(var(--mobile-vh) - 72px));
        max-height: calc(var(--mobile-vh) - 56px);
        border-radius: 18px 18px 0 0;
        border-left: none;
        border-right: none;
        border-bottom: none;
        padding: 14px 12px calc(20px + env(safe-area-inset-bottom));
        box-shadow: 0 -10px 28px rgba(10, 19, 36, 0.2);
        overflow-y: auto;
    }

    .menu-page-header {
        position: sticky;
        top: 0;
        z-index: 2;
        margin: -14px -12px 12px;
        padding: 10px 12px;
        backdrop-filter: blur(10px) saturate(130%);
        background: rgba(255, 255, 255, 0.82);
        border-bottom: 1px solid rgba(10, 19, 36, 0.08);
    }

    body.dark .menu-page-header {
        background: rgba(12, 20, 33, 0.86);
        border-bottom-color: rgba(255, 255, 255, 0.1);
    }

    .menu-page-actions {
        gap: 8px;
    }

    .menu-page-actions .action-btn,
    .menu-page-actions .submit-btn,
    .menu-page-actions .back-btn {
        min-height: 42px;
        border-radius: 12px;
    }

    .action-btn,
    .submit-btn,
    .back-btn,
    .sidebar-toggle,
    .sidebar-sub-btn,
    .sidebar-settings-btn,
    .sidebar-signout-btn,
    .quick-actions-toggle {
        transition: transform 160ms var(--ease-out), filter 160ms var(--ease-out), box-shadow 180ms var(--ease-out);
    }

    .action-btn:active,
    .submit-btn:active,
    .back-btn:active,
    .sidebar-toggle:active,
    .sidebar-sub-btn:active,
    .sidebar-settings-btn:active,
    .sidebar-signout-btn:active,
    .quick-actions-toggle:active {
        transform: translateY(1px) scale(0.985);
        filter: brightness(0.97);
    }

    .form-group input,
    .form-group textarea,
    .form-group select,
    input,
    textarea,
    select {
        border-radius: 12px;
    }

    .mini-table {
        border-radius: 12px;
        overflow: hidden;
    }

    .notification-dropdown {
        left: 8px !important;
        right: 8px !important;
        bottom: calc(56px + env(safe-area-inset-bottom));
        top: auto !important;
        width: auto !important;
    }

    .notification-dropdown-card {
        border-radius: 16px;
        max-height: min(62vh, 520px);
        box-shadow: 0 12px 30px rgba(10, 19, 36, 0.24);
    }

    .quick-actions {
        right: 12px;
        bottom: calc(14px + env(safe-area-inset-bottom));
    }

    .quick-actions-toggle {
        border-radius: 999px;
        min-height: 40px;
        padding: 10px 14px;
    }

    .quick-actions-menu {
        border-radius: 14px;
    }

    .toast {
        border-radius: 12px;
    }

    .page.active .stats-section,
    .page.active .target-card,
    .page.active .summary-card,
    .page.active .lead-panel,
    .page.active .lead-section,
    .page.active .insight-card {
        animation: mobileCardIn 260ms var(--ease-out) both;
    }

    .page.active .stats-section:nth-of-type(2),
    .page.active .target-card:nth-of-type(2),
    .page.active .summary-card:nth-of-type(2),
    .page.active .insight-card:nth-of-type(2) {
        animation-delay: 40ms;
    }

    .page.active .stats-section:nth-of-type(3),
    .page.active .target-card:nth-of-type(3),
    .page.active .summary-card:nth-of-type(3),
    .page.active .insight-card:nth-of-type(3) {
        animation-delay: 70ms;
    }
}

@media (max-width: 430px) {
    .menu-page-inner {
        min-height: min(90vh, calc(var(--mobile-vh) - 64px));
        max-height: calc(var(--mobile-vh) - 50px);
        padding: 12px 10px calc(18px + env(safe-area-inset-bottom));
        border-radius: 16px 16px 0 0;
    }

    .menu-page-header {
        margin: -12px -10px 10px;
        padding: 9px 10px;
    }

    .action-btn,
    .submit-btn,
    .back-btn {
        font-size: 0.82rem;
    }

    .hero-glass {
        padding: 12px;
    }

    /* Compact menu-page top banner on small phones */
    .menu-page-header {
        margin: -10px -8px 8px;
        padding: 6px 8px;
        gap: 6px;
    }

    .menu-page-header h2 {
        font-size: 0.94rem;
        line-height: 1.1;
        margin: 0;
    }

    .menu-scope-chip {
        padding: 3px 8px;
        font-size: 0.7rem;
        line-height: 1.1;
        border-radius: 999px;
    }

    .menu-header-actions {
        gap: 5px;
    }

    .menu-header-actions .action-btn {
        min-height: 30px;
        padding: 4px 8px;
        font-size: 0.72rem;
        border-radius: 9px;
    }
}

@media (max-width: 768px) {
    /* Reduce menu-page banner height for mobile/tablet portrait */
    .menu-page-header {
        margin: -12px -10px 10px;
        padding: 8px 10px;
        gap: 8px;
    }

    .menu-page-header h2 {
        font-size: 1rem;
        line-height: 1.15;
        margin: 0;
    }

    .menu-scope-chip {
        padding: 4px 10px;
        font-size: 0.75rem;
    }

    .menu-header-actions .action-btn {
        min-height: 34px;
        padding: 5px 10px;
        font-size: 0.76rem;
    }
}

@keyframes mobileCardIn {
    0% {
        opacity: 0;
        transform: translateY(8px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ---------- Mobile flow-step compact fit ---------- */
@media (max-width: 768px) {
    .flow-stepper {
        display: flex;
        flex-wrap: nowrap;
        gap: 3px;
        justify-content: space-between;
        overflow: hidden;
        padding: 5px 4px;
    }

    .flow-stepper::before,
    .flow-stepper::after,
    .flow-step::after {
        display: none;
    }

    .flow-step {
        flex: 1 1 0;
        min-width: 0;
        gap: 3px;
        padding: 5px 3px;
        border-radius: 8px;
        justify-content: center;
    }

    .step-index {
        width: 16px;
        height: 16px;
        font-size: 0.58rem;
    }

    .step-label {
        font-size: 0.54rem;
        line-height: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
}

@media (max-width: 560px) {
    .flow-step {
        padding: 4px 1px;
        border-radius: 7px;
        flex-direction: column;
        gap: 1px;
    }

    .step-label {
        display: block;
        font-size: 0.44rem;
        line-height: 1;
        letter-spacing: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }

    .step-index {
        width: 14px;
        height: 14px;
        font-size: 0.52rem;
    }
}

@media (max-width: 430px) {
    .flow-stepper {
        gap: 2px;
        padding: 4px 3px;
    }

    .flow-step {
        padding: 3px 1px;
    }

    .step-label {
        font-size: 0.4rem;
    }

    .step-index {
        width: 13px;
        height: 13px;
        font-size: 0.48rem;
    }
}

/* ---------- Global button no-overlap safety pass ---------- */
.menu-page-actions,
.modal-actions,
.sidebar-footer,
.auth-mode-switch {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: stretch;
}

.quick-actions-menu {
    display: none;
}

.quick-actions-menu.is-open {
    display: flex;
}

.menu-page-actions > .action-btn,
.menu-page-actions > .submit-btn,
.menu-page-actions > .back-btn,
.modal-actions > .action-btn,
.modal-actions > .submit-btn {
    flex: 1 1 160px;
    max-width: 100%;
    min-width: 0;
}

.menu-page-actions .action-btn,
.menu-page-actions .submit-btn,
.menu-page-actions .back-btn,
.modal-actions .action-btn,
.modal-actions .submit-btn,
.sidebar-footer .sidebar-settings-btn,
.sidebar-footer .sidebar-signout-btn {
    white-space: normal;
    word-break: break-word;
    overflow-wrap: anywhere;
    line-height: 1.2;
}

.nav-actions > * {
    min-width: 0;
}

.nav-actions .action-btn,
.nav-actions .status-pill {
    overflow: hidden;
    text-overflow: ellipsis;
}

.mobile-only-menu-control {
    display: none;
}

@media (max-width: 768px) {
    .nav-actions .mobile-move-to-menu {
        display: none !important;
    }

    .sidebar-footer .mobile-only-menu-control {
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
    }
}

@media (max-width: 768px) {
    .menu-page-actions,
    .modal-actions {
        gap: 8px;
    }

    .menu-page-actions > .action-btn,
    .menu-page-actions > .submit-btn,
    .menu-page-actions > .back-btn,
    .modal-actions > .action-btn,
    .modal-actions > .submit-btn {
        flex: 1 1 100%;
    }

    .sidebar-footer .sidebar-settings-btn,
    .sidebar-footer .sidebar-signout-btn {
        width: 100%;
    }

    #forgot-password-modal .modal-actions,
    #reset-password-modal .modal-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    #forgot-password-modal .modal-actions > .action-btn,
    #forgot-password-modal .modal-actions > .submit-btn,
    #reset-password-modal .modal-actions > .action-btn,
    #reset-password-modal .modal-actions > .submit-btn {
        flex: 1 1 auto !important;
        min-height: 38px !important;
        width: 100% !important;
        font-size: 0.78rem !important;
        padding: 0 8px !important;
        white-space: nowrap !important;
    }

    /* Team portal access modal buttons: keep compact and always visible */
    #team-auth-modal .modal-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    #team-auth-modal .modal-actions > .action-btn,
    #team-auth-modal .modal-actions > .submit-btn {
        flex: 1 1 auto !important;
        width: 100% !important;
        min-height: 36px !important;
        font-size: 0.76rem !important;
        padding: 0 8px !important;
        white-space: nowrap !important;
    }

    /* Global mobile button sizing guardrail */
    .action-btn,
    .submit-btn,
    .back-btn,
    .sidebar-toggle,
    .sidebar-sub-btn,
    .sidebar-settings-btn,
    .sidebar-signout-btn {
        min-height: 36px !important;
        font-size: 0.78rem !important;
        padding: 0 10px !important;
        max-width: 100%;
    }
}

@media (max-width: 420px) {
    #forgot-password-modal .modal-actions,
    #reset-password-modal .modal-actions,
    #team-auth-modal .modal-actions {
        grid-template-columns: 1fr !important;
    }
}

/* Responsive */
@media (max-width: 900px) {
    .nav-info {
        flex-direction: column;
        align-items: flex-end;
        font-size: 0.85rem;
    }

    .flow-stepper {
        top: 72px;
    }
}

@media (max-width: 768px) {
    .nav-notification-btn {
        width: 40px;
        height: 40px;
    }

    .nav-container {
        flex-direction: column;
        align-items: flex-start;
    }

    .nav-actions {
        width: 100%;
        justify-content: flex-start;
    }


    .flow-stepper {
        position: static;
        margin-top: 92px;
        border-radius: 14px;
        padding: 8px 10px;
    }

    .hero-section {
        min-height: 62vh;
    }

    .hero-logo {
        width: clamp(150px, 60vw, 260px);
    }

    .hero-glass {
        padding: 16px 18px;
        gap: 12px;
        border-radius: 16px;
    }

    .hero-headline {
        font-size: 0.8rem;
        letter-spacing: 0.45px;
    }

    .hero-subheadline {
        font-size: 0.72rem;
    }

    .hero-top3 {
        display: grid;
        gap: 6px;
    }

    .hero-top-title {
        font-size: 0.72rem;
    }

    .hero-top-list {
        gap: 6px;
    }

    .hero-top-item {
        font-size: 0.74rem;
        padding: 5px 10px;
    }

    .hero-badges .badge:nth-child(n+2) {
        display: none;
    }

    .hero-secondary-cta {
        min-width: 102px;
        width: auto;
        padding: 8px 10px;
        font-size: 0.8rem;
        line-height: 1.1;
        border-radius: 12px !important;
    }

    .hero-actions {
        gap: 8px;
        justify-content: center;
    }

    .menu-page {
        padding: 14px;
    }

    .menu-page-inner {
        margin: 18px auto;
        padding: 18px;
        border-radius: 18px;
    }

    .menu-page-actions .action-btn {
        min-width: 0;
    }

    .menu-header-actions {
        width: 100%;
        justify-content: flex-end;
    }

    .menu-header-actions .action-btn {
        min-width: 0;
        padding: 8px 12px;
    }

    .hero-ribbon {
        margin-bottom: 12px;
    }

    .hero-tagline {
        margin-bottom: 12px;
    }

    .hero-stats {
        grid-template-columns: 1fr;
    }

    .hero-mini {
        grid-template-columns: 1fr;
    }

    .trust-strip {
        padding-top: 10px;
    }

    .stats-export {
        flex-direction: column;
    }

    .coverage-grid {
        gap: 8px;
    }

    .range-export {
        grid-template-columns: 1fr;
    }

    .back-to-top {
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }


    .registration-form-container,
    .dbd-form-container {
        padding: 24px;
    }

    .assignment-card {
        padding: 26px;
    }

    .stats-actions {
        flex-direction: column;
    }

    .action-btn {
        width: 100%;
    }

    .modal-actions {
        flex-direction: column;
        align-items: stretch;
    }

    .archives-controls {
        grid-template-columns: 1fr;
    }

    .facility-filter-row {
        grid-template-columns: 1fr;
    }

    .team-trend {
        gap: 16px;
    }

    .trend-row {
        grid-template-columns: 1fr;
    }

    .trend-axis {
        margin-left: 0;
        flex-wrap: wrap;
    }

    .section-heading {
        justify-content: center;
        text-align: center;
    }

    .section-heading::after {
        left: 50%;
        transform: translateX(-50%);
    }

    .quick-actions {
        display: flex;
        bottom: calc(18px + env(safe-area-inset-bottom));
    }
}

/* Dark Mode Contrast Hardening */
body.dark .toast {
    background: rgba(18, 30, 48, 0.98);
    color: #F2F7FF;
    border-color: rgba(255, 255, 255, 0.2);
    border-left-color: #F26A21;
}

body.dark .toast.toast-error {
    background: rgba(66, 21, 25, 0.98);
    color: #FFE0DD;
    border-color: rgba(255, 140, 140, 0.35);
    border-left-color: #FF6B63;
}

body.dark .toast.toast-success {
    background: rgba(18, 55, 34, 0.98);
    color: #DBFBE9;
    border-color: rgba(104, 228, 162, 0.35);
    border-left-color: #42D392;
}

body.dark .modal-error {
    color: #FFB8AF;
}

body.high-contrast-tables .mini-table th,
body.high-contrast-tables .rankings-table th,
body.high-contrast-tables .attendance-table th {
    background: #0f172a;
    color: #f8fafc;
    border-color: #334155;
}

body.high-contrast-tables .mini-table td,
body.high-contrast-tables .rankings-table td,
body.high-contrast-tables .attendance-table td {
    color: #0f172a;
    border-color: #cbd5e1;
}

body.dark.high-contrast-tables .mini-table td,
body.dark.high-contrast-tables .rankings-table td,
body.dark.high-contrast-tables .attendance-table td {
    color: #f8fafc;
    border-color: #475569;
    background: #0b1220;
}

body.compact-ui .insight-card,
body.compact-ui .stats-section,
body.compact-ui .menu-page-inner {
    padding-top: 10px;
    padding-bottom: 10px;
}

body.compact-ui .action-btn,
body.compact-ui .sidebar-toggle,
body.compact-ui .sidebar-sub-btn {
    padding: 9px 12px;
}

body.reduce-motion *,
body.reduce-motion *::before,
body.reduce-motion *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
}

body.dark .no-data,
body.dark .page-subtitle,
body.dark .summary-label,
body.dark .target-hint,
body.dark .target-sub {
    color: #C6D3E5;
}

body.dark input::placeholder,
body.dark textarea::placeholder {
    color: #AEBBD0;
    opacity: 1;
}

body.dark .mini-table td input,
body.dark .mini-table td select,
body.dark .mini-table td textarea,
body.dark .rankings-table td input,
body.dark .rankings-table td select,
body.dark .rankings-table td textarea {
    color: #F0F5FF;
    background: rgba(14, 24, 40, 0.95);
    border-color: rgba(255, 255, 255, 0.2);
}

body.dark .mini-table td input:focus,
body.dark .mini-table td select:focus,
body.dark .mini-table td textarea:focus,
body.dark .rankings-table td input:focus,
body.dark .rankings-table td select:focus,
body.dark .rankings-table td textarea:focus {
    border-color: rgba(242, 106, 33, 0.6);
    box-shadow: 0 0 0 3px rgba(242, 106, 33, 0.2);
}

/* Performance mode (auto-enabled on low-end devices) */
body.performance .page {
    filter: none !important;
    transition: opacity 0.2s ease, transform 0.2s ease !important;
}

body.performance .page.zoom-enter,
body.performance .page.zoom-exit,
body.performance .hero-overlay {
    animation: none !important;
}

body.performance .page-transition-overlay {
    display: none !important;
}

body.performance::after,
body.reduce-motion::after {
    display: none !important;
}

body.performance .navbar,
body.performance .flow-stepper,
body.performance .about-card,
body.performance .service-item,
body.performance .registration-form-container,
body.performance .dbd-form-container,
body.performance .radio-option,
body.performance .stats-section,
body.performance .team-card,
body.performance .facility-card,
body.performance .target-card,
body.performance .summary-card,
body.performance .archives-panel,
body.performance .toast,
body.performance .modal-card {
    backdrop-filter: none !important;
}

body.performance .hero-logo,
body.performance .jfa-register-btn,
body.performance .action-btn,
body.performance .back-btn {
    transition: none !important;
}

/* UI polish overrides */
.action-btn,
.submit-btn,
.back-btn {
    transition: transform var(--dur-fast) var(--ease-out), box-shadow var(--dur-fast) var(--ease-out), filter var(--dur-fast) var(--ease-smooth), background-color var(--dur-fast) var(--ease-smooth), border-color var(--dur-fast) var(--ease-smooth);
}

button {
    position: relative;
    overflow: hidden;
}

button.is-pressed {
    transform: translateY(0.5px) scale(0.998);
    opacity: 0.95;
}

button.is-fading {
    animation: btnFade 160ms var(--ease-out);
}

@keyframes btnFade {
    0% { opacity: 0.85; }
    100% { opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
    button.is-pressed {
        transform: none !important;
    }
    button.is-fading {
        animation: none !important;
    }
}

.action-btn.key-action {
    box-shadow: 0 14px 28px rgba(242, 106, 33, 0.33), 0 0 0 1px rgba(242, 106, 33, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.35);
}

.action-btn.key-action:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 18px 34px rgba(242, 106, 33, 0.4);
}

.summary-value {
    font-size: clamp(1.75rem, 2.4vw, 2.3rem);
    font-weight: 800;
    letter-spacing: -0.02em;
}

.summary-label {
    font-size: 0.78rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    opacity: 0.9;
}

.status-pill {
    transition: background-color var(--dur-fast) var(--ease-smooth), border-color var(--dur-fast) var(--ease-smooth), color var(--dur-fast) var(--ease-smooth), box-shadow var(--dur-fast) var(--ease-smooth);
}

.status-pill.is-online {
    background: rgba(26, 167, 161, 0.14);
    border-color: rgba(26, 167, 161, 0.35);
    color: #0D7F7A;
}

.status-pill.is-offline {
    background: rgba(231, 76, 60, 0.12);
    border-color: rgba(231, 76, 60, 0.25);
    color: #C0392B;
}

.status-pill.is-syncing {
    box-shadow: 0 0 0 0 rgba(26, 167, 161, 0.34);
    animation: syncPulse 1.15s ease-in-out infinite;
}

.status-pill.is-saved {
    animation: syncSettle 460ms var(--ease-out);
}

@keyframes syncPulse {
    0% { box-shadow: 0 0 0 0 rgba(26, 167, 161, 0.34); }
    70% { box-shadow: 0 0 0 8px rgba(26, 167, 161, 0); }
    100% { box-shadow: 0 0 0 0 rgba(26, 167, 161, 0); }
}

@keyframes syncSettle {
    0% { transform: translateY(0); }
    50% { transform: translateY(-1px); }
    100% { transform: translateY(0); }
}

.sidebar .sidebar-section {
    opacity: 0;
    transform: translateX(-8px);
    transition: opacity var(--dur-mid) var(--ease-out), transform var(--dur-mid) var(--ease-out);
}

.sidebar.is-open .sidebar-section {
    opacity: 1;
    transform: translateX(0);
}

.sidebar.is-open .sidebar-section:nth-child(1) { transition-delay: 30ms; }
.sidebar.is-open .sidebar-section:nth-child(2) { transition-delay: 70ms; }
.sidebar.is-open .sidebar-section:nth-child(3) { transition-delay: 110ms; }
.sidebar.is-open .sidebar-section:nth-child(4) { transition-delay: 150ms; }
.sidebar.is-open .sidebar-section:nth-child(5) { transition-delay: 190ms; }

.menu-page-overlay {
    transition: opacity var(--dur-mid) var(--ease-smooth);
}

.menu-page {
    transition: opacity var(--dur-mid) var(--ease-out), transform var(--dur-mid) var(--ease-out);
}

.page {
    transition: opacity var(--dur-page) var(--ease-out), transform var(--dur-page) var(--ease-out), filter var(--dur-page) var(--ease-out);
}

.page.zoom-enter-forward { animation: pageInForward var(--dur-page) var(--ease-out); }
.page.zoom-enter-backward { animation: pageInBackward var(--dur-page) var(--ease-out); }
.page.zoom-exit-forward { animation: pageOutForward 220ms var(--ease-smooth); }
.page.zoom-exit-backward { animation: pageOutBackward 220ms var(--ease-smooth); }

@keyframes pageInForward {
    from { opacity: 0; transform: translateX(26px) translateY(8px) scale(0.992); }
    to { opacity: 1; transform: translateX(0) translateY(0) scale(1); }
}

@keyframes pageInBackward {
    from { opacity: 0; transform: translateX(-26px) translateY(8px) scale(0.992); }
    to { opacity: 1; transform: translateX(0) translateY(0) scale(1); }
}

@keyframes pageOutForward {
    from { opacity: 1; transform: translateX(0) translateY(0) scale(1); }
    to { opacity: 0; transform: translateX(-16px) translateY(6px) scale(0.992); }
}

@keyframes pageOutBackward {
    from { opacity: 1; transform: translateX(0) translateY(0) scale(1); }
    to { opacity: 0; transform: translateX(16px) translateY(6px) scale(0.992); }
}

body.page-direction-forward .page-transition-overlay {
    background:
        radial-gradient(280px 220px at 15% 40%, rgba(242, 106, 33, 0.24), rgba(242, 106, 33, 0)),
        radial-gradient(320px 280px at 82% 30%, rgba(23, 162, 164, 0.2), rgba(23, 162, 164, 0)),
        linear-gradient(120deg, rgba(9, 16, 30, 0.82), rgba(9, 16, 30, 0.66));
}

body.page-direction-backward .page-transition-overlay {
    background:
        radial-gradient(280px 220px at 82% 42%, rgba(242, 106, 33, 0.24), rgba(242, 106, 33, 0)),
        radial-gradient(320px 280px at 22% 28%, rgba(23, 162, 164, 0.2), rgba(23, 162, 164, 0)),
        linear-gradient(300deg, rgba(9, 16, 30, 0.82), rgba(9, 16, 30, 0.66));
}

body.data-focus::after {
    opacity: 0.32;
}

body.data-focus .hero-orb,
body.data-focus .hero-particles,
body.data-focus .hero-spotlight,
body.data-focus .hero-section::before,
body.data-focus .hero-section::after {
    opacity: 0.28;
}

#stats-page.page-loading .stats-section,
#archives-page.page-loading .archives-panel {
    position: relative;
    overflow: hidden;
}

#stats-page.page-loading .stats-section::before,
#archives-page.page-loading .archives-panel::before {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.65), transparent);
    animation: skeleton 1s linear infinite;
    pointer-events: none;
    z-index: 2;
}

@media (max-width: 768px) {
    .action-btn,
    .submit-btn,
    .back-btn,
    .flow-step,
    .sidebar-toggle,
    .sidebar-sub-btn {
        min-height: 44px;
    }

    .sticky-summary {
        cursor: pointer;
        gap: 10px;
        width: calc(100% - 16px);
        max-width: none;
        justify-content: flex-start;
        overflow: hidden;
        transition: max-height var(--dur-fast) var(--ease-smooth), padding var(--dur-fast) var(--ease-smooth);
    }

    .sticky-summary::after {
        content: "Tap to collapse";
        font-size: 0.66rem;
        color: var(--muted);
        margin-left: auto;
    }

    .sticky-summary.is-collapsed {
        padding: 6px 12px;
    }

    .sticky-summary.is-collapsed .sticky-divider,
    .sticky-summary.is-collapsed .sticky-value:not(:first-of-type) {
        display: none;
    }

    .sticky-summary.is-collapsed::after {
        content: "Tap to expand";
    }
}

@media (prefers-reduced-motion: reduce) {
    .page.zoom-enter-forward,
    .page.zoom-enter-backward,
    .page.zoom-exit-forward,
    .page.zoom-exit-backward,
    .status-pill.is-syncing {
        animation: none !important;
    }

    .hero-stage {
        opacity: 1 !important;
        transform: none !important;
        transition: none !important;
    }
}

.mini-table tr.is-present {
    background: rgba(26, 167, 161, 0.1);
}

.mini-table tr.is-absent {
    background: rgba(231, 76, 60, 0.08);
}

.mini-table tr.is-present td:first-child strong::before {
    content: " ";
    color: #0D7F7A;
}

.mini-table tr.is-absent td:first-child strong::before {
    content: " ";
    color: #C0392B;
}

.mini-table tr.is-present,
.mini-table tr.is-absent {
    cursor: pointer;
}

.danger-text {
    color: #C0392B;
    font-weight: 700;
}

.intervention-form {
    margin-top: 10px;
    display: grid;
    gap: 10px;
}

.intervention-note {
    width: 100%;
    resize: vertical;
}

.intervention-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
}

.intervention-row label {
    font-size: 0.85rem;
    color: var(--muted);
}

.intervention-status-select {
    min-width: 150px;
}

.admin-standalone-hero {
    border: 1px solid rgba(10, 19, 36, 0.12);
    background: linear-gradient(135deg, rgba(11, 46, 82, 0.95), rgba(16, 59, 107, 0.92));
    color: #FFFFFF;
    border-radius: 20px;
    padding: 18px;
    margin: 0 0 16px;
    box-shadow: 0 16px 30px rgba(10, 19, 36, 0.2);
}

.admin-hero-head h2 {
    margin: 0 0 4px;
    color: #FFFFFF;
}

.admin-hero-head .page-subtitle {
    color: rgba(255, 255, 255, 0.88);
    margin-bottom: 12px;
}

.admin-hero-sync {
    margin-top: -4px;
    margin-bottom: 10px;
    font-size: 0.82rem;
    color: rgba(255, 255, 255, 0.8);
}

.admin-hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-bottom: 12px;
}

.admin-hero-stat {
    background: rgba(255, 255, 255, 0.12);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: 12px;
    padding: 10px 12px;
}

.admin-hero-stat.is-clickable {
    cursor: pointer;
    transition: background 0.18s ease, transform 0.18s ease, box-shadow 0.18s ease;
}

.admin-hero-stat.is-clickable:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
}

.admin-hero-stat.is-clickable:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.9);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(242, 106, 33, 0.2);
}

.admin-hero-value {
    display: block;
    font-size: 1.4rem;
    font-weight: 800;
    color: #FFFFFF;
    line-height: 1.1;
}

.admin-hero-label {
    display: block;
    font-size: 0.78rem;
    color: rgba(255, 255, 255, 0.85);
    margin-top: 2px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

body.dark .admin-standalone-hero {
    border-color: rgba(255, 255, 255, 0.12);
    background: linear-gradient(135deg, rgba(9, 26, 48, 0.96), rgba(13, 36, 63, 0.95));
}

.admin-standalone-hero .menu-page-actions .action-btn.admin-tab-active {
    background: rgba(11, 46, 82, 0.16);
    color: #0A1324;
    border-color: rgba(11, 46, 82, 0.3);
    box-shadow: 0 8px 16px rgba(10, 19, 36, 0.12);
}

body.dark .admin-standalone-hero .menu-page-actions .action-btn.admin-tab-active {
    background: rgba(242, 106, 33, 0.24);
    border-color: rgba(242, 106, 33, 0.45);
}

.facility-inline-actions {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin: 0;
    white-space: nowrap;
}

.facility-inline-actions .action-btn {
    min-width: 88px;
    padding: 6px 10px;
}

#adminMasterBody .mini-table td input[id^="mf-"] {
    width: 100%;
    min-width: 120px;
}

#adminMasterBody .mini-table td:last-child {
    white-space: nowrap;
}

#adminMasterBody .mini-table {
    max-height: 62vh;
    overflow: auto;
}

#adminMasterBody .mini-table thead th {
    position: sticky;
    top: 0;
    z-index: 2;
    background: rgba(255, 255, 255, 0.96);
    backdrop-filter: blur(6px);
}

body.dark #adminMasterBody .mini-table thead th {
    background: rgba(14, 22, 38, 0.96);
}

#adminStandaloneRecentActivity {
    max-height: 260px;
    overflow: auto;
}

#adminStandaloneHealth {
    gap: 10px;
}

/* Mobile compatibility hardening */
:root {
    --mobile-vh: 100vh;
}

html,
body {
    min-height: 100%;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

img,
svg,
canvas,
video {
    max-width: 100%;
    height: auto;
}

.menu-page,
.auth-gate,
.sidebar {
    min-height: var(--mobile-vh);
}

.mini-table,
.rankings-table {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.mini-table table,
.rankings-table table {
    min-width: 620px;
}

.toast-container {
    bottom: calc(14px + env(safe-area-inset-bottom));
    right: calc(14px + env(safe-area-inset-right));
}

.back-to-top,
.quick-actions,
.menu-fab {
    bottom: calc(16px + env(safe-area-inset-bottom));
}

/* Keep mobile toast notifications above Quick Actions button */
@media (max-width: 768px) {
    .toast-container {
        bottom: calc(92px + env(safe-area-inset-bottom)) !important;
        right: calc(12px + env(safe-area-inset-right));
        z-index: 1350;
    }
}

@media (max-width: 1024px) {
    .menu-page-inner {
        margin: 20px auto;
        padding: 20px;
    }
}

@media (max-width: 768px) {
    .navbar {
        padding-top: env(safe-area-inset-top);
    }

    .nav-container {
        width: 100%;
        padding: 10px 12px;
        gap: 10px;
    }

    .nav-info {
        width: 100%;
        align-items: flex-start;
        font-size: 0.78rem;
    }

    .nav-actions {
        width: 100%;
        padding: 8px;
        border-radius: 14px;
        gap: 8px;
    }

    .nav-actions .action-btn,
    .nav-actions .status-pill {
        flex: 1 1 auto;
        min-width: 120px;
    }

    .flow-stepper {
        margin-top: 88px;
        padding: 8px;
        gap: 8px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .flow-step {
        flex: 1 0 120px;
    }

    .sidebar {
        width: 100vw;
        max-width: 100vw;
        border-radius: 0;
        padding: 14px 12px calc(14px + env(safe-area-inset-bottom));
    }

    .sidebar-footer {
        margin-top: 24px;
        padding-bottom: calc(8px + env(safe-area-inset-bottom));
    }

    .menu-page {
        padding: 10px 10px calc(16px + env(safe-area-inset-bottom));
    }

    .menu-page-inner {
        margin: 10px auto;
        padding: 14px;
        border-radius: 16px;
    }

    .menu-page-header {
        gap: 8px;
    }

    .menu-page-actions {
        width: 100%;
        gap: 8px;
    }

    .menu-page-actions .action-btn,
    .menu-page-actions .submit-btn,
    .menu-page-actions .back-btn {
        flex: 1 1 100%;
        width: 100%;
        min-height: 44px;
    }

    .modal-overlay {
        padding: 12px;
    }

    .modal-card {
        width: min(96vw, 560px);
        max-height: calc(var(--mobile-vh) - 24px);
        overflow-y: auto;
    }

    .notification-dropdown {
        left: 8px !important;
        right: 8px !important;
        width: auto !important;
        max-width: none !important;
    }

    .notification-dropdown-card {
        max-height: min(70vh, 560px);
    }

    input,
    select,
    textarea,
    button {
        font-size: 16px;
    }

    .lead-signature-pad {
        height: 170px;
    }

    .hero-section {
        min-height: 58vh;
    }
}

@media (max-width: 560px) {
    .auth-gate {
        padding: 10px;
    }

    .auth-gate-card {
        width: 100%;
        padding: 16px;
        border-radius: 16px;
    }

    .auth-mode-switch {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .mini-table table,
    .rankings-table table {
        min-width: 560px;
    }

    .menu-illustration {
        height: 140px;
    }

    #settingsBody .master-capture-grid {
        grid-template-columns: 1fr;
    }

    #settingsBody .insight-list {
        gap: 8px;
    }

    #settingsBody .insight-chip {
        width: 100%;
        justify-content: flex-start;
    }

    #settingsBody #teamLeaderAccountCard input {
        width: 100%;
    }
}

@media (max-width: 430px) {
    .nav-container {
        padding: 8px 10px;
    }

    .nav-actions {
        gap: 6px;
        padding: 7px;
    }

    .nav-actions .status-pill,
    .nav-actions .action-btn {
        min-width: 0;
        width: 100%;
    }

    .nav-notification-btn {
        width: 38px;
        height: 38px;
        min-width: 38px;
    }

    .flow-step {
        flex: 1 0 108px;
    }

    .step-label {
        font-size: 0.7rem;
    }

    .auth-gate-card {
        padding: 14px;
    }

    .menu-page-inner {
        padding: 12px;
        border-radius: 14px;
    }

    .admin-hero-stats {
        grid-template-columns: 1fr 1fr;
    }

    .mini-table table,
    .rankings-table table {
        min-width: 520px;
    }
}

@media (min-width: 768px) and (max-width: 1100px) {
    .nav-container {
        padding: 12px 16px;
    }

    .menu-page-inner {
        width: min(96vw, 980px);
    }

    .menu-page-actions .action-btn {
        min-width: 132px;
    }
}

@media (max-height: 740px) {
    .menu-page-inner {
        margin: 8px auto;
    }

    .menu-illustration {
        height: 120px;
    }

    .notification-dropdown-card {
        max-height: calc(var(--mobile-vh) - 90px);
    }

    .modal-card {
        max-height: calc(var(--mobile-vh) - 18px);
    }
}

/* Device-profile tuning: iPhone 12 / Galaxy S23 / iPad */
@media (min-width: 386px) and (max-width: 394px) and (min-height: 830px) and (max-height: 860px) and (orientation: portrait) {
    .nav-container {
        padding: 9px 11px;
    }

    .flow-stepper {
        margin-top: 86px;
        padding: 8px 9px;
    }

    .hero-glass {
        padding: 14px 15px;
        border-radius: 15px;
    }

    .hero-headline {
        font-size: 0.78rem;
    }

    .hero-subheadline {
        font-size: 0.7rem;
    }

    .menu-page-inner {
        padding: 13px;
        border-radius: 15px;
    }

    .auth-gate-card {
        padding: 15px;
    }
}

@media (min-width: 391px) and (max-width: 399px) and (min-height: 844px) and (max-height: 880px) and (orientation: portrait) {
    .flow-step {
        flex: 1 0 114px;
    }

    .hero-section {
        min-height: 60vh;
    }

    .notification-dropdown-card {
        max-height: min(66vh, 560px);
    }

    .menu-page {
        padding: 10px 10px calc(18px + env(safe-area-inset-bottom));
    }
}

@media (min-width: 760px) and (max-width: 834px) and (min-height: 1000px) and (max-height: 1220px) and (orientation: portrait) {
    .nav-container {
        padding: 12px 16px;
    }

    .flow-stepper {
        max-width: 96vw;
        margin-top: 94px;
    }

    .hero-content {
        max-width: 95vw;
    }

    .hero-glass {
        padding: 18px 20px;
    }

    .menu-page {
        padding: 14px 14px calc(22px + env(safe-area-inset-bottom));
    }

    .menu-page-inner {
        width: min(96vw, 780px);
        margin: 14px auto;
        padding: 18px;
    }

    .menu-page-actions .action-btn {
        min-width: 144px;
    }

    .sidebar {
        width: min(72vw, 460px);
    }
}

@media (min-width: 1000px) and (max-width: 1210px) and (orientation: landscape) {
    .menu-page-inner {
        width: min(94vw, 1040px);
        margin: 10px auto;
    }

    .menu-illustration {
        height: 150px;
    }

    .modal-card {
        max-height: calc(var(--mobile-vh) - 20px);
    }
}

/* ---------- Global Polish Pass ---------- */
:root {
    --ui-glass: linear-gradient(180deg, rgba(255, 255, 255, 0.88), rgba(255, 255, 255, 0.8));
    --ui-glass-dark: linear-gradient(180deg, rgba(18, 27, 43, 0.94), rgba(12, 20, 33, 0.9));
    --ui-border-soft: rgba(11, 46, 82, 0.12);
    --ui-elev-1: 0 10px 28px rgba(10, 19, 36, 0.1);
    --ui-elev-2: 0 18px 42px rgba(10, 19, 36, 0.16);
    --ui-card-radius: 18px;
    --ui-accent-soft: rgba(242, 106, 33, 0.26);
}

body::after {
    animation: ambientFieldDrift 20s ease-in-out infinite;
}

body.dark::after {
    background:
        radial-gradient(300px 300px at var(--mx) var(--my), rgba(242, 106, 33, 0.16), rgba(242, 106, 33, 0)),
        radial-gradient(380px 380px at calc(var(--mx) * 0.6) calc(var(--my) * 1.2), rgba(23, 162, 164, 0.14), rgba(23, 162, 164, 0));
}

@keyframes ambientFieldDrift {
    0% { filter: saturate(1) brightness(1); transform: translate3d(0, 0, 0); }
    50% { filter: saturate(1.08) brightness(1.02); transform: translate3d(8px, -6px, 0); }
    100% { filter: saturate(1) brightness(1); transform: translate3d(0, 0, 0); }
}

.navbar,
.flow-stepper,
.menu-page-inner,
.modal-card,
.insight-card,
.stats-section,
.target-card,
.summary-card,
.archives-panel {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.insight-card,
.stats-section,
.target-card,
.summary-card,
.archives-panel,
.menu-page-inner,
.modal-card {
    border: 1px solid var(--ui-border-soft);
    box-shadow: var(--ui-elev-1);
    transition: transform 220ms var(--ease-out), box-shadow 220ms var(--ease-out), border-color 220ms var(--ease-out), background 280ms var(--ease-smooth);
}

.hero-glass,
.about-card,
.summary-card,
.target-card,
.archives-panel,
.insight-card,
.stats-section,
.menu-page-inner,
.modal-card,
.auth-gate-card,
.payment-card,
.learning-panel,
.lead-panel,
.form-card,
.team-card,
.facility-card,
.assignment-card,
.complete-day-panel,
.notification-dropdown-card,
.notification-card,
.leaderboard-card,
.alert-panel,
.attendance-panel,
.admin-jfa-card,
.hero-jfa-card,
.auto-assign-card,
.admin-standalone-hero,
.admin-brand-logo,
.master-stat-grid .admin-hero-stat {
    border-radius: var(--ui-card-radius);
}

.mini-table {
    border-radius: var(--ui-card-radius);
    overflow: hidden;
}

.insight-card:hover,
.stats-section:hover,
.target-card:hover,
.summary-card:hover,
.archives-panel:hover {
    box-shadow: var(--ui-elev-2);
    transform: translateY(-2px);
    border-color: var(--ui-accent-soft);
}

.action-btn,
.submit-btn,
.back-btn,
.sidebar-toggle,
.sidebar-sub-btn,
.sidebar-settings-btn,
.sidebar-signout-btn {
    will-change: transform, box-shadow, filter;
}

.action-btn:hover,
.submit-btn:hover,
.back-btn:hover,
.sidebar-toggle:hover,
.sidebar-sub-btn:hover,
.sidebar-settings-btn:hover,
.sidebar-signout-btn:hover {
    filter: saturate(1.08);
    box-shadow: 0 10px 22px rgba(10, 19, 36, 0.14);
    transform: translateY(-1px);
}

.action-btn:focus-visible,
.submit-btn:focus-visible,
.back-btn:focus-visible,
.sidebar-toggle:focus-visible,
.sidebar-sub-btn:focus-visible,
.sidebar-settings-btn:focus-visible,
.sidebar-signout-btn:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline: 2px solid rgba(242, 106, 33, 0.5);
    outline-offset: 2px;
}

.menu-page.is-open .menu-page-inner,
.modal-overlay.is-open .modal-card {
    animation: subtleLiftIn 260ms var(--ease-out);
}

.page.active .insight-card,
.page.active .stats-section,
.page.active .target-card,
.page.active .summary-card {
    animation: subtleFadeUp 360ms var(--ease-out);
}

.page.active .insight-card:nth-of-type(2),
.page.active .stats-section:nth-of-type(2) {
    animation-delay: 40ms;
}

.page.active .insight-card:nth-of-type(3),
.page.active .stats-section:nth-of-type(3) {
    animation-delay: 80ms;
}

.mini-table table tbody tr,
.rankings-table table tbody tr,
.attendance-table tbody tr {
    transition: background-color 140ms var(--ease-smooth), transform 140ms var(--ease-smooth);
}

.mini-table table tbody tr:hover,
.rankings-table table tbody tr:hover,
.attendance-table tbody tr:hover {
    transform: translateX(2px);
}

.nav-notification-btn {
    box-shadow: 0 6px 14px rgba(10, 19, 36, 0.14);
    transition: transform 180ms var(--ease-smooth), box-shadow 180ms var(--ease-smooth), background 220ms var(--ease-smooth);
}

.nav-notification-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 24px rgba(10, 19, 36, 0.16);
}

.hero-glass,
.about-card,
.service-item {
    border: 1px solid var(--ui-border-soft);
    box-shadow: var(--ui-elev-1);
}

body.dark .navbar,
body.dark .flow-stepper,
body.dark .menu-page-inner,
body.dark .modal-card,
body.dark .insight-card,
body.dark .stats-section,
body.dark .target-card,
body.dark .summary-card,
body.dark .archives-panel,
body.dark .hero-glass,
body.dark .about-card,
body.dark .service-item {
    background: var(--ui-glass-dark);
    border-color: rgba(255, 255, 255, 0.14);
    box-shadow: 0 14px 34px rgba(0, 0, 0, 0.34);
}

body.dark .mini-table tr:hover td,
body.dark .rankings-table tr:hover td,
body.dark .attendance-table tr:hover td {
    background: rgba(255, 255, 255, 0.08);
}

@keyframes subtleLiftIn {
    from {
        opacity: 0;
        transform: translateY(8px) scale(0.995);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes subtleFadeUp {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Section motion profiles */
@keyframes sectionAdminReveal {
    0% { opacity: 0; transform: translateY(10px) scale(0.992); filter: saturate(0.92); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: saturate(1); }
}

@keyframes sectionLearningReveal {
    0% { opacity: 0; transform: translateY(12px); clip-path: inset(0 0 22% 0 round 18px); }
    100% { opacity: 1; transform: translateY(0); clip-path: inset(0 0 0 0 round 18px); }
}

@keyframes sectionLeadsReveal {
    0% { opacity: 0; transform: translateX(10px); }
    100% { opacity: 1; transform: translateX(0); }
}

@keyframes sectionPaymentsReveal {
    0% { opacity: 0; transform: translateY(10px) scale(0.996); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

body.menu-motion-admin #adminPage.is-open .menu-page-inner {
    animation: sectionAdminReveal 280ms var(--ease-out);
}

body.menu-motion-teamdetail #teamDetailPage.is-open .menu-page-inner,
body.menu-motion-archivedjfas #archivedJfaPage.is-open .menu-page-inner {
    animation: sectionAdminReveal 260ms var(--ease-out);
}

body.menu-motion-learning #learningPage.is-open .menu-page-inner,
body.menu-motion-learningdetail #learningDetailPage.is-open .menu-page-inner {
    animation: sectionLearningReveal 300ms var(--ease-out);
}

body.menu-motion-learning #learningPage.is-open .learning-panel,
body.menu-motion-learningdetail #learningDetailPage.is-open .learning-panel {
    animation: subtleFadeUp 320ms var(--ease-out);
}

body.menu-motion-learning #learningPage.is-open .learning-panel:nth-of-type(2),
body.menu-motion-learningdetail #learningDetailPage.is-open .learning-panel:nth-of-type(2) {
    animation-delay: 40ms;
}

body.menu-motion-learning #learningPage.is-open .learning-panel:nth-of-type(3),
body.menu-motion-learningdetail #learningDetailPage.is-open .learning-panel:nth-of-type(3) {
    animation-delay: 80ms;
}

body.menu-motion-leads #leadsPage.is-open .menu-page-inner,
body.menu-motion-appointments #appointmentsPage.is-open .menu-page-inner {
    animation: sectionLeadsReveal 270ms var(--ease-out);
}

body.menu-motion-leads #leadsPage.is-open .lead-panel,
body.menu-motion-leads #leadsPage.is-open .form-card {
    animation: subtleFadeUp 300ms var(--ease-out);
}

body.menu-motion-payments #paymentsPage.is-open .menu-page-inner {
    animation: sectionPaymentsReveal 280ms var(--ease-out);
}

body.menu-motion-payments #paymentsPage.is-open .payment-card,
body.menu-motion-payments #paymentsPage.is-open .insight-chip {
    animation: subtleFadeUp 300ms var(--ease-out);
}

body.menu-motion-forms #formsPage.is-open .menu-page-inner,
body.menu-motion-settings #settingsPage.is-open .menu-page-inner {
    animation: subtleLiftIn 260ms var(--ease-out);
}

body.page-motion-landing .hero-content {
    animation: floatIn 1s ease, heroFloat 12s ease-in-out infinite;
}

body.page-motion-stats #stats-page.page.active .target-card,
body.page-motion-stats #stats-page.page.active .leaderboard-card {
    animation: subtleFadeUp 320ms var(--ease-out);
}

@media (max-width: 768px) {
    .menu-page-inner,
    .modal-card,
    .insight-card,
    .stats-section {
        box-shadow: 0 8px 20px rgba(10, 19, 36, 0.14);
    }

    .mini-table table tbody tr:hover,
    .rankings-table table tbody tr:hover,
    .attendance-table tbody tr:hover {
        transform: none;
    }
}

@media (prefers-reduced-motion: reduce) {
    body::after {
        animation: none !important;
    }
    .menu-page.is-open .menu-page-inner,
    .modal-overlay.is-open .modal-card,
    .page.active .insight-card,
    .page.active .stats-section,
    .page.active .target-card,
    .page.active .summary-card {
        animation: none !important;
    }
    body.menu-motion-admin #adminPage.is-open .menu-page-inner,
    body.menu-motion-teamdetail #teamDetailPage.is-open .menu-page-inner,
    body.menu-motion-archivedjfas #archivedJfaPage.is-open .menu-page-inner,
    body.menu-motion-learning #learningPage.is-open .menu-page-inner,
    body.menu-motion-learningdetail #learningDetailPage.is-open .menu-page-inner,
    body.menu-motion-leads #leadsPage.is-open .menu-page-inner,
    body.menu-motion-appointments #appointmentsPage.is-open .menu-page-inner,
    body.menu-motion-payments #paymentsPage.is-open .menu-page-inner,
    body.menu-motion-forms #formsPage.is-open .menu-page-inner,
    body.menu-motion-settings #settingsPage.is-open .menu-page-inner,
    body.page-motion-landing .hero-content,
    body.page-motion-stats #stats-page.page.active .target-card,
    body.page-motion-stats #stats-page.page.active .leaderboard-card,
    body.menu-motion-learning #learningPage.is-open .learning-panel,
    body.menu-motion-learningdetail #learningDetailPage.is-open .learning-panel,
    body.menu-motion-leads #leadsPage.is-open .lead-panel,
    body.menu-motion-leads #leadsPage.is-open .form-card,
    body.menu-motion-payments #paymentsPage.is-open .payment-card,
    body.menu-motion-payments #paymentsPage.is-open .insight-chip {
        animation: none !important;
    }
    body.admin-standalone-active .admin-hero-value::before {
        animation: none !important;
    }
    .insight-card:hover,
    .stats-section:hover,
    .target-card:hover,
    .summary-card:hover,
    .archives-panel:hover,
    .action-btn:hover,
    .submit-btn:hover,
    .back-btn:hover,
    .sidebar-toggle:hover,
    .sidebar-sub-btn:hover,
    .sidebar-settings-btn:hover,
    .sidebar-signout-btn:hover,
    .nav-notification-btn:hover {
        transform: none !important;
    }
}

/* ---------- Admin Distinct Visual Language ---------- */
body.admin-standalone-active {
    background:
        radial-gradient(1000px 620px at 8% 4%, rgba(242, 106, 33, 0.12), transparent 70%),
        radial-gradient(900px 540px at 92% 6%, rgba(49, 112, 173, 0.18), transparent 68%),
        linear-gradient(180deg, #eef3fb 0%, #e7edf7 100%);
}

body.admin-standalone-active .page-header {
    border: 1px solid rgba(11, 46, 82, 0.15);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(247, 250, 255, 0.9));
    box-shadow: 0 14px 32px rgba(10, 19, 36, 0.12);
}

body.admin-standalone-active .admin-top-shell {
    position: relative;
    overflow: hidden;
    margin-bottom: 18px;
    border-radius: 26px;
    border: 1px solid rgba(11, 46, 82, 0.18);
    background:
        radial-gradient(120% 120% at 0% 0%, rgba(255, 255, 255, 0.24), transparent 56%),
        linear-gradient(155deg, rgba(13, 51, 89, 0.96) 0%, rgba(18, 74, 124, 0.95) 56%, rgba(10, 53, 92, 0.96) 100%);
    box-shadow: 0 24px 48px rgba(7, 20, 38, 0.3);
}

body.admin-standalone-active .admin-top-shell .page-header,
body.admin-standalone-active .admin-top-shell .admin-standalone-hero {
    margin: 0;
    border: 0;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
}

body.admin-standalone-active .admin-top-shell .page-header {
    padding-top: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

body.admin-standalone-active .admin-top-shell .page-header h1,
body.admin-standalone-active .admin-top-shell .page-header .section-heading,
body.admin-standalone-active .admin-top-shell .page-header .page-subtitle,
body.admin-standalone-active .admin-top-shell .admin-brand-title {
    color: #F8FBFF;
}

body.admin-standalone-active .admin-top-shell #adminStandaloneScope {
    display: inline-flex;
    align-items: center;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.14);
    font-weight: 600;
}

body.admin-standalone-active .admin-top-shell .back-btn {
    border-color: rgba(255, 255, 255, 0.36);
    color: #F8FBFF;
    background: rgba(255, 255, 255, 0.12);
    margin-bottom: 0;
}

body.admin-standalone-active .admin-top-shell .back-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

body.admin-standalone-active .admin-brand-stack {
    display: grid;
    place-items: center;
    gap: 6px;
    margin: 0;
    padding: 8px 14px;
    border-radius: var(--ui-card-radius);
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
    backdrop-filter: blur(6px) saturate(110%);
    -webkit-backdrop-filter: blur(6px) saturate(110%);
    box-shadow: 0 6px 14px rgba(7, 20, 38, 0.1);
}

body.admin-standalone-active .admin-brand-stack.admin-brand-stack-tight {
    gap: 2px;
    padding: 0;
    border: none;
    background: transparent;
    box-shadow: none;
    margin: 0;
}

body.admin-standalone-active .admin-brand-logo {
    width: clamp(78px, 8vw, 104px);
    height: auto;
    max-height: 92px;
    margin: 0 auto;
    padding: 0;
    border-radius: var(--ui-card-radius);
    background: transparent;
    border: none;
    box-shadow: none;
    object-fit: contain;
    overflow: hidden;
}

body.admin-standalone-active .admin-standalone-hero {
    position: relative;
    overflow: hidden;
    background:
        radial-gradient(120% 120% at 0% 0%, rgba(255, 255, 255, 0.2), transparent 52%),
        linear-gradient(140deg, #0b2e52 0%, #114879 55%, #0f3d69 100%);
    border-color: rgba(255, 255, 255, 0.24);
    box-shadow: 0 20px 44px rgba(7, 20, 38, 0.3);
}

body.admin-standalone-active .admin-standalone-hero::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(115deg, transparent 34%, rgba(255, 255, 255, 0.16) 48%, transparent 62%);
    transform: translateX(-120%);
    animation: adminHeroSweep 5.8s ease-in-out infinite;
    pointer-events: none;
}

body.admin-standalone-active .admin-hero-stat {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.28);
}

body.admin-standalone-active .admin-hero-stat.is-clickable:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 18px rgba(2, 10, 22, 0.24);
}

body.admin-standalone-active #admin-standalone-page .insight-card {
    border: 1px solid rgba(11, 46, 82, 0.13);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(251, 252, 255, 0.92));
}

body.admin-standalone-active #admin-standalone-page .menu-page-actions .action-btn {
    border-radius: 12px;
}

body.admin-standalone-active #admin-standalone-page .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(135deg, #f26a21, #d95a15);
    border-color: rgba(242, 106, 33, 0.65);
}

body.admin-standalone-active #admin-standalone-page .menu-page-actions .action-btn.admin-tab-active {
    background: linear-gradient(140deg, rgba(11, 46, 82, 0.18), rgba(11, 46, 82, 0.1));
    color: #0A1324;
    border-color: rgba(11, 46, 82, 0.34);
}

/* Light-mode readability hardening for Admin Performance Review */
body.admin-standalone-active #adminMasterBody .insight-card,
body.admin-standalone-active #adminMasterBody .insight-card h4,
body.admin-standalone-active #adminMasterBody .insight-card strong,
body.admin-standalone-active #adminMasterBody .mini-table td,
body.admin-standalone-active #adminMasterBody .mini-table th,
body.admin-standalone-active #adminMasterBody .insight-chip {
    color: #0A1324;
}

body.admin-standalone-active #adminMasterBody .page-subtitle {
    color: #4A5870;
}

body.admin-standalone-active #adminMasterBody .mini-table table,
body.admin-standalone-active #adminMasterBody .mini-table th,
body.admin-standalone-active #adminMasterBody .mini-table td,
body.admin-standalone-active #adminMasterBody select,
body.admin-standalone-active #adminMasterBody option {
    color: #0A1324;
}

body.admin-standalone-active #adminMasterBody .mini-table thead th {
    background: rgba(11, 46, 82, 0.08);
}

body.admin-standalone-active #admin-standalone-page .audit-log .audit-item {
    border-left: 3px solid rgba(242, 106, 33, 0.72);
    padding-left: 10px;
}

body.dark.admin-standalone-active {
    background:
        radial-gradient(960px 620px at 10% 2%, rgba(242, 106, 33, 0.16), transparent 70%),
        radial-gradient(960px 620px at 95% 0%, rgba(58, 129, 198, 0.22), transparent 68%),
        linear-gradient(180deg, #0a1322 0%, #0b1525 100%);
}

body.dark.admin-standalone-active .page-header {
    border-color: rgba(255, 255, 255, 0.14);
    background: linear-gradient(180deg, rgba(16, 25, 40, 0.94), rgba(12, 20, 33, 0.9));
    box-shadow: 0 18px 34px rgba(0, 0, 0, 0.36);
}

body.dark.admin-standalone-active .admin-top-shell {
    border-color: rgba(255, 255, 255, 0.16);
    background:
        radial-gradient(120% 120% at 0% 0%, rgba(255, 255, 255, 0.08), transparent 58%),
        linear-gradient(155deg, rgba(11, 28, 47, 0.96) 0%, rgba(13, 46, 78, 0.96) 56%, rgba(9, 32, 58, 0.98) 100%);
    box-shadow: 0 24px 46px rgba(0, 0, 0, 0.4);
}

body.dark.admin-standalone-active .admin-brand-logo {
    background: transparent;
    border: none;
    box-shadow: none;
}

body.dark.admin-standalone-active .admin-brand-stack {
    border-color: rgba(255, 255, 255, 0.12);
    background: linear-gradient(180deg, rgba(19, 30, 48, 0.24), rgba(12, 22, 36, 0.18));
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.22);
}

body.dark.admin-standalone-active #admin-standalone-page .insight-card {
    border-color: rgba(255, 255, 255, 0.14);
    background: linear-gradient(180deg, rgba(16, 25, 40, 0.96), rgba(12, 20, 33, 0.92));
}

body.dark.admin-standalone-active #admin-standalone-page .menu-page-actions .action-btn.admin-tab-active {
    background: linear-gradient(140deg, rgba(242, 106, 33, 0.28), rgba(242, 106, 33, 0.14));
    border-color: rgba(242, 106, 33, 0.56);
}

/* Admin visual upgrade pass */
body.admin-standalone-active #admin-standalone-page .container {
    position: relative;
}

body.admin-standalone-active #admin-standalone-page .container::before {
    content: "";
    position: absolute;
    inset: -24px -14px auto -14px;
    height: 240px;
    background:
        radial-gradient(520px 220px at 10% 0%, rgba(242, 106, 33, 0.16), transparent 70%),
        radial-gradient(620px 260px at 90% 0%, rgba(78, 156, 230, 0.18), transparent 72%);
    pointer-events: none;
    z-index: 0;
}

body.admin-standalone-active #admin-standalone-page .page-header,
body.admin-standalone-active #admin-standalone-page .admin-standalone-hero,
body.admin-standalone-active #admin-standalone-page .stats-section {
    position: relative;
    z-index: 1;
}

body.admin-standalone-active #admin-standalone-page .page-header {
    border-image: linear-gradient(90deg, rgba(242, 106, 33, 0.44), rgba(16, 59, 107, 0.32), rgba(23, 162, 164, 0.36)) 1;
}

body.admin-standalone-active #admin-standalone-page .section-heading[data-icon=""] {
    letter-spacing: 0.06em;
    text-transform: uppercase;
}

body.admin-standalone-active .admin-hero-stats {
    gap: 12px;
}

body.admin-standalone-active .admin-hero-stat {
    position: relative;
    overflow: hidden;
    border-width: 1px;
    border-color: rgba(255, 255, 255, 0.24);
    background: linear-gradient(165deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0.06));
    box-shadow: 0 10px 22px rgba(2, 10, 22, 0.22);
}

body.admin-standalone-active .admin-hero-stat::before {
    content: none;
    display: none;
}

body.admin-standalone-active .admin-hero-stat::after {
    content: "";
    position: absolute;
    inset: auto 0 0 0;
    height: 3px;
    background: linear-gradient(90deg, rgba(242, 106, 33, 0.94), rgba(255, 255, 255, 0.5));
    opacity: 0.86;
}

body.admin-standalone-active .admin-hero-value {
    position: relative;
    display: inline-grid;
    place-items: center;
    min-width: 52px;
    min-height: 52px;
    z-index: 1;
    text-shadow: 0 4px 10px rgba(0, 0, 0, 0.28);
}

body.admin-standalone-active .admin-hero-value::before {
    content: "";
    position: absolute;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    background:
        radial-gradient(circle at center, rgba(255, 255, 255, 0) 61%, rgba(255, 255, 255, 0.12) 62%, rgba(255, 255, 255, 0.12) 65%, transparent 66%),
        conic-gradient(from 0deg, rgba(242, 106, 33, 0.85), rgba(255, 255, 255, 0.18), rgba(23, 162, 164, 0.62), rgba(242, 106, 33, 0.85));
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    opacity: 0.9;
    pointer-events: none;
    animation: adminRingSweep 9s linear infinite;
}

body.admin-standalone-active .admin-hero-value::after {
    content: "";
    position: absolute;
    inset: 6px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.16);
    opacity: 0.9;
    pointer-events: none;
}

body.admin-standalone-active .admin-standalone-hero > .menu-page-actions {
    margin-top: 2px;
    padding: 8px;
    border-radius: 14px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
}

body.admin-standalone-active .admin-standalone-hero > .menu-page-actions .action-btn {
    min-height: 40px;
    border-radius: 10px;
    font-size: 0.84rem;
}

body.admin-standalone-active #admin-standalone-page .stats-section .insight-card h4 {
    position: relative;
    padding-left: 12px;
}

body.admin-standalone-active #admin-standalone-page .stats-section .insight-card h4::before {
    content: "";
    position: absolute;
    left: 0;
    top: 4px;
    bottom: 4px;
    width: 4px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(242, 106, 33, 0.95), rgba(11, 46, 82, 0.6));
}

body.admin-standalone-active #admin-standalone-page .stats-section:last-of-type > .menu-page-actions {
    padding: 10px;
    border-radius: 14px;
    border: 1px solid rgba(11, 46, 82, 0.16);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(247, 250, 255, 0.82));
}

body.dark.admin-standalone-active #admin-standalone-page .page-header {
    border-image: linear-gradient(90deg, rgba(242, 106, 33, 0.5), rgba(122, 176, 235, 0.35), rgba(42, 190, 182, 0.35)) 1;
}

body.dark.admin-standalone-active .admin-hero-stat {
    border-color: rgba(255, 255, 255, 0.2);
    background: linear-gradient(165deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
}

body.dark.admin-standalone-active .admin-hero-stat::before {
    background: rgba(255, 255, 255, 0.16);
}

body.dark.admin-standalone-active .admin-hero-value::before {
    background:
        radial-gradient(circle at center, rgba(255, 255, 255, 0) 61%, rgba(255, 255, 255, 0.1) 62%, rgba(255, 255, 255, 0.1) 65%, transparent 66%),
        conic-gradient(from 0deg, rgba(242, 106, 33, 0.82), rgba(146, 179, 224, 0.22), rgba(46, 189, 181, 0.62), rgba(242, 106, 33, 0.82));
}

body.dark.admin-standalone-active .admin-standalone-hero > .menu-page-actions {
    border-color: rgba(255, 255, 255, 0.16);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.07), rgba(255, 255, 255, 0.03));
}

body.dark.admin-standalone-active #admin-standalone-page .stats-section:last-of-type > .menu-page-actions {
    border-color: rgba(255, 255, 255, 0.14);
    background: linear-gradient(180deg, rgba(16, 25, 40, 0.82), rgba(12, 20, 33, 0.78));
}

@keyframes adminRingSweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes adminHeroSweep {
    0% { transform: translateX(-120%); opacity: 0; }
    18% { opacity: 1; }
    52% { transform: translateX(120%); opacity: 0.8; }
    100% { transform: translateX(120%); opacity: 0; }
}

@media (max-width: 768px) {
    body.admin-standalone-active .admin-standalone-hero {
        padding: 14px;
    }

    body.admin-standalone-active .admin-brand-logo {
        border-radius: 14px;
    }
}

@media (prefers-reduced-motion: reduce) {
    body.admin-standalone-active .admin-standalone-hero::after {
        animation: none !important;
    }
}

/* ---------- Quick Actions Placement Override ---------- */
.quick-actions {
    left: calc(16px + env(safe-area-inset-left)) !important;
    right: auto !important;
    bottom: calc(16px + env(safe-area-inset-bottom)) !important;
}

.quick-actions-menu.is-open {
    transform-origin: bottom left;
}

@media (max-width: 768px) {
    .quick-actions {
        left: calc(12px + env(safe-area-inset-left)) !important;
        right: auto !important;
        bottom: calc(16px + env(safe-area-inset-bottom)) !important;
    }
}

/* ---------- Settings Mobile Fit ---------- */
@media (max-width: 768px) {
    #settingsPage .menu-page-inner {
        overflow-x: hidden;
    }

    #settingsPage .insight-card {
        padding: 12px;
        overflow: hidden;
    }

    #settingsPage .master-capture-grid {
        grid-template-columns: 1fr !important;
        gap: 10px;
    }

    #settingsPage .menu-page-actions,
    #settingsPage .modal-actions {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
    }

    #settingsPage .menu-page-actions > .action-btn,
    #settingsPage .menu-page-actions > .submit-btn,
    #settingsPage .menu-page-actions > .back-btn,
    #settingsPage .modal-actions > .action-btn,
    #settingsPage .modal-actions > .submit-btn {
        width: 100%;
        min-width: 0;
    }

    #settingsPage .form-group input,
    #settingsPage .form-group select,
    #settingsPage .form-group textarea,
    #settingsPage .learning-search input {
        width: 100%;
        max-width: 100%;
    }

    #settingsPage .insight-list {
        flex-wrap: wrap;
        gap: 8px;
    }

    #settingsPage .insight-chip {
        width: 100%;
        justify-content: flex-start;
        min-width: 0;
    }

    #settingsPage .mini-table {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    #settingsPage .mini-table table {
        min-width: 460px;
    }
}

@media (max-width: 430px) {
    #settingsPage .menu-page-inner {
        padding: 12px 10px calc(18px + env(safe-area-inset-bottom));
    }

    #settingsPage .insight-card {
        padding: 10px;
    }

    #settingsPage .menu-page-actions .action-btn,
    #settingsPage .menu-page-actions .submit-btn,
    #settingsPage .menu-page-actions .back-btn {
        font-size: 0.82rem;
    }

    #settingsPage .mini-table table {
        min-width: 420px;
    }
}

/* ---------- Team Leader Distinct Visual Language ---------- */
body.team-portal-active {
    background:
        radial-gradient(940px 560px at 4% 0%, rgba(15, 163, 155, 0.13), transparent 70%),
        radial-gradient(980px 620px at 98% 4%, rgba(29, 111, 184, 0.15), transparent 68%),
        linear-gradient(180deg, #edf8f7 0%, #e6f2f8 100%);
}

body.team-portal-active #teamDetailPage .menu-page-inner {
    border: 1px solid rgba(14, 114, 129, 0.2);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(248, 253, 253, 0.92));
    box-shadow: 0 16px 34px rgba(10, 19, 36, 0.14);
}

body.team-portal-active #teamDetailPage .menu-page-header h2 {
    color: #0d5f73;
    letter-spacing: 0.01em;
}

body.team-portal-active #teamDetailPage .scope-badge.team {
    background: linear-gradient(140deg, rgba(15, 163, 155, 0.2), rgba(42, 129, 196, 0.2));
    border-color: rgba(15, 163, 155, 0.4);
    color: #0a4454;
}

body.team-portal-active #teamDetailPage .insight-card {
    border: 1px solid rgba(14, 114, 129, 0.16);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(249, 254, 254, 0.94));
}

body.team-portal-active #teamDetailPage .team-card {
    border: 1px solid rgba(15, 163, 155, 0.18);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(240, 251, 252, 0.92));
    box-shadow: 0 10px 24px rgba(10, 19, 36, 0.1);
}

body.team-portal-active #teamDetailPage .team-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 28px rgba(10, 19, 36, 0.14);
}

body.team-portal-active #teamDetailPage .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(135deg, #0fa39b, #0b7c8d);
    border-color: rgba(15, 163, 155, 0.5);
}

body.team-portal-active #teamDetailPage .status-pill {
    border-color: rgba(15, 163, 155, 0.32);
    background: rgba(15, 163, 155, 0.12);
    color: #0a4752;
}

body.team-portal-active #teamDetailPage .audit-item {
    border-left: 3px solid rgba(15, 163, 155, 0.66);
    padding-left: 10px;
}

body.dark.team-portal-active {
    background:
        radial-gradient(950px 600px at 8% 0%, rgba(25, 170, 161, 0.2), transparent 72%),
        radial-gradient(1000px 620px at 96% 4%, rgba(50, 127, 194, 0.24), transparent 68%),
        linear-gradient(180deg, #081824 0%, #0a1d2b 100%);
}

body.dark.team-portal-active #teamDetailPage .menu-page-inner {
    border-color: rgba(138, 220, 219, 0.24);
    background: linear-gradient(180deg, rgba(10, 30, 38, 0.96), rgba(8, 25, 33, 0.92));
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.38);
}

body.dark.team-portal-active #teamDetailPage .menu-page-header h2 {
    color: #a8f0ea;
}

body.dark.team-portal-active #teamDetailPage .scope-badge.team {
    background: linear-gradient(140deg, rgba(22, 162, 153, 0.32), rgba(54, 136, 206, 0.26));
    border-color: rgba(134, 224, 220, 0.5);
    color: #d9fcf8;
}

body.dark.team-portal-active #teamDetailPage .insight-card,
body.dark.team-portal-active #teamDetailPage .team-card {
    border-color: rgba(138, 220, 219, 0.2);
    background: linear-gradient(180deg, rgba(10, 30, 38, 0.96), rgba(8, 25, 33, 0.92));
}

body.dark.team-portal-active #teamDetailPage .status-pill {
    border-color: rgba(134, 224, 220, 0.45);
    background: rgba(25, 170, 161, 0.22);
    color: #d9fcf8;
}

/* Final rounding enforcement for all card surfaces */
:where(
    .auth-gate-card,
    .hero-glass,
    .summary-card,
    .about-card,
    .target-card,
    .insight-card,
    .archives-panel,
    .assignment-card,
    .auto-assign-card,
    .form-card,
    .lead-panel,
    .payment-card,
    .learning-panel,
    .team-card,
    .facility-card,
    .admin-jfa-card,
    .hero-jfa-card,
    .leaderboard-card,
    .alert-panel,
    .attendance-panel,
    .modal-card,
    .notification-dropdown-card,
    .notification-card,
    .menu-page-inner,
    .admin-standalone-hero,
    .admin-brand-stack,
    .admin-brand-logo,
    .master-stat-grid .admin-hero-stat,
    .complete-day-panel,
    .stats-section,
    .mini-table
) {
    border-radius: var(--ui-card-radius) !important;
}

@media (max-width: 768px) {
    body.team-portal-active #teamDetailPage .menu-page-inner {
        box-shadow: 0 10px 22px rgba(10, 19, 36, 0.18);
    }
}

/* Team-specific variants */
body.team-portal-active.team-theme-thando {
    background:
        radial-gradient(960px 580px at 6% 0%, rgba(17, 157, 170, 0.18), transparent 70%),
        radial-gradient(980px 620px at 98% 6%, rgba(27, 106, 178, 0.2), transparent 68%),
        linear-gradient(180deg, #e8f8fb 0%, #e2eef8 100%);
}

body.team-portal-active.team-theme-thando #teamDetailPage .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(135deg, #0ea5b5, #1378a8);
    border-color: rgba(14, 165, 181, 0.55);
}

body.team-portal-active.team-theme-thato {
    background:
        radial-gradient(940px 560px at 4% 0%, rgba(244, 122, 51, 0.18), transparent 70%),
        radial-gradient(980px 620px at 97% 6%, rgba(191, 80, 22, 0.18), transparent 68%),
        linear-gradient(180deg, #fff2e8 0%, #f9e8dd 100%);
}

body.team-portal-active.team-theme-thato #teamDetailPage .menu-page-inner {
    border-color: rgba(188, 89, 37, 0.24);
}

body.team-portal-active.team-theme-thato #teamDetailPage .menu-page-header h2 {
    color: #9d3f0f;
}

body.team-portal-active.team-theme-thato #teamDetailPage .scope-badge.team {
    background: linear-gradient(140deg, rgba(244, 122, 51, 0.2), rgba(168, 82, 29, 0.2));
    border-color: rgba(188, 89, 37, 0.42);
    color: #7b2f0b;
}

body.team-portal-active.team-theme-thato #teamDetailPage .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(135deg, #f26a21, #c64d13);
    border-color: rgba(242, 106, 33, 0.58);
}

body.team-portal-active.team-theme-rhulani {
    background:
        radial-gradient(960px 580px at 6% 0%, rgba(124, 88, 220, 0.18), transparent 70%),
        radial-gradient(980px 620px at 98% 6%, rgba(72, 122, 220, 0.2), transparent 68%),
        linear-gradient(180deg, #f1ecff 0%, #e8e7fb 100%);
}

body.team-portal-active.team-theme-rhulani #teamDetailPage .menu-page-inner {
    border-color: rgba(92, 76, 170, 0.24);
}

body.team-portal-active.team-theme-rhulani #teamDetailPage .menu-page-header h2 {
    color: #4b3f87;
}

body.team-portal-active.team-theme-rhulani #teamDetailPage .scope-badge.team {
    background: linear-gradient(140deg, rgba(124, 88, 220, 0.2), rgba(72, 122, 220, 0.2));
    border-color: rgba(92, 76, 170, 0.42);
    color: #3e356f;
}

body.team-portal-active.team-theme-rhulani #teamDetailPage .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(135deg, #6e5cc5, #445cb8);
    border-color: rgba(92, 76, 170, 0.58);
}

body.dark.team-portal-active.team-theme-thato #teamDetailPage .menu-page-header h2,
body.dark.team-portal-active.team-theme-rhulani #teamDetailPage .menu-page-header h2 {
    color: #f7f8fc;
}

body.team-portal-active.team-theme-generic {
    background:
        radial-gradient(940px 560px at 4% 0%, hsl(var(--team-hue, 190) 72% 50% / 0.16), transparent 70%),
        radial-gradient(980px 620px at 97% 6%, hsl(var(--team-hue-2, 222) 68% 48% / 0.16), transparent 68%),
        linear-gradient(180deg, #eef8fb 0%, #e8eff8 100%);
}

body.team-portal-active.team-theme-generic #teamDetailPage .menu-page-inner {
    border-color: hsl(var(--team-hue, 190) 48% 44% / 0.24);
}

body.team-portal-active.team-theme-generic #teamDetailPage .menu-page-header h2 {
    color: var(--team-headline, #1a4f62);
}

body.team-portal-active.team-theme-generic #teamDetailPage .scope-badge.team {
    background: linear-gradient(
        140deg,
        hsl(var(--team-hue, 190) 72% 50% / 0.2),
        hsl(var(--team-hue-2, 222) 68% 48% / 0.2)
    );
    border-color: hsl(var(--team-hue, 190) 52% 44% / 0.42);
    color: hsl(var(--team-hue, 190) 62% 22%);
}

body.team-portal-active.team-theme-generic #teamDetailPage .menu-page-actions .action-btn:not(.secondary) {
    background: linear-gradient(
        135deg,
        hsl(var(--team-hue, 190) 72% 45%),
        hsl(var(--team-hue-2, 222) 68% 43%)
    );
    border-color: hsl(var(--team-hue, 190) 52% 44% / 0.58);
}

body.dark.team-portal-active.team-theme-generic {
    background:
        radial-gradient(950px 600px at 8% 0%, hsl(var(--team-hue, 190) 72% 50% / 0.2), transparent 72%),
        radial-gradient(1000px 620px at 96% 4%, hsl(var(--team-hue-2, 222) 70% 48% / 0.22), transparent 68%),
        linear-gradient(180deg, #091622 0%, #0a1b2a 100%);
}

body.dark.team-portal-active.team-theme-generic #teamDetailPage .menu-page-inner {
    border-color: hsl(var(--team-hue, 190) 48% 64% / 0.24);
}

body.dark.team-portal-active.team-theme-generic #teamDetailPage .menu-page-header h2 {
    color: #f7f8fc;
}

body.dark.team-portal-active.team-theme-generic #teamDetailPage .scope-badge.team {
    background: linear-gradient(
        140deg,
        hsl(var(--team-hue, 190) 72% 50% / 0.28),
        hsl(var(--team-hue-2, 222) 68% 48% / 0.24)
    );
    border-color: hsl(var(--team-hue, 190) 62% 68% / 0.5);
    color: #eafcff;
}

/* ---------- Accessibility Contrast Guardrail ---------- */
:root {
    --text-strong-light: #0A1324;
    --text-muted-light: #4A5870;
    --text-strong-dark: #F2F7FF;
    --text-muted-dark: #C6D3E5;
}

body {
    color: var(--text-strong-light);
}

body .page-subtitle,
body .menu-page-note,
body .notification-card p,
body .notification-meta,
body .modal-card p {
    color: var(--text-muted-light);
}

body .mini-table th,
body .mini-table td,
body .rankings-table th,
body .rankings-table td,
body .attendance-table th,
body .attendance-table td,
body .lead-policy-item,
body .insight-chip,
body .notification-card,
body .notification-card h4,
body .notification-filter-btn,
body .notification-dropdown-card,
body .notification-dropdown-header,
body .toast {
    color: var(--text-strong-light);
}

body.dark {
    color: var(--text-strong-dark);
}

body.dark .page-subtitle,
body.dark .menu-page-note,
body.dark .no-data,
body.dark .notification-card p,
body.dark .notification-meta,
body.dark .modal-card p {
    color: var(--text-muted-dark) !important;
}

body.dark .mini-table th,
body.dark .mini-table td,
body.dark .rankings-table th,
body.dark .rankings-table td,
body.dark .attendance-table th,
body.dark .attendance-table td,
body.dark .lead-policy-item,
body.dark .insight-chip,
body.dark .notification-card,
body.dark .notification-card h4,
body.dark .notification-filter-btn,
body.dark .notification-dropdown-card,
body.dark .notification-dropdown-header,
body.dark .toast,
body.dark .toast * {
    color: var(--text-strong-dark) !important;
}

/* ---------- Light Mode Menu Contrast Guardrail ---------- */
body:not(.dark) .sidebar-toggle,
body:not(.dark) .sidebar-sub-btn,
body:not(.dark) .sidebar-settings-btn,
body:not(.dark) .sidebar-signout-btn,
body:not(.dark) .menu-page-header h2,
body:not(.dark) .menu-page-subsection h3,
body:not(.dark) .menu-page .page-subtitle,
body:not(.dark) .menu-page-note,
body:not(.dark) .menu-page-scope,
body:not(.dark) .menu-page label,
body:not(.dark) .menu-page p,
body:not(.dark) .menu-page strong,
body:not(.dark) .menu-page .no-data,
body:not(.dark) .menu-page .admin-jfa-card,
body:not(.dark) .menu-page .admin-jfa-card .page-subtitle,
body:not(.dark) .menu-page .mini-table th,
body:not(.dark) .menu-page .mini-table td,
body:not(.dark) .menu-page .rankings-table th,
body:not(.dark) .menu-page .rankings-table td,
body:not(.dark) .menu-page input,
body:not(.dark) .menu-page select,
body:not(.dark) .menu-page textarea,
body:not(.dark) .menu-page option {
    color: #0A1324 !important;
}

body:not(.dark) .menu-page .page-subtitle,
body:not(.dark) .menu-page-note,
body:not(.dark) .menu-page-scope,
body:not(.dark) .menu-page .no-data {
    color: #46556f !important;
}

body.dark .mini-table td input,
body.dark .mini-table td select,
body.dark .mini-table td textarea,
body.dark .rankings-table td input,
body.dark .rankings-table td select,
body.dark .rankings-table td textarea {
    color: var(--text-strong-dark) !important;
    background: rgba(14, 22, 38, 0.94);
    border-color: rgba(255, 255, 255, 0.18);
}

/* ===== 2026 UI Polish Layer ===== */
:root {
    --polish-radius-sm: 12px;
    --polish-radius-md: 16px;
    --polish-radius-lg: 22px;
    --polish-shadow-soft: 0 10px 26px rgba(12, 18, 32, 0.10);
    --polish-shadow-hover: 0 16px 34px rgba(12, 18, 32, 0.14);
    --polish-ring: 0 0 0 3px rgba(242, 106, 33, 0.24);
}

body {
    text-rendering: geometricPrecision;
}

.navbar {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.hero-section {
    border-radius: var(--polish-radius-lg);
    box-shadow: var(--polish-shadow-soft);
    overflow: hidden;
}

.hero-section::before {
    opacity: 0.72;
}

.hero-glass {
    border-radius: calc(var(--polish-radius-lg) - 6px);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.28), 0 12px 26px rgba(0, 0, 0, 0.10);
}

.insight-card,
.summary-card,
.target-card,
.admin-jfa-card,
.hero-jfa-card,
.payment-card,
.menu-page-inner,
.modal-card,
.stats-section,
.archives-panel,
.registration-form-container,
.dbd-form-container,
.about-card,
.service-item {
    border-radius: var(--polish-radius-md) !important;
    box-shadow: var(--polish-shadow-soft);
}

.insight-card:hover,
.summary-card:hover,
.target-card:hover,
.admin-jfa-card:hover,
.hero-jfa-card:hover,
.payment-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--polish-shadow-hover);
}

.action-btn,
.submit-btn,
.back-btn,
.sidebar-toggle,
.sidebar-sub-btn,
.sidebar-settings-btn,
.sidebar-signout-btn {
    border-radius: var(--polish-radius-sm);
    transition: transform 150ms ease, box-shadow 200ms ease, background-color 200ms ease, border-color 200ms ease, opacity 200ms ease;
}

.action-btn:hover,
.submit-btn:hover,
.back-btn:hover,
.sidebar-toggle:hover,
.sidebar-sub-btn:hover,
.sidebar-settings-btn:hover,
.sidebar-signout-btn:hover {
    transform: translateY(-1px);
}

.action-btn:focus-visible,
.submit-btn:focus-visible,
.back-btn:focus-visible,
.sidebar-toggle:focus-visible,
.sidebar-sub-btn:focus-visible,
.sidebar-settings-btn:focus-visible,
.sidebar-signout-btn:focus-visible,
.nav-notification-btn:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    box-shadow: var(--polish-ring);
    outline: none;
}

.menu-page-header {
    border-radius: var(--polish-radius-md);
}

.menu-page-actions {
    gap: 10px;
}

.notification-dropdown-card,
.notification-card {
    border-radius: var(--polish-radius-sm);
}

.notification-list {
    scrollbar-width: thin;
}

.flow-stepper {
    border-radius: var(--polish-radius-md);
    box-shadow: var(--polish-shadow-soft);
}

.flow-step .step-index {
    box-shadow: 0 4px 12px rgba(18, 26, 42, 0.18);
}

.quick-actions-toggle {
    border-radius: 999px;
    box-shadow: 0 10px 22px rgba(16, 22, 38, 0.22);
}

.quick-actions-menu {
    border-radius: var(--polish-radius-md);
    box-shadow: 0 16px 38px rgba(10, 15, 28, 0.24);
}

body.dark .hero-section,
body.dark .insight-card,
body.dark .summary-card,
body.dark .target-card,
body.dark .admin-jfa-card,
body.dark .hero-jfa-card,
body.dark .payment-card,
body.dark .menu-page-inner,
body.dark .modal-card,
body.dark .stats-section,
body.dark .archives-panel {
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.42);
}

body.dark .hero-section {
    background: radial-gradient(1200px 380px at 12% -10%, rgba(45, 90, 150, 0.20), transparent 62%),
                radial-gradient(1000px 460px at 92% 0%, rgba(242, 106, 33, 0.12), transparent 62%),
                linear-gradient(180deg, rgba(15, 21, 32, 0.98), rgba(8, 13, 22, 0.98));
}

@media (max-width: 900px) {
    .hero-content {
        padding: 14px;
    }
    .hero-glass {
        padding: 14px;
    }
}

@media (max-width: 768px) {
    .navbar {
        border-radius: 0 0 14px 14px;
    }
    .flow-stepper {
        padding: 8px 6px;
        gap: 6px;
    }
    .flow-step {
        min-width: 54px;
    }
    .flow-step .step-label {
        font-size: 0.7rem;
    }
    .menu-page-inner {
        padding: 12px;
    }
    .menu-page-actions {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .menu-page-actions > .action-btn,
    .menu-page-actions > .submit-btn,
    .menu-page-actions > .back-btn {
        min-height: 42px;
    }
    .quick-actions-menu {
        max-width: min(90vw, 320px);
    }
}

@media (max-width: 430px) {
    .hero-headline {
        font-size: clamp(1.24rem, 4.8vw, 1.46rem);
    }
    .hero-subheadline {
        font-size: 0.86rem;
    }
    .hero-actions {
        gap: 8px;
    }
    .action-btn,
    .submit-btn,
    .back-btn {
        font-size: 0.84rem;
    }
}

@media (prefers-reduced-motion: reduce) {
    .insight-card:hover,
    .summary-card:hover,
    .target-card:hover,
    .admin-jfa-card:hover,
    .hero-jfa-card:hover,
    .payment-card:hover,
    .action-btn:hover,
    .submit-btn:hover,
    .back-btn:hover,
    .sidebar-toggle:hover,
    .sidebar-sub-btn:hover,
    .sidebar-settings-btn:hover,
    .sidebar-signout-btn:hover {
        transform: none !important;
    }
}

/* Admin Register Editing readability guard (light mode) */
body.admin-standalone-active:not(.dark) #adminMasterBody,
body.admin-standalone-active:not(.dark) #adminMasterBody h1,
body.admin-standalone-active:not(.dark) #adminMasterBody h2,
body.admin-standalone-active:not(.dark) #adminMasterBody h3,
body.admin-standalone-active:not(.dark) #adminMasterBody h4,
body.admin-standalone-active:not(.dark) #adminMasterBody h5,
body.admin-standalone-active:not(.dark) #adminMasterBody p,
body.admin-standalone-active:not(.dark) #adminMasterBody label,
body.admin-standalone-active:not(.dark) #adminMasterBody strong,
body.admin-standalone-active:not(.dark) #adminMasterBody span,
body.admin-standalone-active:not(.dark) #adminMasterBody th,
body.admin-standalone-active:not(.dark) #adminMasterBody td,
body.admin-standalone-active:not(.dark) #adminMasterBody .page-subtitle,
body.admin-standalone-active:not(.dark) #adminMasterBody .menu-page-note,
body.admin-standalone-active:not(.dark) #adminMasterBody .admin-jfa-card,
body.admin-standalone-active:not(.dark) #adminMasterBody .admin-jfa-card .page-subtitle,
body.admin-standalone-active:not(.dark) #adminMasterBody .admin-jfa-status {
    color: #0A1324 !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody input,
body.admin-standalone-active:not(.dark) #adminMasterBody select,
body.admin-standalone-active:not(.dark) #adminMasterBody textarea,
body.admin-standalone-active:not(.dark) #adminMasterBody option {
    color: #0A1324 !important;
    background: #FFFFFF !important;
    border-color: rgba(10, 19, 36, 0.18) !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody input::placeholder,
body.admin-standalone-active:not(.dark) #adminMasterBody textarea::placeholder {
    color: #5D6C84 !important;
}

/* Hard fix: JFA Register (All) readability in light mode */
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel h1,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel h2,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel h3,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel h4,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel p,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel label,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel strong,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel span,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel th,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel td {
    color: #0A1324 !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel input,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel select,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel textarea {
    color: #0A1324 !important;
    background: #FFFFFF !important;
    border-color: rgba(10, 19, 36, 0.2) !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel input::placeholder,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel textarea::placeholder {
    color: #5D6C84 !important;
}

/* Final guard: force readable text inside Admin > JFA Register (All) in light mode */
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel *:not(.action-btn):not(.submit-btn):not(.back-btn) {
    color: #0A1324 !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .page-subtitle {
    color: #4A5870 !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table table,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table th,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table td {
    color: #0A1324 !important;
    background-color: rgba(255, 255, 255, 0.98) !important;
}

/* Master file table (JFA personal details capture) explicit readability */
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table table,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table th,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table td,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table strong {
    color: #0A1324 !important;
    background: #FFFFFF !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table th[colspan="2"] {
    color: #0A1324 !important;
    background: rgba(11, 46, 82, 0.08) !important;
}

body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table input,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table select,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .master-file-table textarea {
    color: #0A1324 !important;
    background: #FFFFFF !important;
    border-color: rgba(10, 19, 36, 0.25) !important;
}

body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table table,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table th,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table td,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table strong {
    color: #F3F7FF !important;
    background: rgba(12, 21, 36, 0.94) !important;
}

body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table th[colspan="2"] {
    color: #F3F7FF !important;
    background: rgba(31, 57, 92, 0.75) !important;
}

body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table input,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table select,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .master-file-table textarea {
    color: #F3F7FF !important;
    background: rgba(18, 30, 48, 0.96) !important;
    border-color: rgba(255, 255, 255, 0.25) !important;
}

/* JFA + FA register name visibility guard (both themes) */
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .admin-jfa-card strong,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .admin-jfa-card .page-subtitle,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table tbody td,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table tbody td *,
body.admin-standalone-active:not(.dark) #adminMasterBody .register-editor-panel .mini-table tbody th {
    color: #0A1324 !important;
}

body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .admin-jfa-card strong,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .admin-jfa-card .page-subtitle,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .mini-table tbody td,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .mini-table tbody td *,
body.dark.admin-standalone-active #adminMasterBody .register-editor-panel .mini-table tbody th {
    color: #F3F7FF !important;
}

/* Mobile admin + settings fit hardening */
@media (max-width: 768px) {
    #settingsPage .menu-page-inner,
    #adminMasterBody .menu-page-inner,
    #admin-standalone-page .menu-page-inner {
        padding-inline: 10px;
    }

    #settingsPage .menu-page-actions,
    #adminMasterBody .menu-page-actions {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    #settingsPage .menu-page-actions .action-btn,
    #settingsPage .menu-page-actions .submit-btn,
    #adminMasterBody .menu-page-actions .action-btn,
    #adminMasterBody .menu-page-actions .submit-btn {
        width: 100%;
        min-height: 42px;
        font-size: 0.9rem;
    }

    .mini-table {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .mini-table table {
        min-width: 720px;
    }
}

/* Admin Master Logger readability fix (light mode) */
body:not(.dark) #adminMasterLogger,
body:not(.dark) #adminMasterLogger h1,
body:not(.dark) #adminMasterLogger h2,
body:not(.dark) #adminMasterLogger h3,
body:not(.dark) #adminMasterLogger h4,
body:not(.dark) #adminMasterLogger h5,
body:not(.dark) #adminMasterLogger p,
body:not(.dark) #adminMasterLogger label,
body:not(.dark) #adminMasterLogger strong,
body:not(.dark) #adminMasterLogger span,
body:not(.dark) #adminMasterLogger th,
body:not(.dark) #adminMasterLogger td,
body:not(.dark) #adminStandaloneMasterLogger,
body:not(.dark) #adminStandaloneMasterLogger h1,
body:not(.dark) #adminStandaloneMasterLogger h2,
body:not(.dark) #adminStandaloneMasterLogger h3,
body:not(.dark) #adminStandaloneMasterLogger h4,
body:not(.dark) #adminStandaloneMasterLogger h5,
body:not(.dark) #adminStandaloneMasterLogger p,
body:not(.dark) #adminStandaloneMasterLogger label,
body:not(.dark) #adminStandaloneMasterLogger strong,
body:not(.dark) #adminStandaloneMasterLogger span,
body:not(.dark) #adminStandaloneMasterLogger th,
body:not(.dark) #adminStandaloneMasterLogger td {
    color: #0A1324 !important;
}

body:not(.dark) #adminMasterLogger .page-subtitle,
body:not(.dark) #adminStandaloneMasterLogger .page-subtitle,
body:not(.dark) #adminMasterLogger .menu-page-note,
body:not(.dark) #adminStandaloneMasterLogger .menu-page-note {
    color: #4A5870 !important;
}

body:not(.dark) #adminMasterLogger .mini-table,
body:not(.dark) #adminStandaloneMasterLogger .mini-table {
    background: rgba(255, 255, 255, 0.96) !important;
}

/* Auth remember row */
.auth-remember-row {
    margin: 2px 0 0;
}

.auth-remember-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 0.86rem;
    color: var(--text-secondary);
}

/* User badge role tones */
#appUserBadge[data-role="ADMIN"] {
    background: rgba(202, 55, 80, 0.14);
    border-color: rgba(202, 55, 80, 0.42);
    color: #7B1326;
}

#appUserBadge[data-role="TEAM"] {
    background: rgba(11, 121, 93, 0.14);
    border-color: rgba(11, 121, 93, 0.34);
    color: #0C5A46;
}

body.dark #appUserBadge[data-role="ADMIN"] {
    color: #FFD6DC;
}

body.dark #appUserBadge[data-role="TEAM"] {
    color: #C8F7EB;
}

/* Settings session skeleton */
.skeleton-grid {
    display: grid;
    gap: 8px;
}

/* Mobile bottom nav */
.mobile-bottom-nav {
    display: none;
}

@media (max-width: 768px) {
    .mobile-bottom-nav {
        position: fixed;
        left: 10px;
        right: 10px;
        bottom: max(10px, env(safe-area-inset-bottom));
        z-index: 910;
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        gap: 6px;
        padding: 6px;
        border-radius: 14px;
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(10, 28, 61, 0.16);
        box-shadow: 0 12px 30px rgba(10, 28, 61, 0.14);
    }

    body.dark .mobile-bottom-nav {
        background: rgba(12, 21, 36, 0.92);
        border-color: rgba(231, 243, 255, 0.14);
    }

    .mobile-nav-btn {
        min-height: 34px;
        border-radius: 10px;
        border: 1px solid rgba(10, 28, 61, 0.14);
        background: rgba(255, 255, 255, 0.86);
        color: var(--text-primary);
        font-weight: 700;
        font-size: 0.82rem;
    }

    body.dark .mobile-nav-btn {
        background: rgba(21, 35, 58, 0.92);
        border-color: rgba(231, 243, 255, 0.16);
        color: #F5FAFF;
    }

    .mobile-nav-btn.is-active {
        background: linear-gradient(140deg, #123B67, #1B5D95);
        border-color: transparent;
        color: #FFFFFF;
    }

    .menu-page-header {
        padding: 10px 10px 8px;
        gap: 8px;
    }

    .menu-page-header h2 {
        font-size: 1.02rem;
        line-height: 1.2;
    }

    .menu-page .menu-header-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px;
        width: 100%;
    }

    .menu-page .menu-header-actions .action-btn {
        min-height: 34px;
        font-size: 0.78rem;
        padding: 0 8px;
    }

    .menu-page-inner {
        padding-bottom: 108px;
    }

    .quick-actions {
        bottom: max(10px, env(safe-area-inset-bottom));
    }

    .toast-container {
        bottom: calc(max(10px, env(safe-area-inset-bottom)) + 122px);
    }
}

/* Appointments + Leads explicit contrast guardrail */
body:not(.dark) #leadsPage .menu-page-note,
body:not(.dark) #appointmentsPage .menu-page-note {
    color: #1E2A3F !important;
    background: rgba(255, 255, 255, 0.94) !important;
    border-color: rgba(10, 19, 36, 0.16) !important;
}

body.dark #leadsPage .menu-page-note,
body.dark #appointmentsPage .menu-page-note {
    color: #E3EEFF !important;
    background: rgba(14, 24, 42, 0.94) !important;
    border-color: rgba(255, 255, 255, 0.18) !important;
}

body:not(.dark) #leadsPage .lead-panel,
body:not(.dark) #leadsPage .lead-section {
    color: #0A1324 !important;
}

body.dark #leadsPage .lead-panel,
body.dark #leadsPage .lead-section {
    color: #F3F8FF !important;
}

body:not(.dark) #leadsPage label,
body:not(.dark) #leadsPage p,
body:not(.dark) #leadsPage .page-subtitle,
body:not(.dark) #leadsPage .lead-section-title,
body:not(.dark) #leadsPage .lead-policy-item,
body:not(.dark) #leadsPage .lead-tc-box,
body:not(.dark) #leadsPage input,
body:not(.dark) #leadsPage select,
body:not(.dark) #leadsPage textarea {
    color: #0A1324 !important;
}

body.dark #leadsPage label,
body.dark #leadsPage p,
body.dark #leadsPage .page-subtitle,
body.dark #leadsPage .lead-section-title,
body.dark #leadsPage .lead-policy-item,
body.dark #leadsPage .lead-tc-box,
body.dark #leadsPage input,
body.dark #leadsPage select,
body.dark #leadsPage textarea {
    color: #F3F8FF !important;
}

body:not(.dark) #leadsPage input::placeholder,
body:not(.dark) #leadsPage textarea::placeholder {
    color: #5D6A80;
    opacity: 1;
}

body.dark #leadsPage input::placeholder,
body.dark #leadsPage textarea::placeholder {
    color: #B7C9E3;
    opacity: 1;
}

/* QA hardening: modal action fit + ben/team contrast */
@media (max-width: 560px) {
    #team-auth-modal .modal-actions,
    #forgot-password-modal .modal-actions,
    #reset-password-modal .modal-actions,
    #admin-auth-modal .modal-actions,
    #admin-menu-auth-modal .modal-actions {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 8px !important;
    }

    #team-auth-modal .modal-actions > .action-btn,
    #team-auth-modal .modal-actions > .submit-btn,
    #forgot-password-modal .modal-actions > .action-btn,
    #forgot-password-modal .modal-actions > .submit-btn,
    #reset-password-modal .modal-actions > .action-btn,
    #reset-password-modal .modal-actions > .submit-btn,
    #admin-auth-modal .modal-actions > .action-btn,
    #admin-auth-modal .modal-actions > .submit-btn,
    #admin-menu-auth-modal .modal-actions > .action-btn,
    #admin-menu-auth-modal .modal-actions > .submit-btn {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        min-height: 40px !important;
        font-size: 0.86rem !important;
        white-space: normal !important;
    }
}

body.dark #benSystemPage .ben-system-secondary-note,
body.dark #benSystemPage .ben-system-section-title,
body.dark #benSystemPage .ben-facility-card .page-subtitle,
body.dark #benSystemPage .ben-facility-card .mini-table th,
body.dark #benSystemPage .ben-facility-card .mini-table td,
body.dark #benSystemPage .ben-facility-card .mini-table td * {
    color: #EAF2FF !important;
}

body.dark #benSystemPage .ben-system-secondary-note,
body.dark #benSystemPage .ben-system-section-title {
    background: rgba(17, 30, 50, 0.92) !important;
    border: 1px solid rgba(255, 255, 255, 0.16) !important;
}

body:not(.dark) #benSystemPage .ben-system-secondary-note,
body:not(.dark) #benSystemPage .ben-system-section-title,
body:not(.dark) .team-portal-center-note {
    color: #0D1A2E !important;
}

body.dark .team-portal-center-note {
    color: #EAF2FF !important;
    background: rgba(17, 30, 50, 0.92) !important;
    border: 1px solid rgba(255, 255, 255, 0.16) !important;
}

/* Dedicated export reason window */
#export-reason-modal {
    z-index: 2600 !important;
}

.export-reason-card {
    max-width: 520px !important;
    border-radius: 16px !important;
    border: 1px solid rgba(13, 33, 60, 0.16) !important;
    box-shadow: 0 24px 56px rgba(10, 25, 45, 0.24) !important;
}

body.dark .export-reason-card {
    border-color: rgba(211, 229, 255, 0.2) !important;
    box-shadow: 0 24px 56px rgba(0, 0, 0, 0.48) !important;
}

/* Final override: Facility Directory mobile/tablet readability everywhere */
@media (max-width: 1024px) {
    .facility-directory-table.mobile-stack-table {
        width: 100% !important;
        min-width: 0 !important;
        border-collapse: separate !important;
        border-spacing: 0 10px !important;
    }

    .facility-directory-table.mobile-stack-table thead {
        display: none !important;
    }

    .facility-directory-table.mobile-stack-table tbody,
    .facility-directory-table.mobile-stack-table tr,
    .facility-directory-table.mobile-stack-table td {
        display: block !important;
        width: 100% !important;
    }

    .facility-directory-table.mobile-stack-table tr {
        background: rgba(255, 255, 255, 0.94) !important;
        border: 1px solid rgba(10, 19, 36, 0.12) !important;
        border-radius: 14px !important;
        padding: 10px !important;
        margin-bottom: 0 !important;
    }

    body.dark .facility-directory-table.mobile-stack-table tr {
        background: rgba(12, 26, 44, 0.94) !important;
        border-color: rgba(214, 231, 255, 0.2) !important;
    }

    .facility-directory-table.mobile-stack-table td {
        padding: 6px 0 !important;
        border: 0 !important;
        white-space: normal !important;
        word-break: break-word !important;
        overflow-wrap: anywhere !important;
        color: inherit !important;
    }

    .facility-directory-table.mobile-stack-table td::before {
        content: attr(data-label);
        display: block;
        font-size: 0.72rem;
        font-weight: 700;
        margin-bottom: 4px;
        color: #2b486b;
    }

    body.dark .facility-directory-table.mobile-stack-table td::before {
        color: #b8d6fb;
    }

    .facility-directory-table.mobile-stack-table td input {
        width: 100% !important;
        min-width: 0 !important;
        max-width: 100% !important;
        font-size: 0.86rem !important;
        line-height: 1.3 !important;
    }
}

body:not(.dark) #appointmentsPage,
body:not(.dark) #appointmentsPage .page-subtitle,
body:not(.dark) #appointmentsPage label,
body:not(.dark) #appointmentsPage .mini-table th,
body:not(.dark) #appointmentsPage .mini-table td {
    color: #0A1324 !important;
}

body.dark #appointmentsPage,
body.dark #appointmentsPage .page-subtitle,
body.dark #appointmentsPage label,
body.dark #appointmentsPage .mini-table th,
    body.dark #appointmentsPage .mini-table td {
    color: #F3F8FF !important;
}

/* ---------- Final UI Polish Layer (Visual only) ---------- */
:root {
    --ui-card-radius: 18px;
    --ui-control-radius: 12px;
    --ui-shadow-soft: 0 12px 28px rgba(10, 19, 36, 0.10);
    --ui-shadow-hover: 0 16px 34px rgba(10, 19, 36, 0.14);
}

.menu-page-inner,
.summary-card,
.target-card,
.insight-card,
.lead-panel,
.lead-section,
.mini-table,
.notification-dropdown-card,
.modal-card {
    border-radius: var(--ui-card-radius) !important;
}

.action-btn,
.submit-btn,
.back-btn,
.sidebar-toggle,
.sidebar-sub-btn,
.sidebar-settings-btn,
.sidebar-signout-btn,
.form-group input,
.form-group select,
.form-group textarea,
.learning-search input {
    border-radius: var(--ui-control-radius) !important;
}

.summary-card,
.target-card,
.insight-card,
.lead-panel,
.menu-page-inner {
    box-shadow: var(--ui-shadow-soft) !important;
}

.summary-card:hover,
.target-card:hover,
.insight-card:hover,
.lead-panel:hover {
    box-shadow: var(--ui-shadow-hover) !important;
}

.menu-page-header h2,
.page-header h1 {
    letter-spacing: 0.01em;
}

.page-subtitle {
    line-height: 1.45;
}

.mini-table th {
    font-weight: 700;
    letter-spacing: 0.01em;
}

.mini-table td {
    line-height: 1.4;
}

.menu-page-note {
    box-shadow: inset 0 0 0 1px rgba(10, 19, 36, 0.04);
}

body.dark .menu-page-note {
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
}

.form-group input,
.form-group select,
.form-group textarea {
    transition: border-color 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    box-shadow: 0 0 0 3px rgba(23, 162, 164, 0.14) !important;
}

@media (max-width: 768px) {
    .page-header,
    .menu-page-header {
        gap: 8px;
    }

    .page-header h1 {
        font-size: 1.28rem;
    }

    .menu-page-inner {
        padding: 14px;
    }

    .insight-card,
    .summary-card,
    .target-card,
    .lead-panel {
        padding: 12px;
    }

    .mini-table th,
    .mini-table td {
        font-size: 0.86rem;
        padding: 7px 8px;
    }
}

/* ---------- Matla Signature Theme Pass ---------- */
:root {
    --matla-deep: #08233F;
    --matla-deep-2: #0D355D;
    --matla-cyan: #19B4B5;
    --matla-orange: #F26A21;
    --matla-surface-glow: linear-gradient(145deg, rgba(255, 255, 255, 0.96), rgba(244, 248, 255, 0.9));
}

body {
    background:
        radial-gradient(760px 520px at 6% -4%, rgba(25, 180, 181, 0.10), rgba(255, 255, 255, 0)),
        radial-gradient(840px 520px at 94% 0%, rgba(242, 106, 33, 0.10), rgba(255, 255, 255, 0)),
        var(--bg);
}

.navbar {
    border-bottom: 1px solid rgba(8, 35, 63, 0.12);
    background: linear-gradient(125deg, rgba(255, 255, 255, 0.92), rgba(245, 250, 255, 0.86));
    backdrop-filter: blur(10px) saturate(160%);
}

.summary-card,
.target-card,
.insight-card,
.lead-panel,
.menu-page-inner {
    background: var(--matla-surface-glow) !important;
    border: 1px solid rgba(8, 35, 63, 0.12) !important;
}

.summary-card::before,
.target-card::before,
.insight-card::before {
    content: "";
    position: absolute;
    inset: 0;
    background:
        linear-gradient(120deg, rgba(25, 180, 181, 0.06), rgba(255, 255, 255, 0) 45%),
        linear-gradient(300deg, rgba(242, 106, 33, 0.05), rgba(255, 255, 255, 0) 48%);
    pointer-events: none;
    border-radius: inherit;
}

.action-btn {
    border: 1px solid rgba(8, 35, 63, 0.16) !important;
}

.action-btn:not(.secondary) {
    background: linear-gradient(135deg, var(--matla-deep), var(--matla-deep-2)) !important;
    color: #F8FCFF !important;
}

.action-btn.secondary {
    background: linear-gradient(135deg, rgba(25, 180, 181, 0.10), rgba(242, 106, 33, 0.12)) !important;
    border-color: rgba(8, 35, 63, 0.16) !important;
}

.sidebar-toggle.is-active,
.sidebar-settings-btn.is-active {
    background: linear-gradient(135deg, rgba(8, 35, 63, 0.95), rgba(13, 53, 93, 0.9)) !important;
    color: #F8FCFF !important;
}

.menu-page-header {
    background: linear-gradient(120deg, rgba(255, 255, 255, 0.92), rgba(246, 251, 255, 0.85));
}

.menu-page-note {
    border-left: 3px solid var(--matla-cyan);
}

.mini-table th {
    background: linear-gradient(125deg, rgba(236, 245, 255, 0.98), rgba(247, 251, 255, 0.98));
    color: #123A64 !important;
}

.mini-table tr:hover td {
    background: linear-gradient(120deg, rgba(25, 180, 181, 0.08), rgba(242, 106, 33, 0.07)) !important;
}

.status-pill {
    border-color: rgba(8, 35, 63, 0.24) !important;
}

body.dark {
    background:
        radial-gradient(760px 520px at 8% -6%, rgba(25, 180, 181, 0.16), rgba(0, 0, 0, 0)),
        radial-gradient(840px 520px at 94% 0%, rgba(242, 106, 33, 0.14), rgba(0, 0, 0, 0)),
        #070F1B;
}

body.dark .navbar {
    border-bottom-color: rgba(214, 231, 255, 0.12);
    background: linear-gradient(125deg, rgba(9, 20, 35, 0.92), rgba(12, 28, 49, 0.88));
}

body.dark .summary-card,
body.dark .target-card,
body.dark .insight-card,
body.dark .lead-panel,
body.dark .menu-page-inner {
    background: linear-gradient(145deg, rgba(10, 21, 37, 0.94), rgba(12, 27, 47, 0.9)) !important;
    border-color: rgba(214, 231, 255, 0.14) !important;
}

body.dark .action-btn.secondary {
    background: linear-gradient(135deg, rgba(25, 180, 181, 0.16), rgba(242, 106, 33, 0.16)) !important;
    color: #EAF4FF !important;
}

body.dark .mini-table th {
    background: linear-gradient(125deg, rgba(14, 32, 55, 0.96), rgba(17, 37, 63, 0.94));
    color: #DDEBFF !important;
}

@media (max-width: 768px) {
    .navbar {
        backdrop-filter: blur(8px) saturate(145%);
    }

    .summary-card,
    .target-card,
    .insight-card {
        border-width: 1px;
    }
}

/* ---------- Enterprise polish: visibility + mobile fit ---------- */
body:not(.dark) .menu-page h2,
body:not(.dark) .menu-page h3,
body:not(.dark) .menu-page h4,
body:not(.dark) .menu-page .page-subtitle,
body:not(.dark) .menu-page .menu-page-note,
body:not(.dark) .menu-page .mini-table td,
body:not(.dark) .menu-page .mini-table td *,
body:not(.dark) .menu-page .mini-table th {
    color: #102743 !important;
}

body.dark .menu-page h2,
body.dark .menu-page h3,
body.dark .menu-page h4,
body.dark .menu-page .page-subtitle,
body.dark .menu-page .menu-page-note,
body.dark .menu-page .mini-table td,
body.dark .menu-page .mini-table td *,
body.dark .menu-page .mini-table th {
    color: #E6EEF8 !important;
}

body.dark .menu-page .mini-table table,
body:not(.dark) .menu-page .mini-table table {
    border-color: rgba(17, 39, 67, 0.24) !important;
}

.menu-page .menu-page-actions .action-btn,
.menu-page .menu-page-actions .submit-btn,
.menu-page .menu-page-actions .back-btn {
    min-height: 40px;
}

@media (max-width: 768px) {
    .menu-page .menu-page-actions {
        gap: 8px;
    }

    .menu-page .menu-page-actions .action-btn,
    .menu-page .menu-page-actions .submit-btn,
    .menu-page .menu-page-actions .back-btn {
        min-height: 36px;
        padding: 8px 10px;
        font-size: 0.84rem;
        line-height: 1.25;
        white-space: normal;
        text-align: center;
        justify-content: center;
    }

    .modal-actions {
        gap: 8px;
    }

    .modal-actions > .action-btn,
    .modal-actions > .submit-btn {
        min-height: 36px;
        padding: 8px 10px;
        font-size: 0.84rem;
        flex: 1 1 0;
        min-width: 0;
    }

    #team-auth-modal .modal-actions > .action-btn,
    #team-auth-modal .modal-actions > .submit-btn,
    #forgot-password-modal .modal-actions > .action-btn,
    #forgot-password-modal .modal-actions > .submit-btn,
    #reset-password-modal .modal-actions > .action-btn,
    #reset-password-modal .modal-actions > .submit-btn {
        width: 100%;
    }
}

/* ---------- Final visibility + mobile-fit lock (latest pass) ---------- */
body.dark #benSystemPage .ben-system-primary-note,
body.dark #benSystemPage .ben-system-secondary-note,
body.dark #benSystemPage .ben-system-section-title {
    background: rgba(12, 27, 45, 0.96) !important;
    color: #e9f2ff !important;
    border-color: rgba(166, 198, 232, 0.34) !important;
}

body.dark #benSystemPage .ben-facility-card,
body.dark #benSystemPage .ben-facility-card h4,
body.dark #benSystemPage .ben-facility-card .page-subtitle,
body.dark #benSystemPage .ben-facility-card .mini-table th,
body.dark #benSystemPage .ben-facility-card .mini-table td,
body.dark #benSystemPage .ben-facility-card .mini-table td * {
    color: #eaf3ff !important;
}

body:not(.dark) #benSystemPage .ben-facility-card h4,
body:not(.dark) #benSystemPage .ben-facility-card .page-subtitle,
body:not(.dark) #benSystemPage .ben-facility-card .mini-table th,
body:not(.dark) #benSystemPage .ben-facility-card .mini-table td,
body:not(.dark) #benSystemPage .ben-facility-card .mini-table td * {
    color: #123457 !important;
}

body.dark #adminPage .team-portal-center-note,
body.dark #teamDetailPage .team-portal-center-note {
    background: #ffffff !important;
    color: #102743 !important;
}

body.dark.admin-standalone-active #adminMasterBody .mini-table tbody td,
body.dark.admin-standalone-active #adminMasterBody .mini-table tbody td *,
body.dark.admin-standalone-active #adminMasterBody .mini-table tbody th,
body.dark.admin-standalone-active #adminMasterBody .menu-page-note,
body.dark.admin-standalone-active #adminMasterBody h4 {
    color: #e8f1ff !important;
}

body:not(.dark).admin-standalone-active #adminMasterBody .mini-table tbody td,
body:not(.dark).admin-standalone-active #adminMasterBody .mini-table tbody td *,
body:not(.dark).admin-standalone-active #adminMasterBody .mini-table tbody th,
body:not(.dark).admin-standalone-active #adminMasterBody .menu-page-note,
body:not(.dark).admin-standalone-active #adminMasterBody h4 {
    color: #0f2f52 !important;
}

/* Keep "Open Leads" button centered and compact on mobile */
@media (max-width: 768px) {
    .hero-secondary-cta {
        min-width: 108px !important;
        padding: 8px 12px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        text-align: center !important;
    }

    .hero-secondary-cta span,
    .hero-secondary-cta {
        text-align: center !important;
    }

    .modal-content .modal-actions {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 8px !important;
    }

    .modal-content .modal-actions .action-btn,
    .modal-content .modal-actions .submit-btn {
        flex: 1 1 calc(50% - 4px) !important;
        min-width: 0 !important;
        width: auto !important;
        min-height: 36px !important;
        padding: 8px 10px !important;
        font-size: 0.83rem !important;
    }

    #team-auth-modal .modal-content .modal-actions .action-btn,
    #team-auth-modal .modal-content .modal-actions .submit-btn,
    #forgot-password-modal .modal-content .modal-actions .action-btn,
    #forgot-password-modal .modal-content .modal-actions .submit-btn,
    #reset-password-modal .modal-content .modal-actions .action-btn,
    #reset-password-modal .modal-content .modal-actions .submit-btn {
        flex: 1 1 100% !important;
        width: 100% !important;
    }
}

/* Notification panel should never clash with quick actions */
@media (max-width: 768px) {
    .notification-dropdown {
        z-index: 2300 !important;
        max-height: min(72vh, 560px) !important;
    }
}

/* Admin mobile button text alignment fix (Edit Facilities and related tabs) */
@media (max-width: 768px) {
    #admin-standalone-page .menu-page-actions .action-btn {
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        text-align: center !important;
        white-space: normal !important;
        line-height: 1.2 !important;
    }

    #admin-standalone-page .menu-page-actions .action-btn::after {
        display: none !important;
    }

    /* Admin -> Edit Facilities table mobile stacking */
    #adminMasterBody .admin-facility-editor-table-wrap {
        overflow: visible !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table {
        width: 100% !important;
        min-width: 0 !important;
        border-collapse: separate !important;
        border-spacing: 0 10px !important;
    }

    #adminMasterBody .admin-facility-editor-table-wrap {
        max-height: none !important;
        overflow: visible !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table thead {
        display: none !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table tbody {
        display: grid !important;
        gap: 10px !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table tbody,
    #adminMasterBody .facility-editor-table.mobile-stack-table tr,
    #adminMasterBody .facility-editor-table.mobile-stack-table td {
        display: block !important;
        width: 100% !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table tr {
        background: rgba(255, 255, 255, 0.92) !important;
        border: 1px solid rgba(10, 19, 36, 0.12) !important;
        border-radius: 14px !important;
        padding: 10px !important;
        margin-bottom: 0 !important;
    }

    body.dark #adminMasterBody .facility-editor-table.mobile-stack-table tr {
        background: rgba(12, 26, 44, 0.92) !important;
        border-color: rgba(214, 231, 255, 0.2) !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table td {
        padding: 6px 0 !important;
        border: 0 !important;
        white-space: normal !important;
        word-break: break-word !important;
        overflow-wrap: anywhere !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table td::before {
        content: attr(data-label);
        display: block;
        font-size: 0.72rem;
        font-weight: 700;
        margin-bottom: 4px;
        color: #2b486b;
    }

    body.dark #adminMasterBody .facility-editor-table.mobile-stack-table td::before {
        color: #b8d6fb;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table td input {
        width: 100% !important;
        min-width: 0 !important;
        max-width: 100% !important;
        font-size: 0.84rem !important;
        line-height: 1.25 !important;
        white-space: normal !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table td:last-child {
        white-space: normal !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table .facility-inline-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table .facility-inline-actions .action-btn {
        width: 100% !important;
        min-width: 0 !important;
        justify-content: center !important;
        text-align: center !important;
        white-space: nowrap !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table .facility-inline-actions .action-btn::after {
        display: none !important;
    }

    #adminMasterBody .facility-editor-table.mobile-stack-table .facility-inline-actions .action-btn {
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }

    @media (max-width: 430px) {
        #adminMasterBody .facility-editor-table.mobile-stack-table .facility-inline-actions {
            grid-template-columns: 1fr !important;
        }
    }

    /* Admin -> Facility Directory mobile stacking (standalone + menu admin) */
    #admin-standalone-page .admin-facility-directory-table-wrap,
    #adminPage .admin-facility-directory-table-wrap {
        overflow: visible !important;
        max-height: none !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table,
    #adminPage .facility-directory-table.mobile-stack-table {
        width: 100% !important;
        min-width: 0 !important;
        border-collapse: separate !important;
        border-spacing: 0 10px !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table thead,
    #adminPage .facility-directory-table.mobile-stack-table thead {
        display: none !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table tbody,
    #admin-standalone-page .facility-directory-table.mobile-stack-table tr,
    #admin-standalone-page .facility-directory-table.mobile-stack-table td,
    #adminPage .facility-directory-table.mobile-stack-table tbody,
    #adminPage .facility-directory-table.mobile-stack-table tr,
    #adminPage .facility-directory-table.mobile-stack-table td {
        display: block !important;
        width: 100% !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table tr,
    #adminPage .facility-directory-table.mobile-stack-table tr {
        background: rgba(255, 255, 255, 0.92) !important;
        border: 1px solid rgba(10, 19, 36, 0.12) !important;
        border-radius: 14px !important;
        padding: 10px !important;
        margin-bottom: 0 !important;
    }

    body.dark #admin-standalone-page .facility-directory-table.mobile-stack-table tr,
    body.dark #adminPage .facility-directory-table.mobile-stack-table tr {
        background: rgba(12, 26, 44, 0.92) !important;
        border-color: rgba(214, 231, 255, 0.2) !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table td,
    #adminPage .facility-directory-table.mobile-stack-table td {
        padding: 6px 0 !important;
        border: 0 !important;
        white-space: normal !important;
        word-break: break-word !important;
        overflow-wrap: anywhere !important;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table td::before,
    #adminPage .facility-directory-table.mobile-stack-table td::before {
        content: attr(data-label);
        display: block;
        font-size: 0.72rem;
        font-weight: 700;
        margin-bottom: 4px;
        color: #2b486b;
    }

    body.dark #admin-standalone-page .facility-directory-table.mobile-stack-table td::before,
    body.dark #adminPage .facility-directory-table.mobile-stack-table td::before {
        color: #b8d6fb;
    }

    #admin-standalone-page .facility-directory-table.mobile-stack-table td input,
    #adminPage .facility-directory-table.mobile-stack-table td input {
        width: 100% !important;
        min-width: 0 !important;
        max-width: 100% !important;
        font-size: 0.84rem !important;
        line-height: 1.25 !important;
    }

    /* Admin -> Team Leader Management mobile stacking */
    #adminMasterBody .admin-team-leader-editor-table-wrap {
        overflow: visible !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table {
        width: 100% !important;
        min-width: 0 !important;
        border-collapse: separate !important;
        border-spacing: 0 10px !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table thead {
        display: none !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table tbody,
    #adminMasterBody .team-leader-editor-table.mobile-stack-table tr,
    #adminMasterBody .team-leader-editor-table.mobile-stack-table td {
        display: block !important;
        width: 100% !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table tr {
        background: rgba(255, 255, 255, 0.92) !important;
        border: 1px solid rgba(10, 19, 36, 0.12) !important;
        border-radius: 14px !important;
        padding: 10px !important;
        margin-bottom: 10px !important;
    }

    body.dark #adminMasterBody .team-leader-editor-table.mobile-stack-table tr {
        background: rgba(12, 26, 44, 0.92) !important;
        border-color: rgba(214, 231, 255, 0.2) !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table td {
        padding: 6px 0 !important;
        border: 0 !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table td.mobile-stack-empty-row {
        text-align: center !important;
        font-weight: 600 !important;
        padding: 10px 6px !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table td::before {
        content: attr(data-label);
        display: block;
        font-size: 0.72rem;
        font-weight: 700;
        margin-bottom: 4px;
        color: #2b486b;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table td.mobile-stack-empty-row::before {
        content: "";
        display: none;
    }

    body.dark #adminMasterBody .team-leader-editor-table.mobile-stack-table td::before {
        color: #b8d6fb;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table td input {
        width: 100% !important;
        min-width: 0 !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table .facility-inline-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table .facility-inline-actions .action-btn {
        width: 100% !important;
        min-width: 0 !important;
        justify-content: center !important;
        text-align: center !important;
        white-space: nowrap !important;
    }

    #adminMasterBody .team-leader-editor-table.mobile-stack-table .facility-inline-actions .action-btn::after {
        display: none !important;
    }
}
